define(["./when-45f3d25d","./Check-34538dad","./Cartesian3-ef6ea826","./Cartesian2-a652b463","./WebGLConstants-3660bc8f","./AttributeCompression-20de7c5b","./IndexDatatype-6d2070e9","./createTaskProcessorWorker"],(function(a,e,r,n,t,i,s,u){"use strict";var c=new n.Cartographic,o=new r.Cartesian3,f=new n.Rectangle,p=new n.Ellipsoid,C=new r.Cartesian3,d={min:void 0,max:void 0},b=new r.Cartesian3,l=new r.Cartesian3,w=new r.Cartesian3,h=new r.Cartesian3,y=new r.Cartesian3;return u((function(a,e){var t=new Uint16Array(a.positions),u=new Uint16Array(a.widths),k=new Uint32Array(a.counts),v=new Uint16Array(a.batchIds);!function(a){a=new Float64Array(a);var e=0;d.min=a[e++],d.max=a[e++],n.Rectangle.unpack(a,e,f),e+=n.Rectangle.packedLength,n.Ellipsoid.unpack(a,e,p),e+=n.Ellipsoid.packedLength,r.Cartesian3.unpack(a,e,C)}(a.packedBuffer);var A,g=p,m=C,x=function(a,e,t,s,u){var f=a.length/3,p=a.subarray(0,f),C=a.subarray(f,2*f),d=a.subarray(2*f,3*f);i.AttributeCompression.zigZagDeltaDecode(p,C,d);for(var b=new Float64Array(a.length),l=0;l<f;++l){var w=p[l],h=C[l],y=d[l],k=r.CesiumMath.lerp(e.west,e.east,w/32767),v=r.CesiumMath.lerp(e.south,e.north,h/32767),A=r.CesiumMath.lerp(t,s,y/32767),g=n.Cartographic.fromRadians(k,v,A,c),m=u.cartographicToCartesian(g,o);r.Cartesian3.pack(m,b,3*l)}return b}(t,f,d.min,d.max,g),E=x.length/3,D=4*E-4,I=new Float32Array(3*D),T=new Float32Array(3*D),U=new Float32Array(3*D),F=new Float32Array(2*D),N=new Uint16Array(D),R=0,P=0,L=0,M=0,S=k.length;for(A=0;A<S;++A){for(var _=k[A],G=u[A],W=v[A],B=0;B<_;++B){var z;if(0===B){var H=r.Cartesian3.unpack(x,3*M,b),O=r.Cartesian3.unpack(x,3*(M+1),l);z=r.Cartesian3.subtract(H,O,w),r.Cartesian3.add(H,z,z)}else z=r.Cartesian3.unpack(x,3*(M+B-1),w);var Y,Z=r.Cartesian3.unpack(x,3*(M+B),h);if(B===_-1){var j=r.Cartesian3.unpack(x,3*(M+_-1),b),q=r.Cartesian3.unpack(x,3*(M+_-2),l);Y=r.Cartesian3.subtract(j,q,y),r.Cartesian3.add(j,Y,Y)}else Y=r.Cartesian3.unpack(x,3*(M+B+1),y);r.Cartesian3.subtract(z,m,z),r.Cartesian3.subtract(Z,m,Z),r.Cartesian3.subtract(Y,m,Y);for(var J=B===_-1?2:4,K=0===B?2:0;K<J;++K){r.Cartesian3.pack(Z,I,R),r.Cartesian3.pack(z,T,R),r.Cartesian3.pack(Y,U,R),R+=3;var Q=K-2<0?-1:1;F[P++]=K%2*2-1,F[P++]=Q*G,N[L++]=W}}M+=_}var V=s.IndexDatatype.createTypedArray(D,6*E-6),X=0,$=0;for(S=E-1,A=0;A<S;++A)V[$++]=X,V[$++]=X+2,V[$++]=X+1,V[$++]=X+1,V[$++]=X+2,V[$++]=X+3,X+=4;return e.push(I.buffer,T.buffer,U.buffer),e.push(F.buffer,N.buffer,V.buffer),{indexDatatype:2===V.BYTES_PER_ELEMENT?s.IndexDatatype.UNSIGNED_SHORT:s.IndexDatatype.UNSIGNED_INT,currentPositions:I.buffer,previousPositions:T.buffer,nextPositions:U.buffer,expandAndWidth:F.buffer,batchIds:N.buffer,indices:V.buffer}}))}));