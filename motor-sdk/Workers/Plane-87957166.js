define(["exports","./when-45f3d25d","./Check-34538dad","./Cartesian3-eab74dc0","./Matrix4-ed224189"],(function(e,t,n,a,r){"use strict";function i(e,t){if(n.Check.typeOf.object("normal",e),!a.CesiumMath.equalsEpsilon(a.Cartesian3.magnitude(e),1,a.CesiumMath.EPSILON6))throw new n.DeveloperError("normal must be normalized.");n.Check.typeOf.number("distance",t),this.normal=a.Cartesian3.clone(e),this.distance=t}i.fromPointNormal=function(e,r,o){if(n.Check.typeOf.object("point",e),n.Check.typeOf.object("normal",r),!a.CesiumMath.equalsEpsilon(a.Cartesian3.magnitude(r),1,a.CesiumMath.EPSILON6))throw new n.DeveloperError("normal must be normalized.");var c=-a.Cartesian3.dot(r,e);return t.defined(o)?(a.Cartesian3.clone(r,o.normal),o.distance=c,o):new i(r,c)};var o=new a.Cartesian3;i.fromCartesian4=function(e,r){n.Check.typeOf.object("coefficients",e);var c=a.Cartesian3.fromCartesian4(e,o),s=e.w;return t.defined(r)?(a.Cartesian3.clone(c,r.normal),r.distance=s,r):new i(c,s)},i.getIntersectWithLineSegment=function(e,t,n){let r=a.Cartesian3.dot(e.normal,t)-e.distance,i=a.Cartesian3.dot(e.normal,n)-e.distance;if(r*i<=0){a.Cartesian3.subtract(t,n,o),a.Cartesian3.normalize(o,o);let i=a.Cartesian3.dot(o,e.normal);return a.Cartesian3.multiplyByScalar(o,-r/i,o),a.Cartesian3.add(o,t,new a.Cartesian3)}},i.getPointDistance=function(e,t){return n.Check.typeOf.object("plane",e),n.Check.typeOf.object("point",t),a.Cartesian3.dot(e.normal,t)+e.distance};var c=new a.Cartesian3;i.projectPointOntoPlane=function(e,r,o){n.Check.typeOf.object("plane",e),n.Check.typeOf.object("point",r),t.defined(o)||(o=new a.Cartesian3);var s=i.getPointDistance(e,r),l=a.Cartesian3.multiplyByScalar(e.normal,s,c);return a.Cartesian3.subtract(r,l,o)},i.projectPointsOntoPlane=function(e,a,r){n.Check.typeOf.object("plane",e),n.Check.typeOf.object("array",a),t.defined(r)||(r=[]);for(let t=0;t<a.length;t++)r[t]=i.projectPointOntoPlane(e,a[t],r[t]);return r};var s=new a.Cartesian3;i.transform=function(e,t,c){return n.Check.typeOf.object("plane",e),n.Check.typeOf.object("transform",t),r.Matrix4.multiplyByPointAsVector(t,e.normal,o),a.Cartesian3.normalize(o,o),a.Cartesian3.multiplyByScalar(e.normal,-e.distance,s),r.Matrix4.multiplyByPoint(t,s,s),i.fromPointNormal(s,o,c)},i.clone=function(e,r){return n.Check.typeOf.object("plane",e),t.defined(r)?(a.Cartesian3.clone(e.normal,r.normal),r.distance=e.distance,r):new i(e.normal,e.distance)},i.equals=function(e,t){return n.Check.typeOf.object("left",e),n.Check.typeOf.object("right",t),e.distance===t.distance&&a.Cartesian3.equals(e.normal,t.normal)},i.ORIGIN_XY_PLANE=Object.freeze(new i(a.Cartesian3.UNIT_Z,0)),i.ORIGIN_YZ_PLANE=Object.freeze(new i(a.Cartesian3.UNIT_X,0)),i.ORIGIN_ZX_PLANE=Object.freeze(new i(a.Cartesian3.UNIT_Y,0)),i.prototype.projectPointsOntoPlane=function(e,t){return i.projectPointsOntoPlane(this,e,t)},i.fromPositions=function(e){if(e.length<3)throw new Error("\u8bf7\u8f93\u5165\u81f3\u5c11\u4e09\u4e2a\u70b9");let t=e[0],n=e[1],r=e[2],o=a.Cartesian3.subtract(t,n,new a.Cartesian3),c=a.Cartesian3.subtract(t,r,new a.Cartesian3),s=a.Cartesian3.cross(o,c,c);return i.fromPointNormal(a.Cartesian3.clone(t,o),s)},e.Plane=i}));