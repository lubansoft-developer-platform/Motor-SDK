define(["exports","./when-45f3d25d","./Check-34538dad","./Cartesian3-eab74dc0","./Cartesian2-174fefc1","./Transforms-37754d60","./Matrix4-ed224189"],(function(e,a,t,r,n,i,s){"use strict";function c(e){this._ellipsoid=a.defaultValue(e,n.Ellipsoid.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}function u(e,t){this.start=a.defaultValue(e,0),this.stop=a.defaultValue(t,0)}function d(e,t){this.center=r.Cartesian3.clone(a.defaultValue(e,r.Cartesian3.ZERO)),this.radius=a.defaultValue(t,0)}Object.defineProperties(c.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),c.prototype.project=function(e,t){var n=this._semimajorAxis,i=e.longitude*n,s=e.latitude*n,c=e.height;return a.defined(t)?(t.x=i,t.y=s,t.z=c,t):new r.Cartesian3(i,s,c)},c.prototype.unproject=function(e,r){if(!a.defined(e))throw new t.DeveloperError("cartesian is required");var i=this._oneOverSemimajorAxis,s=e.x*i,c=e.y*i,u=e.z;return a.defined(r)?(r.longitude=s,r.latitude=c,r.height=u,r):new n.Cartographic(s,c,u)};var o=new r.Cartesian3,C=new r.Cartesian3,l=new r.Cartesian3,f=new r.Cartesian3,h=new r.Cartesian3,y=new r.Cartesian3,p=new r.Cartesian3,m=new r.Cartesian3,v=new r.Cartesian3,x=new r.Cartesian3,g=new r.Cartesian3,z=new r.Cartesian3,b=4/3*r.CesiumMath.PI;d.fromPoints=function(e,t){if(a.defined(t)||(t=new d),!a.defined(e)||0===e.length)return t.center=r.Cartesian3.clone(r.Cartesian3.ZERO,t.center),t.radius=0,t;var n,i=r.Cartesian3.clone(e[0],p),s=r.Cartesian3.clone(i,o),c=r.Cartesian3.clone(i,C),u=r.Cartesian3.clone(i,l),b=r.Cartesian3.clone(i,f),w=r.Cartesian3.clone(i,h),O=r.Cartesian3.clone(i,y),S=e.length;for(n=1;n<S;n++){r.Cartesian3.clone(e[n],i);var q=i.x,j=i.y,k=i.z;q<s.x&&r.Cartesian3.clone(i,s),q>b.x&&r.Cartesian3.clone(i,b),j<c.y&&r.Cartesian3.clone(i,c),j>w.y&&r.Cartesian3.clone(i,w),k<u.z&&r.Cartesian3.clone(i,u),k>O.z&&r.Cartesian3.clone(i,O)}var E=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(b,s,m)),R=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(w,c,m)),M=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(O,u,m)),P=s,V=b,I=E;R>I&&(I=R,P=c,V=w),M>I&&(I=M,P=u,V=O);var B=v;B.x=.5*(P.x+V.x),B.y=.5*(P.y+V.y),B.z=.5*(P.z+V.z);var D=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(V,B,m)),T=Math.sqrt(D),Z=x;Z.x=s.x,Z.y=c.y,Z.z=u.z;var _=g;_.x=b.x,_.y=w.y,_.z=O.z;var A=r.Cartesian3.midpoint(Z,_,z),N=0;for(n=0;n<S;n++){r.Cartesian3.clone(e[n],i);var W=r.Cartesian3.magnitude(r.Cartesian3.subtract(i,A,m));W>N&&(N=W);var G=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(i,B,m));if(G>D){var U=Math.sqrt(G);T=.5*(T+U),D=T*T;var H=U-T;B.x=(T*B.x+H*i.x)/U,B.y=(T*B.y+H*i.y)/U,B.z=(T*B.z+H*i.z)/U}}return T<N?(r.Cartesian3.clone(B,t.center),t.radius=T):(r.Cartesian3.clone(A,t.center),t.radius=N),t},d.fromInstancePoints=function(e,t,n){if(a.defined(t)||(t=new d),!a.defined(e)||0===n)return t.center=r.Cartesian3.clone(r.Cartesian3.ZERO,t.center),t.radius=0,t;var i,s=r.Cartesian3.clone(e[0],p),c=r.Cartesian3.clone(s,o),u=r.Cartesian3.clone(s,C),b=r.Cartesian3.clone(s,l),w=r.Cartesian3.clone(s,f),O=r.Cartesian3.clone(s,h),S=r.Cartesian3.clone(s,y);for(i=1;i<n;i++){r.Cartesian3.clone(e[i],s);var q=s.x,j=s.y,k=s.z;q<c.x&&r.Cartesian3.clone(s,c),q>w.x&&r.Cartesian3.clone(s,w),j<u.y&&r.Cartesian3.clone(s,u),j>O.y&&r.Cartesian3.clone(s,O),k<b.z&&r.Cartesian3.clone(s,b),k>S.z&&r.Cartesian3.clone(s,S)}var E=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(w,c,m)),R=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(O,u,m)),M=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(S,b,m)),P=c,V=w,I=E;R>I&&(I=R,P=u,V=O),M>I&&(I=M,P=b,V=S);var B=v;B.x=.5*(P.x+V.x),B.y=.5*(P.y+V.y),B.z=.5*(P.z+V.z);var D=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(V,B,m)),T=Math.sqrt(D),Z=x;Z.x=c.x,Z.y=u.y,Z.z=b.z;var _=g;_.x=w.x,_.y=O.y,_.z=S.z;var A=r.Cartesian3.midpoint(Z,_,z),N=0;for(i=0;i<n;i++){r.Cartesian3.clone(e[i],s);var W=r.Cartesian3.magnitude(r.Cartesian3.subtract(s,A,m));W>N&&(N=W);var G=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(s,B,m));if(G>D){var U=Math.sqrt(G);T=.5*(T+U),D=T*T;var H=U-T;B.x=(T*B.x+H*s.x)/U,B.y=(T*B.y+H*s.y)/U,B.z=(T*B.z+H*s.z)/U}}return T<N?(r.Cartesian3.clone(B,t.center),t.radius=T):(r.Cartesian3.clone(A,t.center),t.radius=N),t},d.isIntersect=function(e,a){let t=r.Cartesian3.distance(e.center,a.center);return!(t>e.radius+a.radius)},d.isInclude=function(e,a){let t=r.Cartesian3.distance(e.center,a.center);return e.radius>t+a.radius};var w=new c,O=new r.Cartesian3,S=new r.Cartesian3,q=new n.Cartographic,j=new n.Cartographic;d.fromRectangle2D=function(e,a,t){return d.fromRectangleWithHeights2D(e,a,0,0,t)},d.fromRectangleWithHeights2D=function(e,t,i,s,c){if(a.defined(c)||(c=new d),!a.defined(e))return c.center=r.Cartesian3.clone(r.Cartesian3.ZERO,c.center),c.radius=0,c;t=a.defaultValue(t,w),n.Rectangle.southwest(e,q),q.height=i,n.Rectangle.northeast(e,j),j.height=s;var u=t.project(q,O),o=t.project(j,S),C=o.x-u.x,l=o.y-u.y,f=o.z-u.z;c.radius=.5*Math.sqrt(C*C+l*l+f*f);var h=c.center;return h.x=u.x+.5*C,h.y=u.y+.5*l,h.z=u.z+.5*f,c};var k=[];d.fromRectangle3D=function(e,t,i,s){if(t=a.defaultValue(t,n.Ellipsoid.WGS84),i=a.defaultValue(i,0),a.defined(s)||(s=new d),!a.defined(e))return s.center=r.Cartesian3.clone(r.Cartesian3.ZERO,s.center),s.radius=0,s;var c=n.Rectangle.subsample(e,t,i,k);return d.fromPoints(c,s)},d.fromVertices=function(e,n,i,s){if(a.defined(s)||(s=new d),!a.defined(e)||0===e.length)return s.center=r.Cartesian3.clone(r.Cartesian3.ZERO,s.center),s.radius=0,s;n=a.defaultValue(n,r.Cartesian3.ZERO),i=a.defaultValue(i,3),t.Check.typeOf.number.greaterThanOrEquals("stride",i,3);var c=p;c.x=e[0]+n.x,c.y=e[1]+n.y,c.z=e[2]+n.z;var u,b=r.Cartesian3.clone(c,o),w=r.Cartesian3.clone(c,C),O=r.Cartesian3.clone(c,l),S=r.Cartesian3.clone(c,f),q=r.Cartesian3.clone(c,h),j=r.Cartesian3.clone(c,y),k=e.length;for(u=0;u<k;u+=i){var E=e[u]+n.x,R=e[u+1]+n.y,M=e[u+2]+n.z;c.x=E,c.y=R,c.z=M,E<b.x&&r.Cartesian3.clone(c,b),E>S.x&&r.Cartesian3.clone(c,S),R<w.y&&r.Cartesian3.clone(c,w),R>q.y&&r.Cartesian3.clone(c,q),M<O.z&&r.Cartesian3.clone(c,O),M>j.z&&r.Cartesian3.clone(c,j)}var P=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(S,b,m)),V=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(q,w,m)),I=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(j,O,m)),B=b,D=S,T=P;V>T&&(T=V,B=w,D=q),I>T&&(T=I,B=O,D=j);var Z=v;Z.x=.5*(B.x+D.x),Z.y=.5*(B.y+D.y),Z.z=.5*(B.z+D.z);var _=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(D,Z,m)),A=Math.sqrt(_),N=x;N.x=b.x,N.y=w.y,N.z=O.z;var W=g;W.x=S.x,W.y=q.y,W.z=j.z;var G=r.Cartesian3.midpoint(N,W,z),U=0;for(u=0;u<k;u+=i){c.x=e[u]+n.x,c.y=e[u+1]+n.y,c.z=e[u+2]+n.z;var H=r.Cartesian3.magnitude(r.Cartesian3.subtract(c,G,m));H>U&&(U=H);var L=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(c,Z,m));if(L>_){var X=Math.sqrt(L);A=.5*(A+X),_=A*A;var F=X-A;Z.x=(A*Z.x+F*c.x)/X,Z.y=(A*Z.y+F*c.y)/X,Z.z=(A*Z.z+F*c.z)/X}}return A<U?(r.Cartesian3.clone(Z,s.center),s.radius=A):(r.Cartesian3.clone(G,s.center),s.radius=U),s},d.fromEncodedCartesianVertices=function(e,t,n){if(a.defined(n)||(n=new d),!a.defined(e)||!a.defined(t)||e.length!==t.length||0===e.length)return n.center=r.Cartesian3.clone(r.Cartesian3.ZERO,n.center),n.radius=0,n;var i=p;i.x=e[0]+t[0],i.y=e[1]+t[1],i.z=e[2]+t[2];var s,c=r.Cartesian3.clone(i,o),u=r.Cartesian3.clone(i,C),b=r.Cartesian3.clone(i,l),w=r.Cartesian3.clone(i,f),O=r.Cartesian3.clone(i,h),S=r.Cartesian3.clone(i,y),q=e.length;for(s=0;s<q;s+=3){var j=e[s]+t[s],k=e[s+1]+t[s+1],E=e[s+2]+t[s+2];i.x=j,i.y=k,i.z=E,j<c.x&&r.Cartesian3.clone(i,c),j>w.x&&r.Cartesian3.clone(i,w),k<u.y&&r.Cartesian3.clone(i,u),k>O.y&&r.Cartesian3.clone(i,O),E<b.z&&r.Cartesian3.clone(i,b),E>S.z&&r.Cartesian3.clone(i,S)}var R=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(w,c,m)),M=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(O,u,m)),P=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(S,b,m)),V=c,I=w,B=R;M>B&&(B=M,V=u,I=O),P>B&&(B=P,V=b,I=S);var D=v;D.x=.5*(V.x+I.x),D.y=.5*(V.y+I.y),D.z=.5*(V.z+I.z);var T=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(I,D,m)),Z=Math.sqrt(T),_=x;_.x=c.x,_.y=u.y,_.z=b.z;var A=g;A.x=w.x,A.y=O.y,A.z=S.z;var N=r.Cartesian3.midpoint(_,A,z),W=0;for(s=0;s<q;s+=3){i.x=e[s]+t[s],i.y=e[s+1]+t[s+1],i.z=e[s+2]+t[s+2];var G=r.Cartesian3.magnitude(r.Cartesian3.subtract(i,N,m));G>W&&(W=G);var U=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(i,D,m));if(U>T){var H=Math.sqrt(U);Z=.5*(Z+H),T=Z*Z;var L=H-Z;D.x=(Z*D.x+L*i.x)/H,D.y=(Z*D.y+L*i.y)/H,D.z=(Z*D.z+L*i.z)/H}}return Z<W?(r.Cartesian3.clone(D,n.center),n.radius=Z):(r.Cartesian3.clone(N,n.center),n.radius=W),n},d.fromCornerPoints=function(e,n,i){t.Check.typeOf.object("corner",e),t.Check.typeOf.object("oppositeCorner",n),a.defined(i)||(i=new d);var s=r.Cartesian3.midpoint(e,n,i.center);return i.radius=r.Cartesian3.distance(s,n),i},d.fromEllipsoid=function(e,n){return t.Check.typeOf.object("ellipsoid",e),a.defined(n)||(n=new d),r.Cartesian3.clone(r.Cartesian3.ZERO,n.center),n.radius=e.maximumRadius,n};var E=new r.Cartesian3;d.fromBoundingSpheres=function(e,t){if(a.defined(t)||(t=new d),!a.defined(e)||0===e.length)return t.center=r.Cartesian3.clone(r.Cartesian3.ZERO,t.center),t.radius=0,t;var n=e.length;if(1===n)return d.clone(e[0],t);if(2===n)return d.union(e[0],e[1],t);var i,s=[];for(i=0;i<n;i++)s.push(e[i].center);t=d.fromPoints(s,t);var c=t.center,u=t.radius;for(i=0;i<n;i++){var o=e[i];u=Math.max(u,r.Cartesian3.distance(c,o.center,E)+o.radius)}return t.radius=u,t};var R=new r.Cartesian3,M=new r.Cartesian3,P=new r.Cartesian3;d.fromOrientedBoundingBox=function(e,n){t.Check.defined("orientedBoundingBox",e),a.defined(n)||(n=new d);var i=e.halfAxes,c=s.Matrix3.getColumn(i,0,R),u=s.Matrix3.getColumn(i,1,M),o=s.Matrix3.getColumn(i,2,P);return r.Cartesian3.add(c,u,c),r.Cartesian3.add(c,o,c),n.center=r.Cartesian3.clone(e.center,n.center),n.radius=r.Cartesian3.magnitude(c),n},d.clone=function(e,t){if(a.defined(e))return a.defined(t)?(t.center=r.Cartesian3.clone(e.center,t.center),t.radius=e.radius,t):new d(e.center,e.radius)},d.packedLength=4,d.pack=function(e,r,n){t.Check.typeOf.object("value",e),t.Check.defined("array",r),n=a.defaultValue(n,0);var i=e.center;return r[n++]=i.x,r[n++]=i.y,r[n++]=i.z,r[n]=e.radius,r},d.unpack=function(e,r,n){t.Check.defined("array",e),r=a.defaultValue(r,0),a.defined(n)||(n=new d);var i=n.center;return i.x=e[r++],i.y=e[r++],i.z=e[r++],n.radius=e[r],n};var V=new r.Cartesian3,I=new r.Cartesian3;d.union=function(e,n,i){t.Check.typeOf.object("left",e),t.Check.typeOf.object("right",n),a.defined(i)||(i=new d);var s=e.center,c=e.radius,u=n.center,o=n.radius,C=r.Cartesian3.subtract(u,s,V),l=r.Cartesian3.magnitude(C);if(c>=l+o)return e.clone(i),i;if(o>=l+c)return n.clone(i),i;var f=.5*(c+l+o),h=r.Cartesian3.multiplyByScalar(C,(-c+f)/l,I);return r.Cartesian3.add(h,s,h),r.Cartesian3.clone(h,i.center),i.radius=f,i};var B=new r.Cartesian3;d.expandDistance=function(e,a,t,n){r.Cartesian3.multiplyByScalar(t,a,B);let i=n.center;return r.Cartesian3.add(i,B,i),n.radius=Math.sqrt(e.radius*e.radius+a*a),n},d.expand=function(e,a,n){t.Check.typeOf.object("sphere",e),t.Check.typeOf.object("point",a),n=d.clone(e,n);var i=r.Cartesian3.magnitude(r.Cartesian3.subtract(a,n.center,B));return i>n.radius&&(n.radius=i),n},d.intersectPlane=function(e,a){t.Check.typeOf.object("sphere",e),t.Check.typeOf.object("plane",a);var n=e.center,s=e.radius,c=a.normal,u=r.Cartesian3.dot(c,n)+a.distance;return u<-s?i.Intersect.OUTSIDE:u<s?i.Intersect.INTERSECTING:i.Intersect.INSIDE},d.transform=function(e,r,n){return t.Check.typeOf.object("sphere",e),t.Check.typeOf.object("transform",r),a.defined(n)||(n=new d),n.center=s.Matrix4.multiplyByPoint(r,e.center,n.center),n.radius=s.Matrix4.getMaximumScale(r)*e.radius,n};var D=new r.Cartesian3;d.distanceSquaredTo=function(e,a){t.Check.typeOf.object("sphere",e),t.Check.typeOf.object("cartesian",a);var n=r.Cartesian3.subtract(e.center,a,D);return r.Cartesian3.magnitudeSquared(n)-e.radius*e.radius},d.transformWithoutScale=function(e,r,n){return t.Check.typeOf.object("sphere",e),t.Check.typeOf.object("transform",r),a.defined(n)||(n=new d),n.center=s.Matrix4.multiplyByPoint(r,e.center,n.center),n.radius=e.radius,n};var T=new r.Cartesian3;d.computePlaneDistances=function(e,n,i,s){t.Check.typeOf.object("sphere",e),t.Check.typeOf.object("position",n),t.Check.typeOf.object("direction",i),a.defined(s)||(s=new u);var c=r.Cartesian3.subtract(e.center,n,T),d=r.Cartesian3.dot(i,c);return s.start=d-e.radius,s.stop=d+e.radius,s};for(var Z=new r.Cartesian3,_=new r.Cartesian3,A=new r.Cartesian3,N=new r.Cartesian3,W=new r.Cartesian3,G=new n.Cartographic,U=new Array(8),H=0;H<8;++H)U[H]=new r.Cartesian3;var L=new c;d.projectTo2D=function(e,n,i){t.Check.typeOf.object("sphere",e),n=a.defaultValue(n,L);var s,c=n.ellipsoid,u=e.center,o=e.radius;s=r.Cartesian3.equals(u,r.Cartesian3.ZERO)?r.Cartesian3.clone(r.Cartesian3.UNIT_X,Z):c.geodeticSurfaceNormal(u,Z);var C=r.Cartesian3.cross(r.Cartesian3.UNIT_Z,s,_);r.Cartesian3.normalize(C,C);var l=r.Cartesian3.cross(s,C,A);r.Cartesian3.normalize(l,l),r.Cartesian3.multiplyByScalar(s,o,s),r.Cartesian3.multiplyByScalar(l,o,l),r.Cartesian3.multiplyByScalar(C,o,C);var f=r.Cartesian3.negate(l,W),h=r.Cartesian3.negate(C,N),y=U,p=y[0];r.Cartesian3.add(s,l,p),r.Cartesian3.add(p,C,p),p=y[1],r.Cartesian3.add(s,l,p),r.Cartesian3.add(p,h,p),p=y[2],r.Cartesian3.add(s,f,p),r.Cartesian3.add(p,h,p),p=y[3],r.Cartesian3.add(s,f,p),r.Cartesian3.add(p,C,p),r.Cartesian3.negate(s,s),p=y[4],r.Cartesian3.add(s,l,p),r.Cartesian3.add(p,C,p),p=y[5],r.Cartesian3.add(s,l,p),r.Cartesian3.add(p,h,p),p=y[6],r.Cartesian3.add(s,f,p),r.Cartesian3.add(p,h,p),p=y[7],r.Cartesian3.add(s,f,p),r.Cartesian3.add(p,C,p);for(var m=y.length,v=0;v<m;++v){var x=y[v];r.Cartesian3.add(u,x,x);var g=c.cartesianToCartographic(x,G);n.project(g,x)}i=d.fromPoints(y,i),u=i.center;var z=u.x,b=u.y,w=u.z;return u.x=w,u.y=z,u.z=b,i},d.isOccluded=function(e,a){return t.Check.typeOf.object("sphere",e),t.Check.typeOf.object("occluder",a),!a.isBoundingSphereVisible(e)},d.equals=function(e,t){return e===t||a.defined(e)&&a.defined(t)&&r.Cartesian3.equals(e.center,t.center)&&e.radius===t.radius},d.prototype.intersectPlane=function(e){return d.intersectPlane(this,e)},d.prototype.distanceSquaredTo=function(e){return d.distanceSquaredTo(this,e)},d.prototype.computePlaneDistances=function(e,a,t){return d.computePlaneDistances(this,e,a,t)},d.prototype.isOccluded=function(e){return d.isOccluded(this,e)},d.prototype.equals=function(e){return d.equals(this,e)},d.prototype.clone=function(e){return d.clone(this,e)},d.prototype.volume=function(){var e=this.radius;return b*e*e*e},d.prototype.getCornerAry=function(){var e=[],a=new r.Cartesian3,t=new r.Cartesian3(this.radius,0,0),n=new r.Cartesian3(0,this.radius,0),i=new r.Cartesian3(0,0,this.radius),s=r.Cartesian3.add(t,n,a);return r.Cartesian3.add(s,i,s),r.Cartesian3.add(s,this.center,s),e.push(s.clone()),r.Cartesian3.add(this.center,t,s),r.Cartesian3.add(s,n,s),r.Cartesian3.subtract(s,i,s),e.push(s.clone()),r.Cartesian3.add(this.center,t,s),r.Cartesian3.subtract(s,n,s),r.Cartesian3.add(s,i,s),e.push(s.clone()),r.Cartesian3.add(this.center,t,s),r.Cartesian3.subtract(s,n,s),r.Cartesian3.subtract(s,i,s),e.push(s.clone()),r.Cartesian3.subtract(this.center,t,s),r.Cartesian3.add(s,n,s),r.Cartesian3.add(s,i,s),e.push(s.clone()),r.Cartesian3.subtract(this.center,t,s),r.Cartesian3.add(s,n,s),r.Cartesian3.subtract(s,i,s),e.push(s.clone()),r.Cartesian3.subtract(this.center,t,s),r.Cartesian3.subtract(s,n,s),r.Cartesian3.add(s,i,s),e.push(s.clone()),r.Cartesian3.subtract(this.center,t,s),r.Cartesian3.subtract(s,n,s),r.Cartesian3.subtract(s,i,s),e.push(s.clone()),e},e.BoundingSphere=d,e.GeographicProjection=c,e.Interval=u}));