define(["./when-45f3d25d","./Check-34538dad","./Cartesian3-ef6ea826","./Cartesian2-a652b463","./BoundingSphere-038d5fbc","./Transforms-c8a82813","./Matrix4-f54b529f","./RuntimeError-86da6af2","./WebGLConstants-3660bc8f","./ComponentDatatype-d28c2e26","./GeometryAttribute-dfebcc43","./PrimitiveType-30fa6f85","./EncodedCartesian3-f0b88724","./IntersectionTests-b186d985","./Plane-a0c58786","./WebMercatorProjection-cf88bfd1","./arrayRemoveDuplicates-e5b24eaf","./ArcType-39be7a32","./EllipsoidRhumbLine-0c6cd7c8","./EllipsoidGeodesic-1abfd38d"],(function(e,a,t,n,r,i,s,o,l,u,c,C,p,d,h,g,m,f,w,v){"use strict";function y(a){a=e.defaultValue(a,e.defaultValue.EMPTY_OBJECT),this._ellipsoid=e.defaultValue(a.ellipsoid,n.Ellipsoid.WGS84),this._rectangle=e.defaultValue(a.rectangle,n.Rectangle.MAX_VALUE),this._projection=new r.GeographicProjection(this._ellipsoid),this._numberOfLevelZeroTilesX=e.defaultValue(a.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=e.defaultValue(a.numberOfLevelZeroTilesY,1)}Object.defineProperties(y.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),y.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},y.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},y.prototype.rectangleToNativeRectangle=function(a,r){var i=t.CesiumMath.toDegrees(a.west),s=t.CesiumMath.toDegrees(a.south),o=t.CesiumMath.toDegrees(a.east),l=t.CesiumMath.toDegrees(a.north);return e.defined(r)?(r.west=i,r.south=s,r.east=o,r.north=l,r):new n.Rectangle(i,s,o,l)},y.prototype.tileXYToNativeRectangle=function(e,a,n,r){var i=this.tileXYToRectangle(e,a,n,r);return i.west=t.CesiumMath.toDegrees(i.west),i.south=t.CesiumMath.toDegrees(i.south),i.east=t.CesiumMath.toDegrees(i.east),i.north=t.CesiumMath.toDegrees(i.north),i},y.prototype.tileXYToRectangle=function(a,t,r,i){var s=this._rectangle,o=this.getNumberOfXTilesAtLevel(r),l=this.getNumberOfYTilesAtLevel(r),u=s.width/o,c=a*u+s.west,C=(a+1)*u+s.west,p=s.height/l,d=s.north-t*p,h=s.north-(t+1)*p;return e.defined(i)||(i=new n.Rectangle(c,h,C,d)),i.west=c,i.south=h,i.east=C,i.north=d,i},y.prototype.positionToTileXY=function(a,r,i){var s=this._rectangle;if(n.Rectangle.contains(s,a)){var o=this.getNumberOfXTilesAtLevel(r),l=this.getNumberOfYTilesAtLevel(r),u=s.width/o,c=s.height/l,C=a.longitude;s.east<s.west&&(C+=t.CesiumMath.TWO_PI);var p=(C-s.west)/u|0;p>=o&&(p=o-1);var d=(s.north-a.latitude)/c|0;return d>=l&&(d=l-1),e.defined(i)?(i.x=p,i.y=d,i):new n.Cartesian2(p,d)}};var T=new t.Cartesian3,M=new t.Cartesian3,E=new n.Cartographic,_=new t.Cartesian3,b=new t.Cartesian3,A=new r.BoundingSphere,O=new y,P=[new n.Cartographic,new n.Cartographic,new n.Cartographic,new n.Cartographic],k=new n.Cartesian2,L={};function S(e){n.Cartographic.fromRadians(e.east,e.north,0,P[0]),n.Cartographic.fromRadians(e.west,e.north,0,P[1]),n.Cartographic.fromRadians(e.east,e.south,0,P[2]),n.Cartographic.fromRadians(e.west,e.south,0,P[3]);var a,t=0,r=0,i=0,s=0,o=L._terrainHeightsMaxLevel;for(a=0;a<=o;++a){for(var l=!1,u=0;u<4;++u){var c=P[u];if(O.positionToTileXY(c,a,k),0===u)i=k.x,s=k.y;else if(i!==k.x||s!==k.y){l=!0;break}}if(l)break;t=i,r=s}if(0!==a)return{x:t,y:r,level:a>o?o:a-1}}L.initialize=function(){var a=L._initPromise;return e.defined(a)||(a=i.Resource.fetchJson(i.buildModuleUrl("Assets/approximateTerrainHeights.json")).then((function(e){L._terrainHeights=e})),L._initPromise=a),a},L.getMinimumMaximumHeights=function(a,r){r=e.defaultValue(r,n.Ellipsoid.WGS84);var i=S(a),s=L._defaultMinTerrainHeight,o=L._defaultMaxTerrainHeight;if(e.defined(i)){var l=i.level+"-"+i.x+"-"+i.y,u=L._terrainHeights[l];e.defined(u)&&(s=u[0],o=u[1]),r.cartographicToCartesian(n.Rectangle.northeast(a,E),T),r.cartographicToCartesian(n.Rectangle.southwest(a,E),M),t.Cartesian3.midpoint(M,T,_);var c=r.scaleToGeodeticSurface(_,b);if(e.defined(c)){var C=t.Cartesian3.distance(_,c);s=Math.min(s,-C)}else s=L._defaultMinTerrainHeight}return{minimumTerrainHeight:s=Math.max(L._defaultMinTerrainHeight,s),maximumTerrainHeight:o}},L.getBoundingSphere=function(a,t){t=e.defaultValue(t,n.Ellipsoid.WGS84);var i=S(a),s=L._defaultMaxTerrainHeight;if(e.defined(i)){var o=i.level+"-"+i.x+"-"+i.y,l=L._terrainHeights[o];e.defined(l)&&(s=l[1])}var u=r.BoundingSphere.fromRectangle3D(a,t,0);return r.BoundingSphere.fromRectangle3D(a,t,s,A),r.BoundingSphere.union(u,A,u)},L._terrainHeightsMaxLevel=6,L._defaultMaxTerrainHeight=9e3,L._defaultMinTerrainHeight=-1e5,L._terrainHeights=void 0,L._initPromise=void 0,Object.defineProperties(L,{initialized:{get:function(){return e.defined(L._terrainHeights)}}});var D=[r.GeographicProjection,g.WebMercatorProjection],I=D.length,R=Math.cos(t.CesiumMath.toRadians(30)),x=Math.cos(t.CesiumMath.toRadians(150));function N(a){var t=(a=e.defaultValue(a,e.defaultValue.EMPTY_OBJECT)).positions;this.width=e.defaultValue(a.width,1),this._positions=t,this.granularity=e.defaultValue(a.granularity,9999),this.loop=e.defaultValue(a.loop,!1),this.arcType=e.defaultValue(a.arcType,f.ArcType.GEODESIC),this._ellipsoid=n.Ellipsoid.WGS84,this._projectionIndex=0,this._planeMode=e.defaultValue(a.isPlaneMode,!1),this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(N.prototype,{packedLength:{get:function(){return 1+3*this._positions.length+1+1+1+n.Ellipsoid.packedLength+1+1}}}),N.setProjectionAndEllipsoid=function(e,a){for(var t=0,n=0;n<I;n++)if(a instanceof D[n]){t=n;break}e._projectionIndex=t,e._ellipsoid=a.ellipsoid};var G=new t.Cartesian3,z=new t.Cartesian3,B=new t.Cartesian3;function H(e,a,n,r,i){var s=W(r,e,0,G),o=W(r,e,n,z),l=W(r,a,0,B),u=X(o,s,z),c=X(l,s,B);return t.Cartesian3.cross(c,u,i),t.Cartesian3.normalize(i,i)}var V=new n.Cartographic,j=new t.Cartesian3,F=new t.Cartesian3,Y=new t.Cartesian3;function U(e,a,n,r,i,s,o,l,u,c,C){if(0!==i){var p;s===f.ArcType.GEODESIC?p=new v.EllipsoidGeodesic(e,a,o):s===f.ArcType.RHUMB&&(p=new w.EllipsoidRhumbLine(e,a,o));var d=p.surfaceDistance;if(!(d<i))for(var h=H(e,a,r,o,Y),g=Math.ceil(d/i),m=d/g,y=m,T=g-1,M=l.length,E=0;E<T;E++){var _=p.interpolateUsingSurfaceDistance(y,V),b=W(o,_,n,j),A=W(o,_,r,F);t.Cartesian3.pack(h,l,M),t.Cartesian3.pack(b,u,M),t.Cartesian3.pack(A,c,M),C.push(_.latitude),C.push(_.longitude),M+=3,y+=m}}}var q=new n.Cartographic;function W(e,a,t,r){return n.Cartographic.clone(a,q),q.height=t,n.Cartographic.toCartesian(q,e,r)}function X(e,a,n){return t.Cartesian3.subtract(e,a,n),t.Cartesian3.normalize(n,n),n}function Z(e,a,n,r){return r=X(e,a,r),r=t.Cartesian3.cross(r,n,r),r=t.Cartesian3.normalize(r,r),t.Cartesian3.cross(n,r,r)}N.pack=function(a,r,i){var s=e.defaultValue(i,0),o=a._positions,l=o.length;r[s++]=l;for(var u=0;u<l;++u){var c=o[u];t.Cartesian3.pack(c,r,s),s+=3}return r[s++]=a.granularity,r[s++]=a.loop?1:0,r[s++]=a.arcType,n.Ellipsoid.pack(a._ellipsoid,r,s),a._isPlaneMode?(r[s++]=0,r[s++]=0,r[s++]=0):s+=n.Ellipsoid.packedLength,r[s++]=a._projectionIndex,r[s++]=a._scene3DOnly?1:0,r},N.unpack=function(a,r,i){for(var s=e.defaultValue(r,0),o=a[s++],l=new Array(o),u=0;u<o;u++)l[u]=t.Cartesian3.unpack(a,s),s+=3;var c=a[s++],C=1===a[s++],p=a[s++],d=n.Ellipsoid.unpack(a,s);s+=n.Ellipsoid.packedLength;var h=a[s++],g=1===a[s++];return e.defined(i)||(i=new N({positions:l})),t.Cartesian3.equals(d._radii,t.Cartesian3.ZERO)&&(i._planeMode=!0),i._positions=l,i.granularity=c,i.loop=C,i.arcType=p,i._ellipsoid=d,i._projectionIndex=h,i._scene3DOnly=g,i};var J=new t.Cartesian3,Q=new t.Cartesian3,K=new t.Cartesian3,$=new t.Cartesian3;function ee(e,a,n,r,i){var s=X(n,a,$),o=Z(e,a,s,J),l=Z(r,a,s,Q);if(t.CesiumMath.equalsEpsilon(t.Cartesian3.dot(o,l),-1,t.CesiumMath.EPSILON5))return i=t.Cartesian3.cross(s,o,i),t.Cartesian3.normalize(i,i);i=t.Cartesian3.add(l,o,i),i=t.Cartesian3.normalize(i,i);var u=t.Cartesian3.cross(s,i,K);return t.Cartesian3.dot(l,u)<0&&(i=t.Cartesian3.negate(i,i)),i}var ae=h.Plane.fromPointNormal(t.Cartesian3.ZERO,t.Cartesian3.UNIT_Y),te=new t.Cartesian3,ne=new t.Cartesian3,re=new t.Cartesian3,ie=new t.Cartesian3,se=new t.Cartesian3,oe=new t.Cartesian3,le=new n.Cartographic,ue=new n.Cartographic,ce=new n.Cartographic;N.createGeometry=function(a){if(a._isPlaneMode)return N.createPlaneModeGeometry(a);var i,s,o,l,C,h,g=!a._scene3DOnly,v=a.loop,y=a._ellipsoid,T=a.granularity,M=a.arcType,E=new D[a._projectionIndex](y),_=a._positions,b=_.length;2===b&&(v=!1);var A,O,P,k=new w.EllipsoidRhumbLine(void 0,void 0,y),S=[_[0]];for(s=0;s<b-1;s++)o=_[s],l=_[s+1],A=d.IntersectionTests.lineSegmentPlane(o,l,ae,oe),!e.defined(A)||t.Cartesian3.equalsEpsilon(A,o,t.CesiumMath.EPSILON7)||t.Cartesian3.equalsEpsilon(A,l,t.CesiumMath.EPSILON7)||(a.arcType===f.ArcType.GEODESIC?S.push(t.Cartesian3.clone(A)):a.arcType===f.ArcType.RHUMB&&(P=y.cartesianToCartographic(A,le).longitude,C=y.cartesianToCartographic(o,le),h=y.cartesianToCartographic(l,ue),k.setEndPoints(C,h),O=k.findIntersectionWithLongitude(P,ce),A=y.cartographicToCartesian(O,oe),!e.defined(A)||t.Cartesian3.equalsEpsilon(A,o,t.CesiumMath.EPSILON7)||t.Cartesian3.equalsEpsilon(A,l,t.CesiumMath.EPSILON7)||S.push(t.Cartesian3.clone(A)))),S.push(l);v&&(o=_[b-1],l=_[0],A=d.IntersectionTests.lineSegmentPlane(o,l,ae,oe),!e.defined(A)||t.Cartesian3.equalsEpsilon(A,o,t.CesiumMath.EPSILON7)||t.Cartesian3.equalsEpsilon(A,l,t.CesiumMath.EPSILON7)||(a.arcType===f.ArcType.GEODESIC?S.push(t.Cartesian3.clone(A)):a.arcType===f.ArcType.RHUMB&&(P=y.cartesianToCartographic(A,le).longitude,C=y.cartesianToCartographic(o,le),h=y.cartesianToCartographic(l,ue),k.setEndPoints(C,h),O=k.findIntersectionWithLongitude(P,ce),A=y.cartographicToCartesian(O,oe),!e.defined(A)||t.Cartesian3.equalsEpsilon(A,o,t.CesiumMath.EPSILON7)||t.Cartesian3.equalsEpsilon(A,l,t.CesiumMath.EPSILON7)||S.push(t.Cartesian3.clone(A)))));var I=S.length,x=new Array(I);for(s=0;s<I;s++){var G=n.Cartographic.fromCartesian(S[s],y);G.height=0,x[s]=G}if(!((I=(x=m.arrayRemoveDuplicates(x,n.Cartographic.equalsEpsilon)).length)<2)){var z=[],B=[],V=[],j=[],F=te,Y=ne,q=re,Z=ie,J=se,Q=x[0],K=x[1];for(F=W(y,x[I-1],0,F),Z=W(y,K,0,Z),Y=W(y,Q,0,Y),q=W(y,Q,1e3,q),J=v?ee(F,Y,q,Z,J):H(Q,K,1e3,y,J),t.Cartesian3.pack(J,B,0),t.Cartesian3.pack(Y,V,0),t.Cartesian3.pack(q,j,0),z.push(Q.latitude),z.push(Q.longitude),U(Q,K,0,1e3,T,M,y,B,V,j,z),s=1;s<I-1;++s){F=t.Cartesian3.clone(Y,F),Y=t.Cartesian3.clone(Z,Y);var $=x[s];W(y,$,1e3,q),W(y,x[s+1],0,Z),ee(F,Y,q,Z,J),i=B.length,t.Cartesian3.pack(J,B,i),t.Cartesian3.pack(Y,V,i),t.Cartesian3.pack(q,j,i),z.push($.latitude),z.push($.longitude),U(x[s],x[s+1],0,1e3,T,M,y,B,V,j,z)}var Ce=x[I-1],de=x[I-2];if(Y=W(y,Ce,0,Y),q=W(y,Ce,1e3,q),v){var he=x[0];J=ee(F=W(y,de,0,F),Y,q,Z=W(y,he,0,Z),J)}else J=H(de,Ce,1e3,y,J);if(i=B.length,t.Cartesian3.pack(J,B,i),t.Cartesian3.pack(Y,V,i),t.Cartesian3.pack(q,j,i),z.push(Ce.latitude),z.push(Ce.longitude),v){for(U(Ce,Q,0,1e3,T,M,y,B,V,j,z),i=B.length,s=0;s<3;++s)B[i+s]=B[s],V[i+s]=V[s],j[i+s]=j[s];z.push(Q.latitude),z.push(Q.longitude)}return function(e,a,i,s,o,l,C){var d,h,g,m,f,w,v=a._ellipsoid,y=i.length/3-1,T=8*y,M=4*T,E=36*y,_=T>65535?new Uint32Array(E):new Uint16Array(E),b=new Float64Array(3*T),A=new Float32Array(M),O=new Float32Array(M),P=new Float32Array(M),k=new Float32Array(M),S=new Float32Array(M);C&&(g=new Float32Array(M),m=new Float32Array(M),f=new Float32Array(M),w=new Float32Array(2*T));var D=l.length/2,I=0,x=ke;x.height=0;var N=Le;N.height=0;var G=Se,z=De;if(C)for(h=0,d=1;d<D;d++)x.latitude=l[h],x.longitude=l[h+1],N.latitude=l[h+2],N.longitude=l[h+3],G=a.project(x,G),z=a.project(N,z),I+=t.Cartesian3.distance(G,z),h+=2;var B=s.length/3;z=t.Cartesian3.unpack(s,0,z);var H,V=0;for(h=3,d=1;d<B;d++)G=t.Cartesian3.clone(z,G),z=t.Cartesian3.unpack(s,h,z),V+=t.Cartesian3.distance(G,z),h+=3;h=3;var j=0,F=0,Y=0,U=0,q=!1,W=t.Cartesian3.unpack(i,0,Re),Z=t.Cartesian3.unpack(s,0,De),J=t.Cartesian3.unpack(o,0,Ne);if(e){var Q=t.Cartesian3.unpack(i,i.length-6,Ie);we(J,Q,W,Z)&&(J=t.Cartesian3.negate(J,J))}var K=0,$=0,ee=0;for(d=0;d<y;d++){var ae,te,ne,re,ie=t.Cartesian3.clone(W,Ie),se=t.Cartesian3.clone(Z,Se),oe=t.Cartesian3.clone(J,xe);if(q&&(oe=t.Cartesian3.negate(oe,oe)),W=t.Cartesian3.unpack(i,h,Re),Z=t.Cartesian3.unpack(s,h,De),J=t.Cartesian3.unpack(o,h,Ne),q=we(J,ie,W,Z),x.latitude=l[j],x.longitude=l[j+1],N.latitude=l[j+2],N.longitude=l[j+3],C){var le=Pe(x,N);ae=a.project(x,Fe);var ue=X(te=a.project(N,Ye),ae,ea);ue.y=Math.abs(ue.y),ne=Ue,re=qe,0===le||t.Cartesian3.dot(ue,t.Cartesian3.UNIT_Y)>R?(ne=Me(a,x,oe,ae,Ue),re=Me(a,N,J,te,qe)):1===le?(re=Me(a,N,J,te,qe),ne.x=0,ne.y=t.CesiumMath.sign(x.longitude-Math.abs(N.longitude)),ne.z=0):(ne=Me(a,x,oe,ae,Ue),re.x=0,re.y=t.CesiumMath.sign(x.longitude-N.longitude),re.z=0)}var ce=t.Cartesian3.distance(se,Z),Ce=p.EncodedCartesian3.fromCartesian(ie,Ke),de=t.Cartesian3.subtract(W,ie,We),he=t.Cartesian3.normalize(de,pe),ge=t.Cartesian3.subtract(se,ie,Xe);ge=t.Cartesian3.normalize(ge,ge);var me=t.Cartesian3.cross(he,ge,pe);me=t.Cartesian3.normalize(me,me);var fe=t.Cartesian3.cross(ge,oe,Je);fe=t.Cartesian3.normalize(fe,fe);var ve=t.Cartesian3.subtract(Z,W,Ze);ve=t.Cartesian3.normalize(ve,ve);var ye=t.Cartesian3.cross(J,ve,Qe);ye=t.Cartesian3.normalize(ye,ye);var Te,Ee,_e,Ae=ce/V,oa=K/V,la=0,ua=0,ca=0;if(C){la=t.Cartesian3.distance(ae,te),Te=p.EncodedCartesian3.fromCartesian(ae,$e),Ee=t.Cartesian3.subtract(te,ae,ea);var Ca=(_e=t.Cartesian3.normalize(Ee,aa)).x;_e.x=_e.y,_e.y=-Ca,ua=la/I,ca=$/I}for(H=0;H<8;H++){var pa=U+4*H,da=F+2*H,ha=pa+3,ga=H<4?1:-1,ma=2===H||3===H||6===H||7===H?1:-1;t.Cartesian3.pack(Ce.high,A,pa),A[ha]=de.x,t.Cartesian3.pack(Ce.low,O,pa),O[ha]=de.y,t.Cartesian3.pack(fe,P,pa),P[ha]=de.z,t.Cartesian3.pack(ye,k,pa),k[ha]=Ae*ga,t.Cartesian3.pack(me,S,pa);var fa=oa*ma;0===fa&&ma<0&&(fa=9),S[ha]=fa,C&&(g[pa]=Te.high.x,g[pa+1]=Te.high.y,g[pa+2]=Te.low.x,g[pa+3]=Te.low.y,f[pa]=-ne.y,f[pa+1]=ne.x,f[pa+2]=re.y,f[pa+3]=-re.x,m[pa]=Ee.x,m[pa+1]=Ee.y,m[pa+2]=_e.x,m[pa+3]=_e.y,w[da]=ua*ga,0===(fa=ca*ma)&&ma<0&&(fa=9),w[da+1]=fa)}var wa=Ve,va=je,ya=Be,Ta=He,Ma=n.Rectangle.fromCartographicArray(Ge,ze),Ea=L.getMinimumMaximumHeights(Ma,v),_a=Ea.minimumTerrainHeight,ba=Ea.maximumTerrainHeight;ee+=_a,ee+=ba,be(ie,se,_a,ba,wa,ya),be(W,Z,_a,ba,va,Ta);var Aa=t.Cartesian3.multiplyByScalar(me,t.CesiumMath.EPSILON5,ta);t.Cartesian3.add(wa,Aa,wa),t.Cartesian3.add(va,Aa,va),t.Cartesian3.add(ya,Aa,ya),t.Cartesian3.add(Ta,Aa,Ta),Oe(wa,va),Oe(ya,Ta),t.Cartesian3.pack(wa,b,Y),t.Cartesian3.pack(va,b,Y+3),t.Cartesian3.pack(Ta,b,Y+6),t.Cartesian3.pack(ya,b,Y+9),Aa=t.Cartesian3.multiplyByScalar(me,-2*t.CesiumMath.EPSILON5,ta),t.Cartesian3.add(wa,Aa,wa),t.Cartesian3.add(va,Aa,va),t.Cartesian3.add(ya,Aa,ya),t.Cartesian3.add(Ta,Aa,Ta),Oe(wa,va),Oe(ya,Ta),t.Cartesian3.pack(wa,b,Y+12),t.Cartesian3.pack(va,b,Y+15),t.Cartesian3.pack(Ta,b,Y+18),t.Cartesian3.pack(ya,b,Y+21),j+=2,h+=3,F+=16,Y+=24,U+=32,K+=ce,$+=la}h=0;var Oa=0;for(d=0;d<y;d++){for(H=0;H<ia;H++)_[h+H]=ra[H]+Oa;Oa+=8,h+=ia}var Pa=na;r.BoundingSphere.fromVertices(i,t.Cartesian3.ZERO,3,Pa[0]),r.BoundingSphere.fromVertices(s,t.Cartesian3.ZERO,3,Pa[1]);var ka=r.BoundingSphere.fromBoundingSpheres(Pa);ka.radius+=ee/(2*y);var La={position:new c.GeometryAttribute({componentDatatype:u.ComponentDatatype.DOUBLE,componentsPerAttribute:3,normalize:!1,values:b}),startHiAndForwardOffsetX:sa(A),startLoAndForwardOffsetY:sa(O),startNormalAndForwardOffsetZ:sa(P),endNormalAndTextureCoordinateNormalizationX:sa(k),rightNormalAndTextureCoordinateNormalizationY:sa(S)};return C&&(La.startHiLo2D=sa(g),La.offsetAndRight2D=sa(m),La.startEndNormals2D=sa(f),La.texcoordNormalization2D=new c.GeometryAttribute({componentDatatype:u.ComponentDatatype.FLOAT,componentsPerAttribute:2,normalize:!1,values:w})),new c.Geometry({attributes:La,indices:_,boundingSphere:ka})}(v,E,V,j,B,z,g)}};let Ce=[2,3,6,7],pe=new t.Cartesian3,de=new t.Cartesian3,he=new t.Cartesian3;N.createPlaneModeGeometry=function(e){let a=e._positions,n=e.width,r=a[0],i=a[1],s=t.Cartesian3.UNIT_Z,o=t.Cartesian3.subtract(i,r,K),l=t.Cartesian3.cross(o,s,pe);t.Cartesian3.normalize(l,l);let p=t.Cartesian3.add(r,t.Cartesian3.ZERO,de),d=t.Cartesian3.add(i,t.Cartesian3.ZERO,he),h=new Float32Array(24),g=new Float32Array(24),m=new Float32Array(24),f=new Float32Array(32),w=new Float32Array(16);t.Cartesian3.pack(r,h,0),t.Cartesian3.pack(i,h,3),t.Cartesian3.pack(d,h,6),t.Cartesian3.pack(p,h,9),t.Cartesian3.pack(r,h,12),t.Cartesian3.pack(i,h,15),t.Cartesian3.pack(d,h,18),t.Cartesian3.pack(p,h,21);for(let u=0;u<8;u++)t.Cartesian3.pack(r,g,3*u),t.Cartesian3.pack(i,m,3*u),t.Cartesian3.pack(l,f,4*u),f[4*u+3]=n,w[2*u]=Ce.includes(u)?1:-1,w[2*u+1]=u<4?1:-1;return new c.Geometry({attributes:{position:new c.GeometryAttribute({componentDatatype:u.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:h}),startPosition:new c.GeometryAttribute({componentDatatype:u.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:g}),endPosition:new c.GeometryAttribute({componentDatatype:u.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:m}),rightDirectionAndWidth:new c.GeometryAttribute({componentDatatype:u.ComponentDatatype.FLOAT,componentsPerAttribute:4,values:f}),isTopRight:new c.GeometryAttribute({componentDatatype:u.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:w})},indices:new Uint16Array([0,1,2,0,2,3,4,7,6,4,6,5,4,0,3,4,3,7,5,6,2,5,2,1,7,3,2,7,2,6,4,5,1,4,1,0]),primitiveType:C.PrimitiveType.TRIANGLES})};var ge=new t.Cartesian3,me=new s.Matrix3,fe=new i.Quaternion;function we(e,a,n,r){var o=X(n,a,ge),l=t.Cartesian3.dot(o,e);if(l>R||l<x){var u=X(r,n,$),c=l<x?t.CesiumMath.PI_OVER_TWO:-t.CesiumMath.PI_OVER_TWO,C=i.Quaternion.fromAxisAngle(u,c,fe),p=s.Matrix3.fromQuaternion(C,me);return s.Matrix3.multiplyByVector(p,e,e),!0}return!1}var ve=new n.Cartographic,ye=new t.Cartesian3,Te=new t.Cartesian3;function Me(e,a,r,i,s){var o=n.Cartographic.toCartesian(a,e._ellipsoid,ye),l=t.Cartesian3.add(o,r,Te),u=!1,c=e._ellipsoid,C=c.cartesianToCartographic(l,ve);Math.abs(a.longitude-C.longitude)>t.CesiumMath.PI_OVER_TWO&&(u=!0,l=t.Cartesian3.subtract(o,r,Te),C=c.cartesianToCartographic(l,ve)),C.height=0;var p=e.project(C,s);return(s=t.Cartesian3.subtract(p,i,s)).z=0,s=t.Cartesian3.normalize(s,s),u&&t.Cartesian3.negate(s,s),s}var Ee=new t.Cartesian3,_e=new t.Cartesian3;function be(e,a,n,r,i,s){var o=t.Cartesian3.subtract(a,e,Ee);t.Cartesian3.normalize(o,o);var l=n-0,u=t.Cartesian3.multiplyByScalar(o,l,_e);t.Cartesian3.add(e,u,i);var c=r-1e3;u=t.Cartesian3.multiplyByScalar(o,c,_e),t.Cartesian3.add(a,u,s)}var Ae=new t.Cartesian3;function Oe(e,a){var n=h.Plane.getPointDistance(ae,e),r=h.Plane.getPointDistance(ae,a),i=Ae;t.CesiumMath.equalsEpsilon(n,0,t.CesiumMath.EPSILON2)?(i=X(a,e,i),t.Cartesian3.multiplyByScalar(i,t.CesiumMath.EPSILON2,i),t.Cartesian3.add(e,i,e)):t.CesiumMath.equalsEpsilon(r,0,t.CesiumMath.EPSILON2)&&(i=X(e,a,i),t.Cartesian3.multiplyByScalar(i,t.CesiumMath.EPSILON2,i),t.Cartesian3.add(a,i,a))}function Pe(e,a){var n=Math.abs(e.longitude),r=Math.abs(a.longitude);if(t.CesiumMath.equalsEpsilon(n,t.CesiumMath.PI,t.CesiumMath.EPSILON11)){var i=t.CesiumMath.sign(a.longitude);return e.longitude=i*(n-t.CesiumMath.EPSILON11),1}if(t.CesiumMath.equalsEpsilon(r,t.CesiumMath.PI,t.CesiumMath.EPSILON11)){var s=t.CesiumMath.sign(e.longitude);return a.longitude=s*(r-t.CesiumMath.EPSILON11),2}return 0}var ke=new n.Cartographic,Le=new n.Cartographic,Se=new t.Cartesian3,De=new t.Cartesian3,Ie=new t.Cartesian3,Re=new t.Cartesian3,xe=new t.Cartesian3,Ne=new t.Cartesian3,Ge=[ke,Le],ze=new n.Rectangle,Be=new t.Cartesian3,He=new t.Cartesian3,Ve=new t.Cartesian3,je=new t.Cartesian3,Fe=new t.Cartesian3,Ye=new t.Cartesian3,Ue=new t.Cartesian3,qe=new t.Cartesian3,We=new t.Cartesian3,Xe=new t.Cartesian3,Ze=new t.Cartesian3,Je=new t.Cartesian3,Qe=new t.Cartesian3,Ke=new p.EncodedCartesian3,$e=new p.EncodedCartesian3,ea=new t.Cartesian3,aa=new t.Cartesian3,ta=new t.Cartesian3,na=[new r.BoundingSphere,new r.BoundingSphere],ra=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],ia=ra.length;function sa(e){return new c.GeometryAttribute({componentDatatype:u.ComponentDatatype.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}return N._projectNormal=Me,function(a,t){return L.initialize().then((function(){return e.defined(t)&&(a=N.unpack(a,t)),N.createGeometry(a)}))}}));