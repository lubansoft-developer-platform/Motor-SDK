define(["exports","./when-45f3d25d","./Check-34538dad","./Cartesian3-eab74dc0","./Cartesian2-174fefc1","./Matrix4-22b96d31","./RuntimeError-86da6af2"],(function(e,t,r,n,i,a,o){"use strict";var s,u,l,f,d,c,h,p,m,y,v,w,C,g,E,O,_,x,b={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},D=Object.freeze(b),q={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},A={};function S(e){for(var t=e.split("."),r=0,n=t.length;r<n;++r)t[r]=parseInt(t[r],10);return t}function R(){if(!t.defined(l)&&(l=!1,!k())){var e=/ Chrome\/([\.0-9]+)/.exec(u.userAgent);null!==e&&(l=!0,f=S(e[1]))}return l}function T(){return R()&&f}function M(){if(!t.defined(d)&&(d=!1,!R()&&!k()&&/ Safari\/[\.0-9]+/.test(u.userAgent))){var e=/ Version\/([\.0-9]+)/.exec(u.userAgent);null!==e&&(d=!0,c=S(e[1]))}return d}function I(){return M()&&c}function P(){if(!t.defined(h)){h=!1;var e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(u.userAgent);null!==e&&(h=!0,p=S(e[1]),p.isNightly=!!e[2])}return h}function U(){return P()&&p}function N(){var e;t.defined(m)||(m=!1,"Microsoft Internet Explorer"===u.appName?(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(u.userAgent),null!==e&&(m=!0,y=S(e[1]))):"Netscape"===u.appName&&(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(u.userAgent),null!==e&&(m=!0,y=S(e[1]))));return m}function F(){return N()&&y}function k(){if(!t.defined(v)){v=!1;var e=/ Edge\/([\.0-9]+)/.exec(u.userAgent);null!==e&&(v=!0,w=S(e[1]))}return v}function j(){return k()&&w}function z(){if(!t.defined(C)){C=!1;var e=/Firefox\/([\.0-9]+)/.exec(u.userAgent);null!==e&&(C=!0,g=S(e[1]))}return C}function L(){return t.defined(E)||(E=/Windows/i.test(u.appVersion)),E}function V(){return z()&&g}function B(){return t.defined(O)||(O=!z()&&"undefined"!==typeof PointerEvent&&(!t.defined(u.pointerEnabled)||u.pointerEnabled)),O}function W(){if(!t.defined(x)){var e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");var r=e.style.imageRendering;x=t.defined(r)&&""!==r,x&&(_=r)}return x}function Y(){return W()?_:void 0}function J(){if(!J.initialized)throw new r.DeveloperError("You must call FeatureDetection.supportsWebP.initialize and wait for the promise to resolve before calling FeatureDetection.supportsWebP");return J._result}Object.defineProperties(A,{element:{get:function(){if(A.supportsFullscreen())return document[q.fullscreenElement]}},changeEventName:{get:function(){if(A.supportsFullscreen())return q.fullscreenchange}},errorEventName:{get:function(){if(A.supportsFullscreen())return q.fullscreenerror}},enabled:{get:function(){if(A.supportsFullscreen())return document[q.fullscreenEnabled]}},fullscreen:{get:function(){if(A.supportsFullscreen())return null!==A.element}}}),A.supportsFullscreen=function(){if(t.defined(s))return s;s=!1;var e=document.body;if("function"===typeof e.requestFullscreen)return q.requestFullscreen="requestFullscreen",q.exitFullscreen="exitFullscreen",q.fullscreenEnabled="fullscreenEnabled",q.fullscreenElement="fullscreenElement",q.fullscreenchange="fullscreenchange",q.fullscreenerror="fullscreenerror",s=!0,s;for(var r,n=["webkit","moz","o","ms","khtml"],i=0,a=n.length;i<a;++i){var o=n[i];r=o+"RequestFullscreen","function"===typeof e[r]?(q.requestFullscreen=r,s=!0):(r=o+"RequestFullScreen","function"===typeof e[r]&&(q.requestFullscreen=r,s=!0)),r=o+"ExitFullscreen","function"===typeof document[r]?q.exitFullscreen=r:(r=o+"CancelFullScreen","function"===typeof document[r]&&(q.exitFullscreen=r)),r=o+"FullscreenEnabled",void 0!==document[r]?q.fullscreenEnabled=r:(r=o+"FullScreenEnabled",void 0!==document[r]&&(q.fullscreenEnabled=r)),r=o+"FullscreenElement",void 0!==document[r]?q.fullscreenElement=r:(r=o+"FullScreenElement",void 0!==document[r]&&(q.fullscreenElement=r)),r=o+"fullscreenchange",void 0!==document["on"+r]&&("ms"===o&&(r="MSFullscreenChange"),q.fullscreenchange=r),r=o+"fullscreenerror",void 0!==document["on"+r]&&("ms"===o&&(r="MSFullscreenError"),q.fullscreenerror=r)}return s},A.requestFullscreen=function(e,t){A.supportsFullscreen()&&e[q.requestFullscreen]({vrDisplay:t})},A.exitFullscreen=function(){A.supportsFullscreen()&&document[q.exitFullscreen]()},A._names=q,u="undefined"!==typeof navigator?navigator:{},J._promise=void 0,J._result=void 0,J.initialize=function(){if(t.defined(J._promise))return J._promise;var e=t.when.defer();if(J._promise=e.promise,k())return J._result=!1,e.resolve(J._result),e.promise;var r=new Image;return r.onload=function(){J._result=r.width>0&&r.height>0,e.resolve(J._result)},r.onerror=function(){J._result=!1,e.resolve(J._result)},r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},Object.defineProperties(J,{initialized:{get:function(){return t.defined(J._result)}}});var H=[];"undefined"!==typeof ArrayBuffer&&(H.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!==typeof Uint8ClampedArray&&H.push(Uint8ClampedArray),"undefined"!==typeof Uint8ClampedArray&&H.push(Uint8ClampedArray));var X={isChrome:R,chromeVersion:T,isSafari:M,safariVersion:I,isWebkit:P,webkitVersion:U,isInternetExplorer:N,internetExplorerVersion:F,isEdge:k,edgeVersion:j,isFirefox:z,firefoxVersion:V,isWindows:L,hardwareConcurrency:t.defaultValue(u.hardwareConcurrency,3),supportsPointerEvents:B,supportsImageRenderingPixelated:W,supportsWebP:J,imageRenderingValue:Y,typedArrayTypes:H};function G(e,r,n,i){this.x=t.defaultValue(e,0),this.y=t.defaultValue(r,0),this.z=t.defaultValue(n,0),this.w=t.defaultValue(i,0)}X.supportsFullscreen=function(){return A.supportsFullscreen()},X.supportsTypedArrays=function(){return"undefined"!==typeof ArrayBuffer},X.supportsWebWorkers=function(){return"undefined"!==typeof Worker},X.supportsWebAssembly=function(){return"undefined"!==typeof WebAssembly&&!X.isEdge()},X.isInternetExplorer=function(){return N()},X.isEdge=function(){return k()};var Z=new n.Cartesian3;G.fromAxisAngle=function(e,i,a){r.Check.typeOf.object("axis",e),r.Check.typeOf.number("angle",i);var o=i/2,s=Math.sin(o);Z=n.Cartesian3.normalize(e,Z);var u=Z.x*s,l=Z.y*s,f=Z.z*s,d=Math.cos(o);return t.defined(a)?(a.x=u,a.y=l,a.z=f,a.w=d,a):new G(u,l,f,d)};var Q=[1,2,0],K=new Array(3);G.fromRotationMatrix=function(e,n){var i,o,s,u,l;r.Check.typeOf.object("matrix",e);var f=e[a.Matrix3.COLUMN0ROW0],d=e[a.Matrix3.COLUMN1ROW1],c=e[a.Matrix3.COLUMN2ROW2],h=f+d+c;if(h>0)i=Math.sqrt(h+1),l=.5*i,i=.5/i,o=(e[a.Matrix3.COLUMN1ROW2]-e[a.Matrix3.COLUMN2ROW1])*i,s=(e[a.Matrix3.COLUMN2ROW0]-e[a.Matrix3.COLUMN0ROW2])*i,u=(e[a.Matrix3.COLUMN0ROW1]-e[a.Matrix3.COLUMN1ROW0])*i;else{var p=Q,m=0;d>f&&(m=1),c>f&&c>d&&(m=2);var y=p[m],v=p[y];i=Math.sqrt(e[a.Matrix3.getElementIndex(m,m)]-e[a.Matrix3.getElementIndex(y,y)]-e[a.Matrix3.getElementIndex(v,v)]+1);var w=K;w[m]=.5*i,i=.5/i,l=(e[a.Matrix3.getElementIndex(v,y)]-e[a.Matrix3.getElementIndex(y,v)])*i,w[y]=(e[a.Matrix3.getElementIndex(y,m)]+e[a.Matrix3.getElementIndex(m,y)])*i,w[v]=(e[a.Matrix3.getElementIndex(v,m)]+e[a.Matrix3.getElementIndex(m,v)])*i,o=-w[0],s=-w[1],u=-w[2]}return t.defined(n)?(n.x=o,n.y=s,n.z=u,n.w=l,n):new G(o,s,u,l)};var $=new G,ee=new G,te=new G,re=new G;G.fromHeadingPitchRoll=function(e,t){return r.Check.typeOf.object("headingPitchRoll",e),re=G.fromAxisAngle(n.Cartesian3.UNIT_X,e.roll,$),te=G.fromAxisAngle(n.Cartesian3.UNIT_Y,-e.pitch,t),t=G.multiply(te,re,te),ee=G.fromAxisAngle(n.Cartesian3.UNIT_Z,-e.heading,$),G.multiply(ee,t,t)};var ne=new n.Cartesian3,ie=new n.Cartesian3,ae=new G,oe=new G,se=new G;G.packedLength=4,G.pack=function(e,n,i){return r.Check.typeOf.object("value",e),r.Check.defined("array",n),i=t.defaultValue(i,0),n[i++]=e.x,n[i++]=e.y,n[i++]=e.z,n[i]=e.w,n},G.unpack=function(e,n,i){return r.Check.defined("array",e),n=t.defaultValue(n,0),t.defined(i)||(i=new G),i.x=e[n],i.y=e[n+1],i.z=e[n+2],i.w=e[n+3],i},G.packedInterpolationLength=3,G.convertPackedArrayForInterpolation=function(e,r,n,i){G.unpack(e,4*n,se),G.conjugate(se,se);for(var a=0,o=n-r+1;a<o;a++){var s=3*a;G.unpack(e,4*(r+a),ae),G.multiply(ae,se,ae),ae.w<0&&G.negate(ae,ae),G.computeAxis(ae,ne);var u=G.computeAngle(ae);t.defined(i)||(i=[]),i[s]=ne.x*u,i[s+1]=ne.y*u,i[s+2]=ne.z*u}},G.unpackInterpolationResult=function(e,r,i,a,o){t.defined(o)||(o=new G),n.Cartesian3.fromArray(e,0,ie);var s=n.Cartesian3.magnitude(ie);return G.unpack(r,4*a,oe),0===s?G.clone(G.IDENTITY,ae):G.fromAxisAngle(ie,s,ae),G.multiply(ae,oe,o)},G.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.x=e.x,r.y=e.y,r.z=e.z,r.w=e.w,r):new G(e.x,e.y,e.z,e.w)},G.conjugate=function(e,t){return r.Check.typeOf.object("quaternion",e),r.Check.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},G.magnitudeSquared=function(e){return r.Check.typeOf.object("quaternion",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},G.magnitude=function(e){return Math.sqrt(G.magnitudeSquared(e))},G.normalize=function(e,t){r.Check.typeOf.object("result",t);var n=1/G.magnitude(e),i=e.x*n,a=e.y*n,o=e.z*n,s=e.w*n;return t.x=i,t.y=a,t.z=o,t.w=s,t},G.inverse=function(e,t){r.Check.typeOf.object("result",t);var n=G.magnitudeSquared(e);return t=G.conjugate(e,t),G.multiplyByScalar(t,1/n,t)},G.add=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n},G.subtract=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n},G.negate=function(e,t){return r.Check.typeOf.object("quaternion",e),r.Check.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},G.dot=function(e,t){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},G.multiply=function(e,t,n){r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n);var i=e.x,a=e.y,o=e.z,s=e.w,u=t.x,l=t.y,f=t.z,d=t.w,c=s*u+i*d+a*f-o*l,h=s*l-i*f+a*d+o*u,p=s*f+i*l-a*u+o*d,m=s*d-i*u-a*l-o*f;return n.x=c,n.y=h,n.z=p,n.w=m,n},G.multiplyByScalar=function(e,t,n){return r.Check.typeOf.object("quaternion",e),r.Check.typeOf.number("scalar",t),r.Check.typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n},G.divideByScalar=function(e,t,n){return r.Check.typeOf.object("quaternion",e),r.Check.typeOf.number("scalar",t),r.Check.typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n},G.computeAxis=function(e,t){r.Check.typeOf.object("quaternion",e),r.Check.typeOf.object("result",t);var i=e.w;if(Math.abs(i-1)<n.CesiumMath.EPSILON6)return t.x=t.y=t.z=0,t;var a=1/Math.sqrt(1-i*i);return t.x=e.x*a,t.y=e.y*a,t.z=e.z*a,t},G.computeAngle=function(e){return r.Check.typeOf.object("quaternion",e),Math.abs(e.w-1)<n.CesiumMath.EPSILON6?0:2*Math.acos(e.w)};var ue=new G;G.lerp=function(e,t,n,i){return r.Check.typeOf.object("start",e),r.Check.typeOf.object("end",t),r.Check.typeOf.number("t",n),r.Check.typeOf.object("result",i),ue=G.multiplyByScalar(t,n,ue),i=G.multiplyByScalar(e,1-n,i),G.add(ue,i,i)};var le=new G,fe=new G,de=new G;G.slerp=function(e,t,i,a){r.Check.typeOf.object("start",e),r.Check.typeOf.object("end",t),r.Check.typeOf.number("t",i),r.Check.typeOf.object("result",a);var o=G.dot(e,t),s=t;if(o<0&&(o=-o,s=le=G.negate(t,le)),1-o<n.CesiumMath.EPSILON6)return G.lerp(e,s,i,a);var u=Math.acos(o);return fe=G.multiplyByScalar(e,Math.sin((1-i)*u),fe),de=G.multiplyByScalar(s,Math.sin(i*u),de),a=G.add(fe,de,a),G.multiplyByScalar(a,1/Math.sin(u),a)},G.log=function(e,t){r.Check.typeOf.object("quaternion",e),r.Check.typeOf.object("result",t);var i=n.CesiumMath.acosClamped(e.w),a=0;return 0!==i&&(a=i/Math.sin(i)),n.Cartesian3.multiplyByScalar(e,a,t)},G.exp=function(e,t){r.Check.typeOf.object("cartesian",e),r.Check.typeOf.object("result",t);var i=n.Cartesian3.magnitude(e),a=0;return 0!==i&&(a=Math.sin(i)/i),t.x=e.x*a,t.y=e.y*a,t.z=e.z*a,t.w=Math.cos(i),t};var ce=new n.Cartesian3,he=new n.Cartesian3,pe=new G,me=new G;G.computeInnerQuadrangle=function(e,t,i,a){r.Check.typeOf.object("q0",e),r.Check.typeOf.object("q1",t),r.Check.typeOf.object("q2",i),r.Check.typeOf.object("result",a);var o=G.conjugate(t,pe);G.multiply(o,i,me);var s=G.log(me,ce);G.multiply(o,e,me);var u=G.log(me,he);return n.Cartesian3.add(s,u,s),n.Cartesian3.multiplyByScalar(s,.25,s),n.Cartesian3.negate(s,s),G.exp(s,pe),G.multiply(t,pe,a)},G.squad=function(e,t,n,i,a,o){r.Check.typeOf.object("q0",e),r.Check.typeOf.object("q1",t),r.Check.typeOf.object("s0",n),r.Check.typeOf.object("s1",i),r.Check.typeOf.number("t",a),r.Check.typeOf.object("result",o);var s=G.slerp(e,t,a,pe),u=G.slerp(n,i,a,me);return G.slerp(s,u,2*a*(1-a),o)};for(var ye=new G,ve=1.9011074535173003,we=X.supportsTypedArrays()?new Float32Array(8):[],Ce=X.supportsTypedArrays()?new Float32Array(8):[],ge=X.supportsTypedArrays()?new Float32Array(8):[],Ee=X.supportsTypedArrays()?new Float32Array(8):[],Oe=0;Oe<7;++Oe){var _e=Oe+1,xe=2*_e+1;we[Oe]=1/(_e*xe),Ce[Oe]=_e/xe}function be(e,t,n){r.Check.defined("array",e),r.Check.defined("itemToFind",t),r.Check.defined("comparator",n);var i,a,o=0,s=e.length-1;while(o<=s)if(i=~~((o+s)/2),a=n(e[i],t),a<0)o=i+1;else{if(!(a>0))return i;s=i-1}return~(s+1)}function De(e,t,r,n,i){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=r,this.yPoleOffset=n,this.ut1MinusUtc=i}function qe(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,t=arguments,r=0,n=t[r++],i=function(e,t,r,n){r||(r=" ");var i=e.length>=t?"":Array(1+t-e.length>>>0).join(r);return n?e+i:i+e},a=function(e,t,r,n,a,o){var s=n-e.length;return s>0&&(e=r||!a?i(e,n,o,r):e.slice(0,t.length)+i("",s,"0",!0)+e.slice(t.length)),e},o=function(e,t,r,n,o,s,u){var l=e>>>0;return r=r&&l&&{2:"0b",8:"0",16:"0x"}[t]||"",e=r+i(l.toString(t),s||0,"0",!1),a(e,r,n,o,u)},s=function(e,t,r,n,i,o){return null!=n&&(e=e.slice(0,n)),a(e,"",t,r,i,o)},u=function(e,n,u,l,f,d,c){var h,p,m,y,v;if("%%"==e)return"%";for(var w=!1,C="",g=!1,E=!1,O=" ",_=u.length,x=0;u&&x<_;x++)switch(u.charAt(x)){case" ":C=" ";break;case"+":C="+";break;case"-":w=!0;break;case"'":O=u.charAt(x+1);break;case"0":g=!0;break;case"#":E=!0;break}if(l=l?"*"==l?+t[r++]:"*"==l.charAt(0)?+t[l.slice(1,-1)]:+l:0,l<0&&(l=-l,w=!0),!isFinite(l))throw new Error("sprintf: (minimum-)width must be finite");switch(d=d?"*"==d?+t[r++]:"*"==d.charAt(0)?+t[d.slice(1,-1)]:+d:"fFeE".indexOf(c)>-1?6:"d"==c?0:void 0,v=n?t[n.slice(0,-1)]:t[r++],c){case"s":return s(String(v),w,l,d,g,O);case"c":return s(String.fromCharCode(+v),w,l,d,g);case"b":return o(v,2,E,w,l,d,g);case"o":return o(v,8,E,w,l,d,g);case"x":return o(v,16,E,w,l,d,g);case"X":return o(v,16,E,w,l,d,g).toUpperCase();case"u":return o(v,10,E,w,l,d,g);case"i":case"d":return h=+v||0,h=Math.round(h-h%1),p=h<0?"-":C,v=p+i(String(Math.abs(h)),d,"0",!1),a(v,p,w,l,g);case"e":case"E":case"f":case"F":case"g":case"G":return h=+v,p=h<0?"-":C,m=["toExponential","toFixed","toPrecision"]["efg".indexOf(c.toLowerCase())],y=["toString","toUpperCase"]["eEfFgG".indexOf(c)%2],v=p+Math.abs(h)[m](d),a(v,p,w,l,g)[y]();default:return e}};return n.replace(e,u)}function Ae(e,t,r,n,i,a,o,s){this.year=e,this.month=t,this.day=r,this.hour=n,this.minute=i,this.second=a,this.millisecond=o,this.isLeapSecond=s}function Se(e){if(null===e||isNaN(e))throw new r.DeveloperError("year is required and must be a number.");return e%4===0&&e%100!==0||e%400===0}function Re(e,t){this.julianDate=e,this.offset=t}we[7]=ve/136,Ce[7]=8*ve/17,G.fastSlerp=function(e,t,n,i){r.Check.typeOf.object("start",e),r.Check.typeOf.object("end",t),r.Check.typeOf.number("t",n),r.Check.typeOf.object("result",i);var a,o=G.dot(e,t);o>=0?a=1:(a=-1,o=-o);for(var s=o-1,u=1-n,l=n*n,f=u*u,d=7;d>=0;--d)ge[d]=(we[d]*l-Ce[d])*s,Ee[d]=(we[d]*f-Ce[d])*s;var c=a*n*(1+ge[0]*(1+ge[1]*(1+ge[2]*(1+ge[3]*(1+ge[4]*(1+ge[5]*(1+ge[6]*(1+ge[7])))))))),h=u*(1+Ee[0]*(1+Ee[1]*(1+Ee[2]*(1+Ee[3]*(1+Ee[4]*(1+Ee[5]*(1+Ee[6]*(1+Ee[7])))))))),p=G.multiplyByScalar(e,h,ye);return G.multiplyByScalar(t,c,i),G.add(p,i,i)},G.fastSquad=function(e,t,n,i,a,o){r.Check.typeOf.object("q0",e),r.Check.typeOf.object("q1",t),r.Check.typeOf.object("s0",n),r.Check.typeOf.object("s1",i),r.Check.typeOf.number("t",a),r.Check.typeOf.object("result",o);var s=G.fastSlerp(e,t,a,pe),u=G.fastSlerp(n,i,a,me);return G.fastSlerp(s,u,2*a*(1-a),o)},G.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e.x===r.x&&e.y===r.y&&e.z===r.z&&e.w===r.w},G.equalsEpsilon=function(e,r,n){return n=t.defaultValue(n,0),e===r||t.defined(e)&&t.defined(r)&&Math.abs(e.x-r.x)<=n&&Math.abs(e.y-r.y)<=n&&Math.abs(e.z-r.z)<=n&&Math.abs(e.w-r.w)<=n},G.ZERO=Object.freeze(new G(0,0,0,0)),G.IDENTITY=Object.freeze(new G(0,0,0,1)),G.prototype.clone=function(e){return G.clone(this,e)},G.prototype.equals=function(e){return G.equals(this,e)},G.prototype.equalsEpsilon=function(e,t){return G.equalsEpsilon(this,e,t)},G.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var Te={SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5},Me=Object.freeze(Te),Ie={UTC:0,TAI:1},Pe=Object.freeze(Ie),Ue=new Ae,Ne=[31,28,31,30,31,30,31,31,30,31,30,31],Fe=29;function ke(e,t){return et.compare(e.julianDate,t.julianDate)}var je=new Re;function ze(e){je.julianDate=e;var t=et.leapSeconds,r=be(t,je,ke);r<0&&(r=~r),r>=t.length&&(r=t.length-1);var n=t[r].offset;if(r>0){var i=et.secondsDifference(t[r].julianDate,e);i>n&&(r--,n=t[r].offset)}et.addSeconds(e,n,e)}function Le(e,t){je.julianDate=e;var r=et.leapSeconds,n=be(r,je,ke);if(n<0&&(n=~n),0===n)return et.addSeconds(e,-r[0].offset,t);if(n>=r.length)return et.addSeconds(e,-r[n-1].offset,t);var i=et.secondsDifference(r[n].julianDate,e);return 0===i?et.addSeconds(e,-r[n].offset,t):i<=1?void 0:et.addSeconds(e,-r[--n].offset,t)}function Ve(e,t,r){var n=t/Me.SECONDS_PER_DAY|0;return e+=n,t-=Me.SECONDS_PER_DAY*n,t<0&&(e--,t+=Me.SECONDS_PER_DAY),r.dayNumber=e,r.secondsOfDay=t,r}function Be(e,t,r,n,i,a,o){var s=(t-14)/12|0,u=e+4800+s,l=(1461*u/4|0)+(367*(t-2-12*s)/12|0)-(3*((u+100)/100|0)/4|0)+r-32075;n-=12,n<0&&(n+=24);var f=a+(n*Me.SECONDS_PER_HOUR+i*Me.SECONDS_PER_MINUTE+o*Me.SECONDS_PER_MILLISECOND);return f>=43200&&(l-=1),[l,f]}var We=/^(\d{4})$/,Ye=/^(\d{4})-(\d{2})$/,Je=/^(\d{4})-?(\d{3})$/,He=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,Xe=/^(\d{4})-?(\d{2})-?(\d{2})$/,Ge=/([Z+\-])?(\d{2})?:?(\d{2})?$/,Ze=/^(\d{2})(\.\d+)?/.source+Ge.source,Qe=/^(\d{2}):?(\d{2})(\.\d+)?/.source+Ge.source,Ke=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+Ge.source,$e="Invalid ISO 8601 date.";function et(e,r,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=t.defaultValue(e,0),r=t.defaultValue(r,0),n=t.defaultValue(n,Pe.UTC);var i=0|e;r+=(e-i)*Me.SECONDS_PER_DAY,Ve(i,r,this),n===Pe.UTC&&ze(this)}et.fromGregorianDate=function(e,n){if(!(e instanceof Ae))throw new r.DeveloperError("date must be a valid GregorianDate.");var i=Be(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return t.defined(n)?(Ve(i[0],i[1],n),ze(n),n):new et(i[0],i[1],Pe.UTC)},et.fromDate=function(e,n){if(!(e instanceof Date)||isNaN(e.getTime()))throw new r.DeveloperError("date must be a valid JavaScript Date.");var i=Be(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return t.defined(n)?(Ve(i[0],i[1],n),ze(n),n):new et(i[0],i[1],Pe.UTC)},et.fromIso8601=function(e,n){if("string"!==typeof e)throw new r.DeveloperError($e);e=e.replace(",",".");var i,a,o,s,u,l=e.split("T"),f=1,d=1,c=0,h=0,p=0,m=0,y=l[0],v=l[1];if(!t.defined(y))throw new r.DeveloperError($e);if(l=y.match(Xe),null!==l){if(s=y.split("-").length-1,s>0&&2!==s)throw new r.DeveloperError($e);i=+l[1],f=+l[2],d=+l[3]}else if(l=y.match(Ye),null!==l)i=+l[1],f=+l[2];else if(l=y.match(We),null!==l)i=+l[1];else{var w;if(l=y.match(Je),null!==l){if(i=+l[1],w=+l[2],o=Se(i),w<1||o&&w>366||!o&&w>365)throw new r.DeveloperError($e)}else{if(l=y.match(He),null===l)throw new r.DeveloperError($e);i=+l[1];var C=+l[2],g=+l[3]||0;if(s=y.split("-").length-1,s>0&&(!t.defined(l[3])&&1!==s||t.defined(l[3])&&2!==s))throw new r.DeveloperError($e);var E=new Date(Date.UTC(i,0,4));w=7*C+g-E.getUTCDay()-3}a=new Date(Date.UTC(i,0,1)),a.setUTCDate(w),f=a.getUTCMonth()+1,d=a.getUTCDate()}if(o=Se(i),f<1||f>12||d<1||(2!==f||!o)&&d>Ne[f-1]||o&&2===f&&d>Fe)throw new r.DeveloperError($e);if(t.defined(v)){if(l=v.match(Ke),null!==l){if(s=v.split(":").length-1,s>0&&2!==s&&3!==s)throw new r.DeveloperError($e);c=+l[1],h=+l[2],p=+l[3],m=1e3*+(l[4]||0),u=5}else if(l=v.match(Qe),null!==l){if(s=v.split(":").length-1,s>2)throw new r.DeveloperError($e);c=+l[1],h=+l[2],p=60*+(l[3]||0),u=4}else{if(l=v.match(Ze),null===l)throw new r.DeveloperError($e);c=+l[1],h=60*+(l[2]||0),u=3}if(h>=60||p>=61||c>24||24===c&&(h>0||p>0||m>0))throw new r.DeveloperError($e);var O=l[u],_=+l[u+1],x=+(l[u+2]||0);switch(O){case"+":c-=_,h-=x;break;case"-":c+=_,h+=x;break;case"Z":break;default:h+=new Date(Date.UTC(i,f-1,d,c,h)).getTimezoneOffset();break}}var b=60===p;b&&p--;while(h>=60)h-=60,c++;while(c>=24)c-=24,d++;a=o&&2===f?Fe:Ne[f-1];while(d>a)d-=a,f++,f>12&&(f-=12,i++),a=o&&2===f?Fe:Ne[f-1];while(h<0)h+=60,c--;while(c<0)c+=24,d--;while(d<1)f--,f<1&&(f+=12,i--),a=o&&2===f?Fe:Ne[f-1],d+=a;var D=Be(i,f,d,c,h,p,m);return t.defined(n)?(Ve(D[0],D[1],n),ze(n)):n=new et(D[0],D[1],Pe.UTC),b&&et.addSeconds(n,1,n),n},et.now=function(e){return et.fromDate(new Date,e)};var tt=new et(0,0,Pe.TAI);function rt(e){if(e instanceof rt)this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment;else if(e){var t=nt.exec(e);this.scheme=t[1],this.authority=t[2],this.path=t[3],this.query=t[4],this.fragment=t[5]}}et.toGregorianDate=function(e,n){if(!t.defined(e))throw new r.DeveloperError("julianDate is required.");var i=!1,a=Le(e,tt);t.defined(a)||(et.addSeconds(e,-1,tt),a=Le(tt,tt),i=!0);var o=a.dayNumber,s=a.secondsOfDay;s>=43200&&(o+=1);var u=o+68569|0,l=4*u/146097|0;u=u-((146097*l+3)/4|0)|0;var f=4e3*(u+1)/1461001|0;u=u-(1461*f/4|0)+31|0;var d=80*u/2447|0,c=u-(2447*d/80|0)|0;u=d/11|0;var h=d+2-12*u|0,p=100*(l-49)+f+u|0,m=s/Me.SECONDS_PER_HOUR|0,y=s-m*Me.SECONDS_PER_HOUR,v=y/Me.SECONDS_PER_MINUTE|0;y-=v*Me.SECONDS_PER_MINUTE;var w=0|y,C=(y-w)/Me.SECONDS_PER_MILLISECOND;return m+=12,m>23&&(m-=24),i&&(w+=1),t.defined(n)?(n.year=p,n.month=h,n.day=c,n.hour=m,n.minute=v,n.second=w,n.millisecond=C,n.isLeapSecond=i,n):new Ae(p,h,c,m,v,w,C,i)},et.toDate=function(e){if(!t.defined(e))throw new r.DeveloperError("julianDate is required.");var n=et.toGregorianDate(e,Ue),i=n.second;return n.isLeapSecond&&(i-=1),new Date(Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,i,n.millisecond))},et.toIso8601=function(e,n){if(!t.defined(e))throw new r.DeveloperError("julianDate is required.");var i,a=et.toGregorianDate(e,Ue),o=a.year,s=a.month,u=a.day,l=a.hour,f=a.minute,d=a.second,c=a.millisecond;return 1e4===o&&1===s&&1===u&&0===l&&0===f&&0===d&&0===c&&(o=9999,s=12,u=31,l=24),t.defined(n)||0===c?t.defined(n)&&0!==n?(i=(.01*c).toFixed(n).replace(".","").slice(0,n),qe("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",o,s,u,l,f,d,i)):qe("%04d-%02d-%02dT%02d:%02d:%02dZ",o,s,u,l,f,d):(i=(.01*c).toString().replace(".",""),qe("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",o,s,u,l,f,d,i))},et.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.dayNumber=e.dayNumber,r.secondsOfDay=e.secondsOfDay,r):new et(e.dayNumber,e.secondsOfDay,Pe.TAI)},et.compare=function(e,n){if(!t.defined(e))throw new r.DeveloperError("left is required.");if(!t.defined(n))throw new r.DeveloperError("right is required.");var i=e.dayNumber-n.dayNumber;return 0!==i?i:e.secondsOfDay-n.secondsOfDay},et.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e.dayNumber===r.dayNumber&&e.secondsOfDay===r.secondsOfDay},et.equalsEpsilon=function(e,r,n){return n=t.defaultValue(n,0),e===r||t.defined(e)&&t.defined(r)&&Math.abs(et.secondsDifference(e,r))<=n},et.totalDays=function(e){if(!t.defined(e))throw new r.DeveloperError("julianDate is required.");return e.dayNumber+e.secondsOfDay/Me.SECONDS_PER_DAY},et.secondsDifference=function(e,n){if(!t.defined(e))throw new r.DeveloperError("left is required.");if(!t.defined(n))throw new r.DeveloperError("right is required.");var i=(e.dayNumber-n.dayNumber)*Me.SECONDS_PER_DAY;return i+(e.secondsOfDay-n.secondsOfDay)},et.daysDifference=function(e,n){if(!t.defined(e))throw new r.DeveloperError("left is required.");if(!t.defined(n))throw new r.DeveloperError("right is required.");var i=e.dayNumber-n.dayNumber,a=(e.secondsOfDay-n.secondsOfDay)/Me.SECONDS_PER_DAY;return i+a},et.computeTaiMinusUtc=function(e){je.julianDate=e;var t=et.leapSeconds,r=be(t,je,ke);return r<0&&(r=~r,--r,r<0&&(r=0)),t[r].offset},et.addSeconds=function(e,n,i){if(!t.defined(e))throw new r.DeveloperError("julianDate is required.");if(!t.defined(n))throw new r.DeveloperError("seconds is required.");if(!t.defined(i))throw new r.DeveloperError("result is required.");return Ve(e.dayNumber,e.secondsOfDay+n,i)},et.addMinutes=function(e,n,i){if(!t.defined(e))throw new r.DeveloperError("julianDate is required.");if(!t.defined(n))throw new r.DeveloperError("minutes is required.");if(!t.defined(i))throw new r.DeveloperError("result is required.");var a=e.secondsOfDay+n*Me.SECONDS_PER_MINUTE;return Ve(e.dayNumber,a,i)},et.addHours=function(e,n,i){if(!t.defined(e))throw new r.DeveloperError("julianDate is required.");if(!t.defined(n))throw new r.DeveloperError("hours is required.");if(!t.defined(i))throw new r.DeveloperError("result is required.");var a=e.secondsOfDay+n*Me.SECONDS_PER_HOUR;return Ve(e.dayNumber,a,i)},et.addDays=function(e,n,i){if(!t.defined(e))throw new r.DeveloperError("julianDate is required.");if(!t.defined(n))throw new r.DeveloperError("days is required.");if(!t.defined(i))throw new r.DeveloperError("result is required.");var a=e.dayNumber+n;return Ve(a,e.secondsOfDay,i)},et.lessThan=function(e,t){return et.compare(e,t)<0},et.lessThanOrEquals=function(e,t){return et.compare(e,t)<=0},et.greaterThan=function(e,t){return et.compare(e,t)>0},et.greaterThanOrEquals=function(e,t){return et.compare(e,t)>=0},et.prototype.clone=function(e){return et.clone(this,e)},et.prototype.equals=function(e){return et.equals(this,e)},et.prototype.equalsEpsilon=function(e,t){return et.equalsEpsilon(this,e,t)},et.prototype.toString=function(){return et.toIso8601(this)},et.leapSeconds=[new Re(new et(2441317,43210,Pe.TAI),10),new Re(new et(2441499,43211,Pe.TAI),11),new Re(new et(2441683,43212,Pe.TAI),12),new Re(new et(2442048,43213,Pe.TAI),13),new Re(new et(2442413,43214,Pe.TAI),14),new Re(new et(2442778,43215,Pe.TAI),15),new Re(new et(2443144,43216,Pe.TAI),16),new Re(new et(2443509,43217,Pe.TAI),17),new Re(new et(2443874,43218,Pe.TAI),18),new Re(new et(2444239,43219,Pe.TAI),19),new Re(new et(2444786,43220,Pe.TAI),20),new Re(new et(2445151,43221,Pe.TAI),21),new Re(new et(2445516,43222,Pe.TAI),22),new Re(new et(2446247,43223,Pe.TAI),23),new Re(new et(2447161,43224,Pe.TAI),24),new Re(new et(2447892,43225,Pe.TAI),25),new Re(new et(2448257,43226,Pe.TAI),26),new Re(new et(2448804,43227,Pe.TAI),27),new Re(new et(2449169,43228,Pe.TAI),28),new Re(new et(2449534,43229,Pe.TAI),29),new Re(new et(2450083,43230,Pe.TAI),30),new Re(new et(2450630,43231,Pe.TAI),31),new Re(new et(2451179,43232,Pe.TAI),32),new Re(new et(2453736,43233,Pe.TAI),33),new Re(new et(2454832,43234,Pe.TAI),34),new Re(new et(2456109,43235,Pe.TAI),35),new Re(new et(2457204,43236,Pe.TAI),36),new Re(new et(2457754,43237,Pe.TAI),37)],rt.prototype.scheme=null,rt.prototype.authority=null,rt.prototype.path="",rt.prototype.query=null,rt.prototype.fragment=null;var nt=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");rt.prototype.getScheme=function(){return this.scheme},rt.prototype.getAuthority=function(){return this.authority},rt.prototype.getPath=function(){return this.path},rt.prototype.getQuery=function(){return this.query},rt.prototype.getFragment=function(){return this.fragment},rt.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},rt.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},rt.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},rt.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(ot,ut).replace(it,st)),this.path&&(this.path=this.path.replace(it,st)),this.query&&(this.query=this.query.replace(it,st)),this.fragment&&(this.fragment=this.fragment.replace(it,st))};var it=/%[0-9a-z]{2}/gi,at=/[a-zA-Z0-9\-\._~]/,ot=/(.*@)?([^@:]*)(:.*)?/;function st(e){var t=unescape(e);return at.test(t)?t:e.toUpperCase()}function ut(e,t,r,n){return(t||"")+r.toLowerCase()+(n||"")}function lt(e){return 0!==e.length&&"/"===e[e.length-1]||(e+="/"),e}function ft(e,r){if(null===e||"object"!==typeof e)return e;r=t.defaultValue(r,!1);var n=new e.constructor;for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];r&&(a=ft(a,r)),n[i]=a}return n}function dt(e,r,n){n=t.defaultValue(n,!1);var i,a,o,s={},u=t.defined(e),l=t.defined(r);if(u)for(i in e)e.hasOwnProperty(i)&&(a=e[i],l&&n&&"object"===typeof a&&r.hasOwnProperty(i)?(o=r[i],s[i]="object"===typeof o?dt(a,o,n):a):s[i]=a);if(l)for(i in r)r.hasOwnProperty(i)&&!s.hasOwnProperty(i)&&(o=r[i],s[i]=o);return s}function ct(e,t){var r;return"undefined"!==typeof document&&(r=document),ct._implementation(e,t,r)}function ht(e,n){if(!t.defined(e))throw new r.DeveloperError("uri is required.");var i="",a=e.lastIndexOf("/");return-1!==a&&(i=e.substring(0,a+1)),n?(e=new rt(e),t.defined(e.query)&&(i+="?"+e.query),t.defined(e.fragment)&&(i+="#"+e.fragment),i):i}function pt(e){if(!t.defined(e))throw new r.DeveloperError("uri is required.");var n=new rt(e);n.normalize();var i=n.path,a=i.lastIndexOf("/");return-1!==a&&(i=i.substr(a+1)),a=i.lastIndexOf("."),i=-1===a?"":i.substr(a+1),i}rt.prototype.resolve=function(e){var t=new rt;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?(t.path=this.path,t.removeDotSegments()):(e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments()),t.query=this.query))),t.fragment=this.fragment,t},rt.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),r=[],n=""==t[0];n&&t.shift();""==t[0]&&t.shift();while(t.length)e=t.shift(),".."==e?r.pop():"."!=e&&r.push(e);"."!=e&&".."!=e||r.push(""),n&&r.unshift(""),this.path=r.join("/")},rt.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},ct._implementation=function(e,n,i){if(!t.defined(e))throw new r.DeveloperError("relative uri is required.");if(!t.defined(n)){if("undefined"===typeof i)return e;n=t.defaultValue(i.baseURI,i.location.href)}var a=new rt(n),o=new rt(e);return o.resolve(a).toString()};var mt,yt=/^blob:/i;function vt(e){return r.Check.typeOf.string("uri",e),yt.test(e)}function wt(e){t.defined(mt)||(mt=document.createElement("a")),mt.href=window.location.href;var r=mt.host,n=mt.protocol;return mt.href=e,mt.href=mt.href,n!==mt.protocol||r!==mt.host}var Ct=/^data:/i;function gt(e){return r.Check.typeOf.string("uri",e),Ct.test(e)}function Et(e){var r=t.when.defer(),n=document.createElement("script");n.async=!0,n.src=e;var i=document.getElementsByTagName("head")[0];return n.onload=function(){n.onload=void 0,i.removeChild(n),r.resolve()},n.onerror=function(e){r.reject(e)},i.appendChild(n),r.promise}function Ot(e){if(!t.defined(e))throw new r.DeveloperError("obj is required.");var n="";for(var i in e)if(e.hasOwnProperty(i)){var a=e[i],o=encodeURIComponent(i)+"=";if(Array.isArray(a))for(var s=0,u=a.length;s<u;++s)n+=o+encodeURIComponent(a[s])+"&";else n+=o+encodeURIComponent(a)+"&"}return n=n.slice(0,-1),n}function _t(e){if(!t.defined(e))throw new r.DeveloperError("queryString is required.");var n={};if(""===e)return n;for(var i=e.replace(/\+/g,"%20").split(/[&;]/),a=0,o=i.length;a<o;++a){var s=i[a].split("="),u=decodeURIComponent(s[0]),l=s[1];l=t.defined(l)?decodeURIComponent(l):"";var f=n[u];"string"===typeof f?n[u]=[f,l]:Array.isArray(f)?f.push(l):n[u]=l}return n}var xt={UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5},bt=Object.freeze(xt),Dt={TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3},qt=Object.freeze(Dt);function At(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT);var r=t.defaultValue(e.throttleByServer,!1),n=t.defaultValue(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=t.defaultValue(e.priority,0),this.throttle=n,this.throttleByServer=r,this.type=t.defaultValue(e.type,qt.OTHER),this.serverKey=void 0,this.state=bt.UNISSUED,this.deferred=void 0,this.cancelled=!1}function St(e){var t={};if(!e)return t;for(var r=e.split("\r\n"),n=0;n<r.length;++n){var i=r[n],a=i.indexOf(": ");if(a>0){var o=i.substring(0,a),s=i.substring(a+2);t[o]=s}}return t}function Rt(e,t,r){this.statusCode=e,this.response=t,this.responseHeaders=r,"string"===typeof this.responseHeaders&&(this.responseHeaders=St(this.responseHeaders))}function Tt(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function Mt(e,t){return t-e}function It(e){r.Check.typeOf.object("options",e),r.Check.defined("options.comparator",e.comparator),this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function Pt(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function Ut(e,t){return e.priority-t.priority}At.prototype.cancel=function(){this.cancelled=!0},At.prototype.clone=function(e){return t.defined(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new At(this)},Rt.prototype.toString=function(){var e="Request has failed.";return t.defined(this.statusCode)&&(e+=" Status Code: "+this.statusCode),e},Object.defineProperties(Tt.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),Tt.prototype.addEventListener=function(e,t){r.Check.typeOf.func("listener",e),this._listeners.push(e),this._scopes.push(t);var n=this;return function(){n.removeEventListener(e,t)}},Tt.prototype.removeEventListener=function(e,t){r.Check.typeOf.func("listener",e);for(var n=this._listeners,i=this._scopes,a=-1,o=0;o<n.length;o++)if(n[o]===e&&i[o]===t){a=o;break}return-1!==a&&(this._insideRaiseEvent?(this._toRemove.push(a),n[a]=void 0,i[a]=void 0):(n.splice(a,1),i.splice(a,1)),!0)},Tt.prototype.raiseEvent=function(){var e;this._insideRaiseEvent=!0;var r=this._listeners,n=this._scopes,i=r.length;for(e=0;e<i;e++){var a=r[e];t.defined(a)&&r[e].apply(n[e],arguments)}var o=this._toRemove;if(i=o.length,i>0){for(o.sort(Mt),e=0;e<i;e++){var s=o[e];r.splice(s,1),n.splice(s,1)}o.length=0}this._insideRaiseEvent=!1},Object.defineProperties(It.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){this._maximumLength=e,this._length>e&&e>0&&(this._length=e,this._array.length=e)}},comparator:{get:function(){return this._comparator}}}),It.prototype.reserve=function(e){e=t.defaultValue(e,this._length),this._array.length=e},It.prototype.heapify=function(e){e=t.defaultValue(e,0);var r=this._length,n=this._comparator,i=this._array,a=-1,o=!0;while(o){var s=2*(e+1),u=s-1;a=u<r&&n(i[u],i[e])<0?u:e,s<r&&n(i[s],i[a])<0&&(a=s),a!==e?(Pt(i,a,e),e=a):o=!1}},It.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);t>=0;--t)this.heapify(t)},It.prototype.insert=function(e){r.Check.defined("element",e);var n,i=this._array,a=this._comparator,o=this._maximumLength,s=this._length++;s<i.length?i[s]=e:i.push(e);while(0!==s){var u=Math.floor((s-1)/2);if(!(a(i[s],i[u])<0))break;Pt(i,s,u),s=u}return t.defined(o)&&this._length>o&&(n=i[o],this._length=o),n},It.prototype.pop=function(e){if(e=t.defaultValue(e,0),0!==this._length){r.Check.typeOf.number.lessThan("index",e,this._length);var n=this._array,i=n[e];return Pt(n,e,--this._length),this.heapify(e),i}};var Nt={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},Ft=20,kt=new It({comparator:Ut});kt.maximumLength=Ft,kt.reserve(Ft);var jt=[],zt={},Lt="undefined"!==typeof document?new rt(document.location.href):new rt,Vt=new Tt;function Bt(){}function Wt(e){t.defined(e.priorityFunction)&&(e.priority=e.priorityFunction())}function Yt(e){var r=t.defaultValue(Bt.requestsByServer[e],Bt.maximumRequestsPerServer);return zt[e]<r}function Jt(e){return e.state===bt.UNISSUED&&(e.state=bt.ISSUED,e.deferred=t.when.defer()),e.deferred.promise}function Ht(e){return function(t){e.state!==bt.CANCELLED&&(--Nt.numberOfActiveRequests,--zt[e.serverKey],Vt.raiseEvent(),e.state=bt.RECEIVED,e.deferred.resolve(t))}}function Xt(e){return function(t){e.state!==bt.CANCELLED&&(++Nt.numberOfFailedRequests,--Nt.numberOfActiveRequests,--zt[e.serverKey],Vt.raiseEvent(t),e.state=bt.FAILED,e.deferred.reject(t))}}function Gt(e){var t=Jt(e);return e.state=bt.ACTIVE,jt.push(e),++Nt.numberOfActiveRequests,++Nt.numberOfActiveRequestsEver,++zt[e.serverKey],e.requestFunction().then(Ht(e)).otherwise(Xt(e)),t}function Zt(e){var r=e.state===bt.ACTIVE;e.state=bt.CANCELLED,++Nt.numberOfCancelledRequests,e.deferred.reject(),r&&(--Nt.numberOfActiveRequests,--zt[e.serverKey],++Nt.numberOfCancelledActiveRequests),t.defined(e.cancelFunction)&&e.cancelFunction()}function Qt(){Bt.debugShowStatistics&&(0===Nt.numberOfActiveRequests&&Nt.lastNumberOfActiveRequests>0&&(Nt.numberOfAttemptedRequests>0&&(console.log("Number of attempted requests: "+Nt.numberOfAttemptedRequests),Nt.numberOfAttemptedRequests=0),Nt.numberOfCancelledRequests>0&&(console.log("Number of cancelled requests: "+Nt.numberOfCancelledRequests),Nt.numberOfCancelledRequests=0),Nt.numberOfCancelledActiveRequests>0&&(console.log("Number of cancelled active requests: "+Nt.numberOfCancelledActiveRequests),Nt.numberOfCancelledActiveRequests=0),Nt.numberOfFailedRequests>0&&(console.log("Number of failed requests: "+Nt.numberOfFailedRequests),Nt.numberOfFailedRequests=0)),Nt.lastNumberOfActiveRequests=Nt.numberOfActiveRequests)}Bt.maximumRequests=50,Bt.maximumRequestsPerServer=6,Bt.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},Bt.throttleRequests=!0,Bt.debugShowStatistics=!1,Bt.requestCompletedEvent=Vt,Object.defineProperties(Bt,{statistics:{get:function(){return Nt}},priorityHeapLength:{get:function(){return Ft},set:function(e){if(e<Ft)while(kt.length>e){var t=kt.pop();Zt(t)}Ft=e,kt.maximumLength=e,kt.reserve(e)}}}),Bt.update=function(){var e,t,r=0,n=jt.length;for(e=0;e<n;++e)t=jt[e],t.cancelled&&Zt(t),t.state===bt.ACTIVE?r>0&&(jt[e-r]=t):++r;jt.length-=r;var i=kt.internalArray,a=kt.length;for(e=0;e<a;++e)Wt(i[e]);kt.resort();var o=Math.max(Bt.maximumRequests-jt.length,0),s=0;while(s<o&&kt.length>0)t=kt.pop(),t.cancelled?Zt(t):!t.throttleByServer||Yt(t.serverKey)?(Gt(t),++s):Zt(t);Qt()},Bt.getServerKey=function(e){r.Check.typeOf.string("url",e);var n=new rt(e).resolve(Lt),i=n.authority;/:/.test(i)||(i=i+":"+("https"===n.scheme?"443":"80"));var a=zt[i];return t.defined(a)||(zt[i]=0),i},Bt.request=function(e){if(r.Check.typeOf.object("request",e),r.Check.typeOf.string("request.url",e.url),r.Check.typeOf.func("request.requestFunction",e.requestFunction),gt(e.url)||vt(e.url))return Vt.raiseEvent(),e.state=bt.RECEIVED,e.requestFunction();if(++Nt.numberOfAttemptedRequests,t.defined(e.serverKey)||(e.serverKey=Bt.getServerKey(e.url)),!Bt.throttleRequests||!e.throttleByServer||Yt(e.serverKey)){if(!Bt.throttleRequests||!e.throttle)return Gt(e);if(!(jt.length>=Bt.maximumRequests)){Wt(e);var n=kt.insert(e);if(t.defined(n)){if(n===e)return;Zt(n)}return Jt(e)}}},Bt.clearForSpecs=function(){while(kt.length>0){var e=kt.pop();Zt(e)}for(var t=jt.length,r=0;r<t;++r)Zt(jt[r]);jt.length=0,zt={},Nt.numberOfAttemptedRequests=0,Nt.numberOfActiveRequests=0,Nt.numberOfCancelledRequests=0,Nt.numberOfCancelledActiveRequests=0,Nt.numberOfFailedRequests=0,Nt.numberOfActiveRequestsEver=0,Nt.lastNumberOfActiveRequests=0},Bt.numberOfActiveRequestsByServer=function(e){return zt[e]},Bt.requestHeap=kt;var Kt={},$t={};function er(e){var r=new rt(e);r.normalize();var n=r.getAuthority();if(t.defined(n)){if(-1!==n.indexOf("@")){var i=n.split("@");n=i[1]}if(-1===n.indexOf(":")){var a=r.getScheme();if(t.defined(a)||(a=window.location.protocol,a=a.substring(0,a.length-1)),"http"===a)n+=":80";else{if("https"!==a)return;n+=":443"}}return n}}Kt.add=function(e,n){if(!t.defined(e))throw new r.DeveloperError("host is required.");if(!t.defined(n)||n<=0)throw new r.DeveloperError("port is required to be greater than 0.");var i=e.toLowerCase()+":"+n;t.defined($t[i])||($t[i]=!0)},Kt.remove=function(e,n){if(!t.defined(e))throw new r.DeveloperError("host is required.");if(!t.defined(n)||n<=0)throw new r.DeveloperError("port is required to be greater than 0.");var i=e.toLowerCase()+":"+n;t.defined($t[i])&&delete $t[i]},Kt.contains=function(e){if(!t.defined(e))throw new r.DeveloperError("url is required.");var n=er(e);return!(!t.defined(n)||!t.defined($t[n]))},Kt.clear=function(){$t={}};var tr,rr=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),e.responseType="blob","blob"===e.responseType}catch(t){return!1}}();function nr(e,r,n,i){var a,o=e.query;if(!t.defined(o)||0===o.length)return{};if(-1===o.indexOf("=")){var s={};s[o]=void 0,a=s}else a=_t(o);r._queryParameters=n?sr(a,r._queryParameters,i):a,e.query=void 0}function ir(e,r){var n=r._queryParameters,i=Object.keys(n);1!==i.length||t.defined(n[i[0]])?e.query=Ot(n):e.query=i[0]}function ar(e,r){return t.defined(e)?t.defined(e.clone)?e.clone():ft(e):r}function or(e){if(e.state===bt.ISSUED||e.state===bt.ACTIVE)throw new o.RuntimeError("The Resource is already being fetched.");e.state=bt.UNISSUED,e.deferred=void 0}function sr(e,r,n){if(!n)return dt(e,r);var i=ft(e,!0);for(var a in r)if(r.hasOwnProperty(a)){var o=i[a],s=r[a];t.defined(o)?(Array.isArray(o)||(o=i[a]=[o]),i[a]=o.concat(s)):i[a]=Array.isArray(s)?s.slice():s}return i}function ur(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT),"string"===typeof e&&(e={url:e}),r.Check.typeOf.string("options.url",e.url),this._url=void 0,this._templateValues=ar(e.templateValues,{}),this._queryParameters=ar(e.queryParameters,{}),this.headers=ar(e.headers,{}),this.request=t.defaultValue(e.request,new At),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=t.defaultValue(e.retryAttempts,0),this._retryCount=0;var n=new rt(e.url);nr(n,this,!0,!0),n.fragment=void 0,this._url=n.toString()}function lr(e){var r=e.resource,n=e.flipY,i=e.preferImageBitmap,a=r.request;a.url=r.url,a.requestFunction=function(){var e=!1;r.isDataUri||r.isBlobUri||(e=r.isCrossOriginUrl);var o=t.when.defer();return ur._Implementations.createImage(a,e,o,n,i),o.promise};var o=Bt.request(a);if(t.defined(o))return o.otherwise((function(e){return a.state!==bt.FAILED?t.when.reject(e):r.retryOnError(e).then((function(o){return o?(a.state=bt.UNISSUED,a.deferred=void 0,lr({resource:r,flipY:n,preferImageBitmap:i})):t.when.reject(e)}))}))}function fr(e,r,n){var i={};i[r]=n,e.setQueryParameters(i);var a=e.request;a.url=e.url,a.requestFunction=function(){var r=t.when.defer();return window[n]=function(e){r.resolve(e);try{delete window[n]}catch(t){window[n]=void 0}},ur._Implementations.loadAndExecuteScript(e.url,n,r),r.promise};var o=Bt.request(a);if(t.defined(o))return o.otherwise((function(i){return a.state!==bt.FAILED?t.when.reject(i):e.retryOnError(i).then((function(o){return o?(a.state=bt.UNISSUED,a.deferred=void 0,fr(e,r,n)):t.when.reject(i)}))}))}ur.createIfNeeded=function(e){return e instanceof ur?e.getDerivedResource({request:e.request}):"string"!==typeof e?e:new ur({url:e})},ur.supportsImageBitmapOptions=function(){if(t.defined(tr))return tr;if("function"!==typeof createImageBitmap)return tr=t.when.resolve(!1),tr;var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg==";return tr=ur.fetchBlob({url:e}).then((function(e){return createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none"})})).then((function(e){return!0})).otherwise((function(){return!1})),tr},Object.defineProperties(ur,{isBlobSupported:{get:function(){return rr}}}),Object.defineProperties(ur.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){var t=new rt(e);nr(t,this,!1),t.fragment=void 0,this._url=t.toString()}},extension:{get:function(){return pt(this._url)}},isDataUri:{get:function(){return gt(this._url)}},isBlobUri:{get:function(){return vt(this._url)}},isCrossOriginUrl:{get:function(){return wt(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}}}),ur.prototype.getUrlComponent=function(e,r){if(this.isDataUri)return this._url;var n=new rt(this._url);e&&ir(n,this);var i=n.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),a=this._templateValues;return i=i.replace(/{(.*?)}/g,(function(e,r){var n=a[r];return t.defined(n)?encodeURIComponent(n):e})),r&&t.defined(this.proxy)&&(i=this.proxy.getURL(i)),i},ur.prototype.setQueryParameters=function(e,t){this._queryParameters=t?sr(this._queryParameters,e,!1):sr(e,this._queryParameters,!1)},ur.prototype.appendQueryParameters=function(e){this._queryParameters=sr(e,this._queryParameters,!0)},ur.prototype.setTemplateValues=function(e,t){this._templateValues=t?dt(this._templateValues,e):dt(e,this._templateValues)},ur.prototype.getDerivedResource=function(e){var r=this.clone();if(r._retryCount=0,t.defined(e.url)){var n=new rt(e.url),i=t.defaultValue(e.preserveQueryParameters,!1);nr(n,r,!0,i),n.fragment=void 0,r._url=n.resolve(new rt(ct(this._url))).toString()}return t.defined(e.queryParameters)&&(r._queryParameters=dt(e.queryParameters,r._queryParameters)),t.defined(e.templateValues)&&(r._templateValues=dt(e.templateValues,r.templateValues)),t.defined(e.headers)&&(r.headers=dt(e.headers,r.headers)),t.defined(e.proxy)&&(r.proxy=e.proxy),t.defined(e.request)&&(r.request=e.request),t.defined(e.retryCallback)&&(r.retryCallback=e.retryCallback),t.defined(e.retryAttempts)&&(r.retryAttempts=e.retryAttempts),r},ur.prototype.retryOnError=function(e){var r=this.retryCallback;if("function"!==typeof r||this._retryCount>=this.retryAttempts)return t.when(!1);var n=this;return t.when(r(this,e)).then((function(e){return++n._retryCount,e}))},ur.prototype.clone=function(e){return t.defined(e)||(e=new ur({url:this._url})),e._url=this._url,e._queryParameters=ft(this._queryParameters),e._templateValues=ft(this._templateValues),e.headers=ft(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},ur.prototype.getBaseUri=function(e){return ht(this.getUrlComponent(e),e)},ur.prototype.appendForwardSlash=function(){this._url=lt(this._url)},ur.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},ur.fetchArrayBuffer=function(e){var t=new ur(e);return t.fetchArrayBuffer()},ur.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},ur.fetchBlob=function(e){var t=new ur(e);return t.fetchBlob()},ur.prototype.fetchImage=function(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT);var r=t.defaultValue(e.preferImageBitmap,!1),n=t.defaultValue(e.preferBlob,!1),i=t.defaultValue(e.flipY,!1);if(or(this.request),!rr||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!n)return lr({resource:this,flipY:i,preferImageBitmap:r});var a,o,s,u,l=this.fetchBlob();return t.defined(l)?ur.supportsImageBitmapOptions().then((function(e){return a=e,o=a&&r,l})).then((function(e){if(t.defined(e)){if(u=e,o)return ur.createImageBitmapFromBlob(e,{flipY:i,premultiplyAlpha:!1});var r=window.URL.createObjectURL(e);return s=new ur({url:r}),lr({resource:s,flipY:i,preferImageBitmap:!1})}})).then((function(e){if(t.defined(e))return e.blob=u,o||window.URL.revokeObjectURL(s.url),e})).otherwise((function(e){return t.defined(s)&&window.URL.revokeObjectURL(s.url),e.blob=u,t.when.reject(e)})):void 0},ur.fetchImage=function(e){var t=new ur(e);return t.fetchImage({flipY:e.flipY,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},ur.prototype.fetchText=function(){return this.fetch({responseType:"text"})},ur.fetchText=function(e){var t=new ur(e);return t.fetchText()},ur.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});const r=this;if(t.defined(e))return e.then((function(e){if(!t.defined(e))return;let n={};try{n=JSON.parse(e)}catch(i){console.error("====JSON parse ERR:===="),console.log(e),console.log(r),console.log(i)}return n}))},ur.fetchJson=function(e){var t=new ur(e);return t.fetchJson()},ur.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},ur.fetchXML=function(e){var t=new ur(e);return t.fetchXML()},ur.prototype.fetchJsonp=function(e){var r;e=t.defaultValue(e,"callback"),or(this.request);do{r="loadJsonp"+Math.random().toString().substring(2,8)}while(t.defined(window[r]));return fr(this,e,r)},ur.fetchJsonp=function(e){var t=new ur(e);return t.fetchJsonp(e.callbackParameterName)},ur.prototype._makeRequest=function(e){var r=this;or(r.request);var n=r.request;n.url=r.url,n.requestFunction=function(){var i=e.responseType,a=dt(e.headers,r.headers),o=e.overrideMimeType,s=e.method,u=e.data,l=t.when.defer(),f=ur._Implementations.loadWithXhr(r.url,i,s,u,a,l,o);return t.defined(f)&&t.defined(f.abort)&&(n.cancelFunction=function(){f.abort()}),l.promise};var i=Bt.request(n);if(t.defined(i))return i.then((function(e){return e})).otherwise((function(i){return n.state!==bt.FAILED?t.when.reject(i):r.retryOnError(i).then((function(a){return a?(n.state=bt.UNISSUED,n.deferred=void 0,r.fetch(e)):t.when.reject(i)}))}))};var dr=/^data:(.*?)(;base64)?,(.*)$/;function cr(e,t){var r=decodeURIComponent(t);return e?atob(r):r}function hr(e,t){for(var r=cr(e,t),n=new ArrayBuffer(r.length),i=new Uint8Array(n),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return n}function pr(e,n){n=t.defaultValue(n,"");var i=e[1],a=!!e[2],o=e[3];switch(n){case"":case"text":return cr(a,o);case"arraybuffer":return hr(a,o);case"blob":var s=hr(a,o);return new Blob([s],{type:i});case"document":var u=new DOMParser;return u.parseFromString(cr(a,o),i);case"json":return JSON.parse(cr(a,o));default:throw new r.DeveloperError("Unhandled responseType: "+n)}}function mr(e,t,r){var n=new Image;n.onload=function(){r.resolve(n)},n.onerror=function(e){r.reject(e)},t&&(Kt.contains(e)?n.crossOrigin="use-credentials":n.crossOrigin=""),n.src=e}function yr(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}function vr(e,t,r,n,i,a,s){var u=require("url").parse(e),l="https:"===u.protocol?require("https"):require("http"),f=require("zlib"),d={protocol:u.protocol,hostname:u.hostname,port:u.port,path:u.path,query:u.query,method:r,headers:i};l.request(d).on("response",(function(e){if(e.statusCode<200||e.statusCode>=300)a.reject(new Rt(e.statusCode,e,e.headers));else{var r=[];e.on("data",(function(e){r.push(e)})),e.on("end",(function(){var n=Buffer.concat(r);"gzip"===e.headers["content-encoding"]?f.gunzip(n,(function(e,r){e?a.reject(new o.RuntimeError("Error decompressing response.")):a.resolve(yr(r,t))})):a.resolve(yr(n,t))}))}})).on("error",(function(e){a.reject(new Rt)})).end()}ur.prototype.fetch=function(e){return e=ar(e,{}),e.method="GET",this._makeRequest(e)},ur.fetch=function(e){var t=new ur(e);return t.fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},ur.prototype.delete=function(e){return e=ar(e,{}),e.method="DELETE",this._makeRequest(e)},ur.delete=function(e){var t=new ur(e);return t.delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},ur.prototype.head=function(e){return e=ar(e,{}),e.method="HEAD",this._makeRequest(e)},ur.head=function(e){var t=new ur(e);return t.head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},ur.prototype.options=function(e){return e=ar(e,{}),e.method="OPTIONS",this._makeRequest(e)},ur.options=function(e){var t=new ur(e);return t.options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},ur.prototype.post=function(e,t){return r.Check.defined("data",e),t=ar(t,{}),t.method="POST",t.data=e,this._makeRequest(t)},ur.post=function(e){var t=new ur(e);return t.post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},ur.prototype.put=function(e,t){return r.Check.defined("data",e),t=ar(t,{}),t.method="PUT",t.data=e,this._makeRequest(t)},ur.put=function(e){var t=new ur(e);return t.put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},ur.prototype.patch=function(e,t){return r.Check.defined("data",e),t=ar(t,{}),t.method="PATCH",t.data=e,this._makeRequest(t)},ur.patch=function(e){var t=new ur(e);return t.patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},ur._Implementations={},ur._Implementations.createImage=function(e,r,n,i,a){var s=e.url;ur.supportsImageBitmapOptions().then((function(u){if(u&&a){var l="blob",f="GET",d=t.when.defer(),c=ur._Implementations.loadWithXhr(s,l,f,void 0,void 0,d,void 0,void 0,void 0);return t.defined(c)&&t.defined(c.abort)&&(e.cancelFunction=function(){c.abort()}),d.promise.then((function(e){if(t.defined(e))return ur.createImageBitmapFromBlob(e,{flipY:i,premultiplyAlpha:!1});n.reject(new o.RuntimeError("Successfully retrieved "+s+" but it contained no content."))})).then(n.resolve)}mr(s,r,n)})).otherwise(n.reject)},ur.createImageBitmapFromBlob=function(e,t){return r.Check.defined("options",t),r.Check.typeOf.bool("options.flipY",t.flipY),r.Check.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none"})};var wr="undefined"===typeof XMLHttpRequest;function Cr(e){if(e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=t.defaultValue(e.addNewLeapSeconds,!0),t.defined(e.data))Er(this,e.data);else if(t.defined(e.url)){var r=ur.createIfNeeded(e.url),n=this;this._downloadPromise=t.when(r.fetchJson(),(function(e){Er(n,e)}),(function(){n._dataError="An error occurred while retrieving the EOP data from the URL "+r.url+"."}))}else Er(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function gr(e,t){return et.compare(e.julianDate,t)}function Er(e,r){if(t.defined(r.columnNames))if(t.defined(r.samples)){var n=r.columnNames.indexOf("modifiedJulianDateUtc"),i=r.columnNames.indexOf("xPoleWanderRadians"),a=r.columnNames.indexOf("yPoleWanderRadians"),o=r.columnNames.indexOf("ut1MinusUtcSeconds"),s=r.columnNames.indexOf("xCelestialPoleOffsetRadians"),u=r.columnNames.indexOf("yCelestialPoleOffsetRadians"),l=r.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||i<0||a<0||o<0||s<0||u<0||l<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var f,d=e._samples=r.samples,c=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=i,e._yPoleWanderRadiansColumn=a,e._ut1MinusUtcSecondsColumn=o,e._xCelestialPoleOffsetRadiansColumn=s,e._yCelestialPoleOffsetRadiansColumn=u,e._taiMinusUtcSecondsColumn=l,e._columnCount=r.columnNames.length,e._lastIndex=void 0;for(var h=e._addNewLeapSeconds,p=0,m=d.length;p<m;p+=e._columnCount){var y=d[p+n],v=d[p+l],w=y+Me.MODIFIED_JULIAN_DATE_DIFFERENCE,C=new et(w,v,Pe.TAI);if(c.push(C),h){if(v!==f&&t.defined(f)){var g=et.leapSeconds,E=be(g,C,gr);if(E<0){var O=new Re(C,v);g.splice(~E,0,O)}}f=v}}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function Or(e,t,r,n,i){var a=r*n;i.xPoleWander=t[a+e._xPoleWanderRadiansColumn],i.yPoleWander=t[a+e._yPoleWanderRadiansColumn],i.xPoleOffset=t[a+e._xCelestialPoleOffsetRadiansColumn],i.yPoleOffset=t[a+e._yCelestialPoleOffsetRadiansColumn],i.ut1MinusUtc=t[a+e._ut1MinusUtcSecondsColumn]}function _r(e,t,r){return t+e*(r-t)}function xr(e,t,r,n,i,a,o){var s=e._columnCount;if(a>t.length-1)return o.xPoleWander=0,o.yPoleWander=0,o.xPoleOffset=0,o.yPoleOffset=0,o.ut1MinusUtc=0,o;var u=t[i],l=t[a];if(u.equals(l)||n.equals(u))return Or(e,r,i,s,o),o;if(n.equals(l))return Or(e,r,a,s,o),o;var f=et.secondsDifference(n,u)/et.secondsDifference(l,u),d=i*s,c=a*s,h=r[d+e._ut1MinusUtcSecondsColumn],p=r[c+e._ut1MinusUtcSecondsColumn],m=p-h;if(m>.5||m<-.5){var y=r[d+e._taiMinusUtcSecondsColumn],v=r[c+e._taiMinusUtcSecondsColumn];y!==v&&(l.equals(n)?h=p:p-=v-y)}return o.xPoleWander=_r(f,r[d+e._xPoleWanderRadiansColumn],r[c+e._xPoleWanderRadiansColumn]),o.yPoleWander=_r(f,r[d+e._yPoleWanderRadiansColumn],r[c+e._yPoleWanderRadiansColumn]),o.xPoleOffset=_r(f,r[d+e._xCelestialPoleOffsetRadiansColumn],r[c+e._xCelestialPoleOffsetRadiansColumn]),o.yPoleOffset=_r(f,r[d+e._yCelestialPoleOffsetRadiansColumn],r[c+e._yCelestialPoleOffsetRadiansColumn]),o.ut1MinusUtc=_r(f,h,p),o}function br(e,r,n){this.heading=t.defaultValue(e,0),this.pitch=t.defaultValue(r,0),this.roll=t.defaultValue(n,0)}ur._Implementations.loadWithXhr=function(e,r,n,i,a,s,u){var l=dr.exec(e);if(null===l){if(!wr){var f=new XMLHttpRequest;if(Kt.contains(e)&&(f.withCredentials=!0),f.open(n,e,!0),t.defined(u)&&t.defined(f.overrideMimeType)&&f.overrideMimeType(u),t.defined(a))for(var d in a)a.hasOwnProperty(d)&&f.setRequestHeader(d,a[d]);t.defined(r)&&(f.responseType=r);var c=!1;return"string"===typeof e&&(c=0===e.indexOf("file://")||"undefined"!==typeof window&&"file://"===window.location.origin),f.onload=function(){if(!(f.status<200||f.status>=300)||c&&0===f.status){var e=f.response,i=f.responseType;if("HEAD"===n||"OPTIONS"===n){var a=f.getAllResponseHeaders(),u=a.trim().split(/[\r\n]+/),l={};return u.forEach((function(e){var t=e.split(": "),r=t.shift();l[r]=t.join(": ")})),void s.resolve(l)}if(204===f.status)s.resolve();else if(!t.defined(e)||t.defined(r)&&i!==r)if("json"===r&&"string"===typeof e)try{s.resolve(JSON.parse(e))}catch(d){s.reject(d)}else(""===i||"document"===i)&&t.defined(f.responseXML)&&f.responseXML.hasChildNodes()?s.resolve(f.responseXML):""!==i&&"text"!==i||!t.defined(f.responseText)?s.reject(new o.RuntimeError("Invalid XMLHttpRequest response type.")):s.resolve(f.responseText);else s.resolve(e)}else s.reject(new Rt(f.status,f.response,f.getAllResponseHeaders()))},f.onerror=function(e){s.reject(new Rt)},f.send(i),f}vr(e,r,n,i,a,s)}else s.resolve(pr(l,r))},ur._Implementations.loadAndExecuteScript=function(e,t,r){return Et(e).otherwise(r.reject)},ur._DefaultImplementations={},ur._DefaultImplementations.createImage=ur._Implementations.createImage,ur._DefaultImplementations.loadWithXhr=ur._Implementations.loadWithXhr,ur._DefaultImplementations.loadAndExecuteScript=ur._Implementations.loadAndExecuteScript,ur.DEFAULT=Object.freeze(new ur({url:"undefined"===typeof document?"":document.location.href.split("?")[0]})),Cr.NONE=Object.freeze({getPromiseToLoad:function(){return t.when()},compute:function(e,r){return t.defined(r)?(r.xPoleWander=0,r.yPoleWander=0,r.xPoleOffset=0,r.yPoleOffset=0,r.ut1MinusUtc=0):r=new De(0,0,0,0,0),r}}),Cr.prototype.getPromiseToLoad=function(){return t.when(this._downloadPromise)},Cr.prototype.compute=function(e,r){if(t.defined(this._samples)){if(t.defined(r)||(r=new De(0,0,0,0,0)),0===this._samples.length)return r.xPoleWander=0,r.yPoleWander=0,r.xPoleOffset=0,r.yPoleOffset=0,r.ut1MinusUtc=0,r;var n=this._dates,i=this._lastIndex,a=0,s=0;if(t.defined(i)){var u=n[i],l=n[i+1],f=et.lessThanOrEquals(u,e),d=!t.defined(l),c=d||et.greaterThanOrEquals(l,e);if(f&&c)return a=i,!d&&l.equals(e)&&++a,s=a+1,xr(this,n,this._samples,e,a,s,r),r}var h=be(n,e,et.compare,this._dateColumn);return h>=0?(h<n.length-1&&n[h+1].equals(e)&&++h,a=h,s=h):(s=~h,a=s-1,a<0&&(a=0)),this._lastIndex=a,xr(this,n,this._samples,e,a,s,r),r}if(t.defined(this._dataError))throw new o.RuntimeError(this._dataError)},br.fromQuaternion=function(e,i){if(!t.defined(e))throw new r.DeveloperError("quaternion is required");t.defined(i)||(i=new br);var a=2*(e.w*e.y-e.z*e.x),o=1-2*(e.x*e.x+e.y*e.y),s=2*(e.w*e.x+e.y*e.z),u=1-2*(e.y*e.y+e.z*e.z),l=2*(e.w*e.z+e.x*e.y);return i.heading=-Math.atan2(l,u),i.roll=Math.atan2(s,o),i.pitch=-n.CesiumMath.asinClamped(a),i},br.fromDegrees=function(e,i,a,o){if(!t.defined(e))throw new r.DeveloperError("heading is required");if(!t.defined(i))throw new r.DeveloperError("pitch is required");if(!t.defined(a))throw new r.DeveloperError("roll is required");return t.defined(o)||(o=new br),o.heading=e*n.CesiumMath.RADIANS_PER_DEGREE,o.pitch=i*n.CesiumMath.RADIANS_PER_DEGREE,o.roll=a*n.CesiumMath.RADIANS_PER_DEGREE,o},br.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.heading=e.heading,r.pitch=e.pitch,r.roll=e.roll,r):new br(e.heading,e.pitch,e.roll)},br.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e.heading===r.heading&&e.pitch===r.pitch&&e.roll===r.roll},br.equalsEpsilon=function(e,r,i,a){return e===r||t.defined(e)&&t.defined(r)&&n.CesiumMath.equalsEpsilon(e.heading,r.heading,i,a)&&n.CesiumMath.equalsEpsilon(e.pitch,r.pitch,i,a)&&n.CesiumMath.equalsEpsilon(e.roll,r.roll,i,a)},br.prototype.clone=function(e){return br.clone(this,e)},br.prototype.equals=function(e){return br.equals(this,e)},br.prototype.equalsEpsilon=function(e,t,r){return br.equalsEpsilon(this,e,t,r)},br.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var Dr,qr,Ar,Sr=/((?:.*\/)|^)Cesium\.js$/;function Rr(){for(var e=document.getElementsByTagName("script"),t=0,r=e.length;t<r;++t){var n=e[t].getAttribute("src"),i=Sr.exec(n);if(null!==i)return i[1]}}function Tr(e){return"undefined"===typeof document?e:(t.defined(Dr)||(Dr=document.createElement("a")),Dr.href=e,Dr.href=Dr.href,Dr.href)}function Mr(){if(t.defined(qr))return qr;var e;if(e="undefined"!==typeof CESIUM_BASE_URL?CESIUM_BASE_URL:"object"===typeof define&&t.defined(define.amd)&&!define.amd.toUrlUndefined&&t.defined(require.toUrl)?ct("..",Ur("Core/buildModuleUrl.js")):Rr(),!t.defined(e))throw new r.DeveloperError("Unable to determine Cesium base URL automatically, try defining a global variable called CESIUM_BASE_URL.");return qr=new ur({url:Tr(e)}),qr.appendForwardSlash(),qr}function Ir(e){return Tr(require.toUrl("../"+e))}function Pr(e){var t=Mr().getDerivedResource({url:e});return t.url}function Ur(e){t.defined(Ar)||(Ar="object"===typeof define&&t.defined(define.amd)&&!define.amd.toUrlUndefined&&t.defined(require.toUrl)?Ir:Pr);var r=Ar(e);return r}function Nr(e,t,r){this.x=e,this.y=t,this.s=r}function Fr(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT),this._xysFileUrlTemplate=ur.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=t.defaultValue(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=t.defaultValue(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new et(this._sampleZeroJulianEphemerisDate,0,Pe.TAI),this._stepSizeDays=t.defaultValue(e.stepSizeDays,1),this._samplesPerXysFile=t.defaultValue(e.samplesPerXysFile,1e3),this._totalSamples=t.defaultValue(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var r=this._interpolationOrder,n=this._denominators=new Array(r+1),i=this._xTable=new Array(r+1),a=Math.pow(this._stepSizeDays,r),o=0;o<=r;++o){n[o]=a,i[o]=o*this._stepSizeDays;for(var s=0;s<=r;++s)s!==o&&(n[o]*=o-s);n[o]=1/n[o]}this._work=new Array(r+1),this._coef=new Array(r+1)}Ur._cesiumScriptRegex=Sr,Ur._buildModuleUrlFromBaseUrl=Pr,Ur._clearBaseResource=function(){qr=void 0},Ur.setBaseUrl=function(e){qr=ur.DEFAULT.getDerivedResource({url:e})},Ur.getCesiumBaseUrl=Mr,Ur.getModUrl=function(e){return Ur(e)};var kr=new et(0,0,Pe.TAI);function jr(e,t,r){var n=kr;return n.dayNumber=t,n.secondsOfDay=r,et.daysDifference(n,e._sampleZeroDateTT)}function zr(e,r){if(e._chunkDownloadsInProgress[r])return e._chunkDownloadsInProgress[r];var n,i=t.when.defer();e._chunkDownloadsInProgress[r]=i;var a=e._xysFileUrlTemplate;return n=t.defined(a)?a.getDerivedResource({templateValues:{0:r}}):new ur({url:Ur("Assets/IAU2006_XYS/IAU2006_XYS_"+r+".json")}),t.when(n.fetchJson(),(function(t){e._chunkDownloadsInProgress[r]=!1;for(var n=e._samples,a=t.samples,o=r*e._samplesPerXysFile*3,s=0,u=a.length;s<u;++s)n[o+s]=a[s];i.resolve()})),i.promise}Fr.prototype.preload=function(e,r,n,i){var a=jr(this,e,r),o=jr(this,n,i),s=a/this._stepSizeDays-this._interpolationOrder/2|0;s<0&&(s=0);var u=o/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;u>=this._totalSamples&&(u=this._totalSamples-1);for(var l=s/this._samplesPerXysFile|0,f=u/this._samplesPerXysFile|0,d=[],c=l;c<=f;++c)d.push(zr(this,c));return t.when.all(d)},Fr.prototype.computeXysRadians=function(e,r,n){var i=jr(this,e,r);if(!(i<0)){var a=i/this._stepSizeDays|0;if(!(a>=this._totalSamples)){var o=this._interpolationOrder,s=a-(o/2|0);s<0&&(s=0);var u=s+o;u>=this._totalSamples&&(u=this._totalSamples-1,s=u-o,s<0&&(s=0));var l=!1,f=this._samples;if(t.defined(f[3*s])||(zr(this,s/this._samplesPerXysFile|0),l=!0),t.defined(f[3*u])||(zr(this,u/this._samplesPerXysFile|0),l=!0),!l){t.defined(n)?(n.x=0,n.y=0,n.s=0):n=new Nr(0,0,0);var d,c,h=i-s*this._stepSizeDays,p=this._work,m=this._denominators,y=this._coef,v=this._xTable;for(d=0;d<=o;++d)p[d]=h-v[d];for(d=0;d<=o;++d){for(y[d]=1,c=0;c<=o;++c)c!==d&&(y[d]*=p[c]);y[d]*=m[d];var w=3*(s+d);n.x+=y[d]*f[w++],n.y+=y[d]*f[w++],n.s+=y[d]*f[w]}return n}}}};var Lr={},Vr={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Br={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Wr={},Yr={east:new n.Cartesian3,north:new n.Cartesian3,up:new n.Cartesian3,west:new n.Cartesian3,south:new n.Cartesian3,down:new n.Cartesian3},Jr=new n.Cartesian3,Hr=new n.Cartesian3,Xr=new n.Cartesian3;Lr.localFrameToFixedFrameGenerator=function(e,o){if(!Vr.hasOwnProperty(e)||!Vr[e].hasOwnProperty(o))throw new r.DeveloperError("firstAxis and secondAxis must be east, north, up, west, south or down.");var s,u=Vr[e][o],l=e+o;return t.defined(Wr[l])?s=Wr[l]:(s=function(s,l,f){if(!t.defined(s))throw new r.DeveloperError("origin is required.");if(t.defined(f)||(f=new a.Matrix4),n.Cartesian3.equalsEpsilon(s,n.Cartesian3.ZERO,n.CesiumMath.EPSILON14))n.Cartesian3.unpack(Br[e],0,Jr),n.Cartesian3.unpack(Br[o],0,Hr),n.Cartesian3.unpack(Br[u],0,Xr);else if(n.CesiumMath.equalsEpsilon(s.x,0,n.CesiumMath.EPSILON14)&&n.CesiumMath.equalsEpsilon(s.y,0,n.CesiumMath.EPSILON14)){var d=n.CesiumMath.sign(s.z);n.Cartesian3.unpack(Br[e],0,Jr),"east"!==e&&"west"!==e&&n.Cartesian3.multiplyByScalar(Jr,d,Jr),n.Cartesian3.unpack(Br[o],0,Hr),"east"!==o&&"west"!==o&&n.Cartesian3.multiplyByScalar(Hr,d,Hr),n.Cartesian3.unpack(Br[u],0,Xr),"east"!==u&&"west"!==u&&n.Cartesian3.multiplyByScalar(Xr,d,Xr)}else{l=t.defaultValue(l,i.Ellipsoid.WGS84),l.geodeticSurfaceNormal(s,Yr.up);var c=Yr.up,h=Yr.east;h.x=-s.y,h.y=s.x,h.z=0,n.Cartesian3.normalize(h,Yr.east),n.Cartesian3.cross(c,h,Yr.north),n.Cartesian3.multiplyByScalar(Yr.up,-1,Yr.down),n.Cartesian3.multiplyByScalar(Yr.east,-1,Yr.west),n.Cartesian3.multiplyByScalar(Yr.north,-1,Yr.south),Jr=Yr[e],Hr=Yr[o],Xr=Yr[u]}return f[0]=Jr.x,f[1]=Jr.y,f[2]=Jr.z,f[3]=0,f[4]=Hr.x,f[5]=Hr.y,f[6]=Hr.z,f[7]=0,f[8]=Xr.x,f[9]=Xr.y,f[10]=Xr.z,f[11]=0,f[12]=s.x,f[13]=s.y,f[14]=s.z,f[15]=1,f},Wr[l]=s),s},Lr.eastNorthUpToFixedFrame=Lr.localFrameToFixedFrameGenerator("east","north"),Lr.northEastDownToFixedFrame=Lr.localFrameToFixedFrameGenerator("north","east"),Lr.northUpEastToFixedFrame=Lr.localFrameToFixedFrameGenerator("north","up"),Lr.northWestUpToFixedFrame=Lr.localFrameToFixedFrameGenerator("north","west");var Gr=new G,Zr=new n.Cartesian3(1,1,1),Qr=new a.Matrix4;Lr.headingPitchRollToFixedFrame=function(e,i,o,s,u){r.Check.typeOf.object("HeadingPitchRoll",i),s=t.defaultValue(s,Lr.eastNorthUpToFixedFrame);var l=G.fromHeadingPitchRoll(i,Gr),f=a.Matrix4.fromTranslationQuaternionRotationScale(n.Cartesian3.ZERO,l,Zr,Qr);return u=s(e,o,u),a.Matrix4.multiply(u,f,u)};var Kr=new a.Matrix4,$r=new a.Matrix3;Lr.headingPitchRollQuaternion=function(e,t,n,i,o){r.Check.typeOf.object("HeadingPitchRoll",t);var s=Lr.headingPitchRollToFixedFrame(e,t,n,i,Kr),u=a.Matrix4.getMatrix3(s,$r);return G.fromRotationMatrix(u,o)};var en=new n.Cartesian3(1,1,1),tn=new n.Cartesian3,rn=new a.Matrix4,nn=new a.Matrix4,an=new a.Matrix3,on=new G;Lr.fixedFrameToHeadingPitchRoll=function(e,o,s,u){r.Check.defined("transform",e),o=t.defaultValue(o,i.Ellipsoid.WGS84),s=t.defaultValue(s,Lr.eastNorthUpToFixedFrame),t.defined(u)||(u=new br);var l=a.Matrix4.getTranslation(e,tn);if(n.Cartesian3.equals(l,n.Cartesian3.ZERO))return u.heading=0,u.pitch=0,u.roll=0,u;var f=a.Matrix4.inverseTransformation(s(l,o,rn),rn),d=a.Matrix4.setScale(e,en,nn);d=a.Matrix4.setTranslation(d,n.Cartesian3.ZERO,d),f=a.Matrix4.multiply(f,d,f);var c=G.fromRotationMatrix(a.Matrix4.getMatrix3(f,an),on);return c=G.normalize(c,c),br.fromQuaternion(c,u)};var sn=24110.54841,un=8640184.812866,ln=.093104,fn=-62e-7,dn=11772758384668e-32,cn=72921158553e-15,hn=n.CesiumMath.TWO_PI/86400,pn=new et;Lr.computeTemeToPseudoFixedMatrix=function(e,i){if(!t.defined(e))throw new r.DeveloperError("date is required.");pn=et.addSeconds(e,-et.computeTaiMinusUtc(e),pn);var o,s=pn.dayNumber,u=pn.secondsOfDay,l=s-2451545;o=u>=43200?(l+.5)/Me.DAYS_PER_JULIAN_CENTURY:(l-.5)/Me.DAYS_PER_JULIAN_CENTURY;var f=sn+o*(un+o*(ln+o*fn)),d=f*hn%n.CesiumMath.TWO_PI,c=cn+dn*(s-2451545.5),h=(u+.5*Me.SECONDS_PER_DAY)%Me.SECONDS_PER_DAY,p=d+c*h,m=Math.cos(p),y=Math.sin(p);return t.defined(i)?(i[0]=m,i[1]=-y,i[2]=0,i[3]=y,i[4]=m,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i):new a.Matrix3(m,y,0,-y,m,0,0,0,1)},Lr.iau2006XysData=new Fr,Lr.earthOrientationParameters=Cr.NONE;var mn=32.184,yn=2451545;Lr.preloadIcrfFixed=function(e){var r=e.start.dayNumber,n=e.start.secondsOfDay+mn,i=e.stop.dayNumber,a=e.stop.secondsOfDay+mn,o=Lr.iau2006XysData.preload(r,n,i,a),s=Lr.earthOrientationParameters.getPromiseToLoad();return t.when.all([o,s])},Lr.computeIcrfToFixedMatrix=function(e,n){if(!t.defined(e))throw new r.DeveloperError("date is required.");t.defined(n)||(n=new a.Matrix3);var i=Lr.computeFixedToIcrfMatrix(e,n);if(t.defined(i))return a.Matrix3.transpose(i,n)};var vn=new Nr(0,0,0),wn=new De(0,0,0,0,0,0),Cn=new a.Matrix3,gn=new a.Matrix3;Lr.computeFixedToIcrfMatrix=function(e,i){if(!t.defined(e))throw new r.DeveloperError("date is required.");t.defined(i)||(i=new a.Matrix3);var o=Lr.earthOrientationParameters.compute(e,wn);if(t.defined(o)){var s=e.dayNumber,u=e.secondsOfDay+mn,l=Lr.iau2006XysData.computeXysRadians(s,u,vn);if(t.defined(l)){var f=l.x+o.xPoleOffset,d=l.y+o.yPoleOffset,c=1/(1+Math.sqrt(1-f*f-d*d)),h=Cn;h[0]=1-c*f*f,h[3]=-c*f*d,h[6]=f,h[1]=-c*f*d,h[4]=1-c*d*d,h[7]=d,h[2]=-f,h[5]=-d,h[8]=1-c*(f*f+d*d);var p=a.Matrix3.fromRotationZ(-l.s,gn),m=a.Matrix3.multiply(h,p,Cn),y=e.dayNumber,v=e.secondsOfDay-et.computeTaiMinusUtc(e)+o.ut1MinusUtc,w=y-2451545,C=v/Me.SECONDS_PER_DAY,g=.779057273264+C+.00273781191135448*(w+C);g=g%1*n.CesiumMath.TWO_PI;var E=a.Matrix3.fromRotationZ(g,gn),O=a.Matrix3.multiply(m,E,Cn),_=Math.cos(o.xPoleWander),x=Math.cos(o.yPoleWander),b=Math.sin(o.xPoleWander),D=Math.sin(o.yPoleWander),q=s-yn+u/Me.SECONDS_PER_DAY;q/=36525;var A=-47e-6*q*n.CesiumMath.RADIANS_PER_DEGREE/3600,S=Math.cos(A),R=Math.sin(A),T=gn;return T[0]=_*S,T[1]=_*R,T[2]=b,T[3]=-x*R+D*b*S,T[4]=x*S+D*b*R,T[5]=-D*_,T[6]=-D*R-x*b*S,T[7]=D*S-x*b*R,T[8]=x*_,a.Matrix3.multiply(O,T,i)}}};var En=new a.Cartesian4;Lr.pointToWindowCoordinates=function(e,t,r,n){return n=Lr.pointToGLWindowCoordinates(e,t,r,n),n.y=2*t[5]-n.y,n},Lr.pointToGLWindowCoordinates=function(e,n,o,s){if(!t.defined(e))throw new r.DeveloperError("modelViewProjectionMatrix is required.");if(!t.defined(n))throw new r.DeveloperError("viewportTransformation is required.");if(!t.defined(o))throw new r.DeveloperError("point is required.");t.defined(s)||(s=new i.Cartesian2);var u=En;return a.Matrix4.multiplyByVector(e,a.Cartesian4.fromElements(o.x,o.y,o.z,1,u),u),a.Cartesian4.multiplyByScalar(u,1/u.w,u),a.Matrix4.multiplyByVector(n,u,u),i.Cartesian2.fromCartesian4(u,s)};var On=new n.Cartesian3,_n=new n.Cartesian3,xn=new n.Cartesian3;Lr.rotationMatrixFromPositionVelocity=function(e,o,s,u){if(!t.defined(e))throw new r.DeveloperError("position is required.");if(!t.defined(o))throw new r.DeveloperError("velocity is required.");var l=t.defaultValue(s,i.Ellipsoid.WGS84).geodeticSurfaceNormal(e,On),f=n.Cartesian3.cross(o,l,_n);n.Cartesian3.equalsEpsilon(f,n.Cartesian3.ZERO,n.CesiumMath.EPSILON6)&&(f=n.Cartesian3.clone(n.Cartesian3.UNIT_X,f));var d=n.Cartesian3.cross(f,o,xn);return n.Cartesian3.normalize(d,d),n.Cartesian3.cross(o,d,f),n.Cartesian3.negate(f,f),n.Cartesian3.normalize(f,f),t.defined(u)||(u=new a.Matrix3),u[0]=o.x,u[1]=o.y,u[2]=o.z,u[3]=f.x,u[4]=f.y,u[5]=f.z,u[6]=d.x,u[7]=d.y,u[8]=d.z,u};var bn=new a.Matrix4(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),Dn=new i.Cartographic,qn=new n.Cartesian3,An=new n.Cartesian3,Sn=new a.Matrix3,Rn=new a.Matrix4,Tn=new a.Matrix4;Lr.basisTo2D=function(e,i,o){if(!t.defined(e))throw new r.DeveloperError("projection is required.");if(!t.defined(i))throw new r.DeveloperError("matrix is required.");if(!t.defined(o))throw new r.DeveloperError("result is required.");var s=a.Matrix4.getTranslation(i,An),u=e.ellipsoid,l=u.cartesianToCartographic(s,Dn),f=e.project(l,qn);n.Cartesian3.fromElements(f.z,f.x,f.y,f);var d=Lr.eastNorthUpToFixedFrame(s,u,Rn),c=a.Matrix4.inverseTransformation(d,Tn),h=a.Matrix4.getMatrix3(i,Sn),p=a.Matrix4.multiplyByMatrix3(c,h,o);return a.Matrix4.multiply(bn,p,o),a.Matrix4.setTranslation(o,f,o),o},Lr.wgs84To2DModelMatrix=function(e,i,o){if(!t.defined(e))throw new r.DeveloperError("projection is required.");if(!t.defined(i))throw new r.DeveloperError("center is required.");if(!t.defined(o))throw new r.DeveloperError("result is required.");var s=e.ellipsoid,u=Lr.eastNorthUpToFixedFrame(i,s,Rn),l=a.Matrix4.inverseTransformation(u,Tn),f=s.cartesianToCartographic(i,Dn),d=e.project(f,qn);n.Cartesian3.fromElements(d.z,d.x,d.y,d);var c=a.Matrix4.fromTranslation(d,Rn);return a.Matrix4.multiply(bn,l,o),a.Matrix4.multiply(c,o,o),o},e.FeatureDetection=X,e.Intersect=D,e.Quaternion=G,e.Resource=ur,e.Transforms=Lr,e.buildModuleUrl=Ur}));