define(["exports","./when-45f3d25d","./Cartesian3-ef6ea826","./Cartesian2-a652b463","./EllipsoidTangentPlane-dd3d1016","./PolygonPipeline-28c8c9d7","./PolylinePipeline-e4210f09"],(function(e,i,t,n,r,o,a){"use strict";var l={};function s(e,i){return t.CesiumMath.equalsEpsilon(e.latitude,i.latitude,t.CesiumMath.EPSILON14)&&t.CesiumMath.equalsEpsilon(e.longitude,i.longitude,t.CesiumMath.EPSILON14)}var h=new n.Cartographic,g=new n.Cartographic,d=new Array(2),p=new Array(2),P={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};l.computePositions=function(e,l,u,c,f,v){var y=function(e,t,r,o){var a=t.length;if(!(a<2)){var l=i.defined(o),d=i.defined(r),p=!0,P=new Array(a),u=new Array(a),c=new Array(a),f=t[0];P[0]=f;var v=e.cartesianToCartographic(f,h);d&&(v.height=r[0]),p=p&&v.height<=0,u[0]=v.height,c[0]=l?o[0]:0;for(var y=1,m=1;m<a;++m){var C=t[m],A=e.cartesianToCartographic(C,g);d&&(A.height=r[m]),p=p&&A.height<=0,s(v,A)?v.height<A.height&&(u[y-1]=A.height):(P[y]=C,u[y]=A.height,c[y]=l?o[m]:0,n.Cartographic.clone(A,v),++y)}if(!(p||y<2))return P.length=y,u.length=y,c.length=y,{positions:P,topHeights:u,bottomHeights:c}}}(e,l,u,c);if(i.defined(y)){if(l=y.positions,u=y.topHeights,c=y.bottomHeights,l.length>=3){var m=r.EllipsoidTangentPlane.fromPoints(l,e).projectPointsOntoPlane(l);o.PolygonPipeline.computeWindingOrder2D(m)===o.WindingOrder.CLOCKWISE&&(l.reverse(),u.reverse(),c.reverse())}var C,A,w=l.length,E=w-2,O=t.CesiumMath.chordLength(f,e.maximumRadius),b=P;if(b.minDistance=O,b.ellipsoid=e,v){var L,M=0;for(L=0;L<w-1;L++)M+=a.PolylinePipeline.numberOfPoints(l[L],l[L+1],O)+1;C=new Float64Array(3*M),A=new Float64Array(3*M);var F=d,H=p;b.positions=F,b.height=H;var T=0;for(L=0;L<w-1;L++){F[0]=l[L],F[1]=l[L+1],H[0]=u[L],H[1]=u[L+1];var W=a.PolylinePipeline.generateArc(b);C.set(W,T),H[0]=c[L],H[1]=c[L+1],A.set(a.PolylinePipeline.generateArc(b),T),T+=W.length}}else b.positions=l,b.height=u,C=new Float64Array(a.PolylinePipeline.generateArc(b)),b.height=c,A=new Float64Array(a.PolylinePipeline.generateArc(b));return{bottomPositions:A,topPositions:C,numCorners:E}}},e.WallGeometryLibrary=l}));