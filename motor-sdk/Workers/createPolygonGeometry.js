define(["./when-45f3d25d","./Check-34538dad","./Cartesian3-e69091b9","./Cartesian2-7a44370a","./BoundingSphere-bacc5cb6","./Matrix4-c65e6a1b","./RuntimeError-86da6af2","./Rectangle-c7d55cfa","./WebGLConstants-3660bc8f","./ComponentDatatype-86703c58","./GeometryAttribute-70b679fd","./PrimitiveType-30fa6f85","./Transforms-7d49a8ab","./GeometryAttributes-9d45f9e2","./AttributeCompression-1e177d5e","./GeometryPipeline-57d51dc8","./EncodedCartesian3-7b803d4a","./IndexDatatype-e52361bd","./IntersectionTests-8855da40","./Plane-1875afb4","./GeometryOffsetAttribute-f755a5cb","./VertexFormat-a00562ee","./GeometryInstance-734856d8","./arrayRemoveDuplicates-24a803e7","./BoundingRectangle-c7afec11","./EllipsoidTangentPlane-3e14dd4d","./ArcType-39be7a32","./EllipsoidRhumbLine-4bc7760a","./PolygonPipeline-d22f3330","./PolygonGeometryLibrary-c7aa9cd4","./EllipsoidGeodesic-1d7258d7"],(function(e,t,r,a,o,i,n,s,l,p,u,c,y,m,d,h,g,f,v,b,P,w,C,_,T,A,x,E,I,G,O){"use strict";var D=new a.Cartographic,H=new a.Cartographic;function L(e,t,r,a){var o=a.cartesianToCartographic(e,D),i=o.height,n=a.cartesianToCartographic(t,H);n.height=i,a.cartographicToCartesian(n,t);var s=a.cartesianToCartographic(r,H);s.height=i-100,a.cartographicToCartesian(s,r)}var V=new T.BoundingRectangle,F=new r.Cartesian3,N=new r.Cartesian3,R=new r.Cartesian3,M=new r.Cartesian3,S=new r.Cartesian3,B=new r.Cartesian3,k=new r.Cartesian3,z=new r.Cartesian3,U=new r.Cartesian3,W=new a.Cartesian2,Y=new a.Cartesian2,j=new r.Cartesian3,Q=new y.Quaternion,q=new i.Matrix3,K=new i.Matrix3;function Z(t){var o=t.vertexFormat,n=t.geometry,s=t.shadowVolume,l=n.attributes.position.values,c=l.length,m=t.wall,d=t.top||m,h=t.bottom||m;if(o.st||o.normal||o.tangent||o.bitangent||s){var g=t.boundingRectangle,f=t.tangentPlane,v=t.ellipsoid,b=t.stRotation,w=t.perPositionHeight,C=W;C.x=g.x,C.y=g.y;var _,T=o.st?new Float32Array(c/3*2):void 0;o.normal&&(_=w&&d&&!m?n.attributes.normal.values:new Float32Array(c));var A=o.tangent?new Float32Array(c):void 0,x=o.bitangent?new Float32Array(c):void 0,E=s?new Float32Array(c):void 0,I=0,G=0,O=N,D=R,H=M,V=!0,Z=q,J=K;if(0!==b){var X=y.Quaternion.fromAxisAngle(f._plane.normal,b,Q);Z=i.Matrix3.fromQuaternion(X,Z),X=y.Quaternion.fromAxisAngle(f._plane.normal,-b,Q),J=i.Matrix3.fromQuaternion(X,J)}else Z=i.Matrix3.clone(i.Matrix3.IDENTITY,Z),J=i.Matrix3.clone(i.Matrix3.IDENTITY,J);var $=0,ee=0;d&&h&&($=c/2,ee=c/3,c/=2);for(var te=0;te<c;te+=3){var re=r.Cartesian3.fromArray(l,te,j);if(o.st){var ae=i.Matrix3.multiplyByVector(Z,re,F);ae=v.scaleToGeodeticSurface(ae,ae);var oe=f.projectPointOntoPlane(ae,Y);a.Cartesian2.subtract(oe,C,oe);var ie=r.CesiumMath.clamp(oe.x/g.width,0,1),ne=r.CesiumMath.clamp(oe.y/g.height,0,1);h&&(T[I+ee]=ie,T[I+1+ee]=ne),d&&(T[I]=ie,T[I+1]=ne),I+=2}if(o.normal||o.tangent||o.bitangent||s){var se=G+1,le=G+2;if(m){if(te+3<c){var pe=r.Cartesian3.fromArray(l,te+3,S);if(V){var ue=r.Cartesian3.fromArray(l,te+c,B);w&&L(re,pe,ue,v),r.Cartesian3.subtract(pe,re,pe),r.Cartesian3.subtract(ue,re,ue),O=r.Cartesian3.normalize(r.Cartesian3.cross(ue,pe,O),O),V=!1}r.Cartesian3.equalsEpsilon(pe,re,r.CesiumMath.EPSILON10)&&(V=!0)}(o.tangent||o.bitangent)&&(H=v.geodeticSurfaceNormal(re,H),o.tangent&&(D=r.Cartesian3.normalize(r.Cartesian3.cross(H,O,D),D)))}else O=v.geodeticSurfaceNormal(re,O),(o.tangent||o.bitangent)&&(w&&(k=r.Cartesian3.fromArray(_,G,k),z=r.Cartesian3.cross(r.Cartesian3.UNIT_Z,k,z),z=r.Cartesian3.normalize(i.Matrix3.multiplyByVector(J,z,z),z),o.bitangent&&(U=r.Cartesian3.normalize(r.Cartesian3.cross(k,z,U),U))),D=r.Cartesian3.cross(r.Cartesian3.UNIT_Z,O,D),D=r.Cartesian3.normalize(i.Matrix3.multiplyByVector(J,D,D),D),o.bitangent&&(H=r.Cartesian3.normalize(r.Cartesian3.cross(O,D,H),H)));o.normal&&(t.wall?(_[G+$]=O.x,_[se+$]=O.y,_[le+$]=O.z):h&&(_[G+$]=-O.x,_[se+$]=-O.y,_[le+$]=-O.z),(d&&!w||m)&&(_[G]=O.x,_[se]=O.y,_[le]=O.z)),s&&(m&&(O=v.geodeticSurfaceNormal(re,O)),E[G+$]=-O.x,E[se+$]=-O.y,E[le+$]=-O.z),o.tangent&&(t.wall?(A[G+$]=D.x,A[se+$]=D.y,A[le+$]=D.z):h&&(A[G+$]=-D.x,A[se+$]=-D.y,A[le+$]=-D.z),d&&(w?(A[G]=z.x,A[se]=z.y,A[le]=z.z):(A[G]=D.x,A[se]=D.y,A[le]=D.z))),o.bitangent&&(h&&(x[G+$]=H.x,x[se+$]=H.y,x[le+$]=H.z),d&&(w?(x[G]=U.x,x[se]=U.y,x[le]=U.z):(x[G]=H.x,x[se]=H.y,x[le]=H.z))),G+=3}}o.st&&(n.attributes.st=new u.GeometryAttribute({componentDatatype:p.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:T})),o.normal&&(n.attributes.normal=new u.GeometryAttribute({componentDatatype:p.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:_})),o.tangent&&(n.attributes.tangent=new u.GeometryAttribute({componentDatatype:p.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:A})),o.bitangent&&(n.attributes.bitangent=new u.GeometryAttribute({componentDatatype:p.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:x})),s&&(n.attributes.extrudeDirection=new u.GeometryAttribute({componentDatatype:p.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:E}))}if(t.extrude&&e.defined(t.offsetAttribute)){var ce=l.length/3,ye=new Uint8Array(ce);if(t.offsetAttribute===P.GeometryOffsetAttribute.TOP)d&&h||m?ye=P.arrayFill(ye,1,0,ce/2):d&&(ye=P.arrayFill(ye,1));else{var me=t.offsetAttribute===P.GeometryOffsetAttribute.NONE?0:1;ye=P.arrayFill(ye,me)}n.attributes.applyOffset=new u.GeometryAttribute({componentDatatype:p.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:ye})}return n}var J=new a.Cartographic,X=new a.Cartographic,$={westOverIDL:0,eastOverIDL:0},ee=new O.EllipsoidGeodesic;function te(t,a,o,i,n){if(n=e.defaultValue(n,new s.Rectangle),!e.defined(t)||t.length<3)return n.west=0,n.north=0,n.south=0,n.east=0,n;if(o===x.ArcType.RHUMB)return s.Rectangle.fromCartesianArray(t,a,n);ee.ellipsoid.equals(a)||(ee=new O.EllipsoidGeodesic(void 0,void 0,a)),n.west=Number.POSITIVE_INFINITY,n.east=Number.NEGATIVE_INFINITY,n.south=Number.POSITIVE_INFINITY,n.north=Number.NEGATIVE_INFINITY,$.westOverIDL=Number.POSITIVE_INFINITY,$.eastOverIDL=Number.NEGATIVE_INFINITY;for(var l,p=1/r.CesiumMath.chordLength(i,a.maximumRadius),u=t.length,c=a.cartesianToCartographic(t[0],X),y=J,m=1;m<u;m++)l=y,y=c,c=a.cartesianToCartographic(t[m],l),ee.setEndPoints(y,c),ae(ee,p,n,$);return l=y,y=c,c=a.cartesianToCartographic(t[0],l),ee.setEndPoints(y,c),ae(ee,p,n,$),n.east-n.west>$.eastOverIDL-$.westOverIDL&&(n.west=$.westOverIDL,n.east=$.eastOverIDL,n.east>r.CesiumMath.PI&&(n.east=n.east-r.CesiumMath.TWO_PI),n.west>r.CesiumMath.PI&&(n.west=n.west-r.CesiumMath.TWO_PI)),n}var re=new a.Cartographic;function ae(e,t,a,o){for(var i=e.surfaceDistance,n=Math.ceil(i*t),s=n>0?i/(n-1):Number.POSITIVE_INFINITY,l=0,p=0;p<n;p++){var u=e.interpolateUsingSurfaceDistance(l,re);l+=s;var c=u.longitude,y=u.latitude;a.west=Math.min(a.west,c),a.east=Math.max(a.east,c),a.south=Math.min(a.south,y),a.north=Math.max(a.north,y);var m=c>=0?c:c+r.CesiumMath.TWO_PI;o.westOverIDL=Math.min(o.westOverIDL,m),o.eastOverIDL=Math.max(o.eastOverIDL,m)}}var oe=[];function ie(e,t,r,a,o,i,n,s,l){var p,u={walls:[]};if(i||n){var c,y,m=G.PolygonGeometryLibrary.createGeometryFromPositions(e,t,r,o,s,l),d=m.attributes.position.values,h=m.indices;if(i&&n){var g=d.concat(d);c=g.length/3,y=f.IndexDatatype.createTypedArray(c,2*h.length),y.set(h);var v=h.length,b=c/2;for(p=0;p<v;p+=3){var P=y[p]+b,w=y[p+1]+b,_=y[p+2]+b;y[p+v]=_,y[p+1+v]=w,y[p+2+v]=P}if(m.attributes.position.values=g,o&&s.normal){var T=m.attributes.normal.values;m.attributes.normal.values=new Float32Array(g.length),m.attributes.normal.values.set(T)}m.indices=y}else if(n){for(c=d.length/3,y=f.IndexDatatype.createTypedArray(c,h.length),p=0;p<h.length;p+=3)y[p]=h[p+2],y[p+1]=h[p+1],y[p+2]=h[p];m.indices=y}u.topAndBottom=new C.GeometryInstance({geometry:m})}var x=a.outerRing,E=A.EllipsoidTangentPlane.fromPoints(x,e),O=E.projectPointsOntoPlane(x,oe),D=I.PolygonPipeline.computeWindingOrder2D(O);D===I.WindingOrder.CLOCKWISE&&(x=x.slice().reverse());var H=G.PolygonGeometryLibrary.computeWallGeometry(x,e,r,o,l);u.walls.push(new C.GeometryInstance({geometry:H}));var L=a.holes;for(p=0;p<L.length;p++){var V=L[p];E=A.EllipsoidTangentPlane.fromPoints(V,e),O=E.projectPointsOntoPlane(V,oe),D=I.PolygonPipeline.computeWindingOrder2D(O),D===I.WindingOrder.COUNTER_CLOCKWISE&&(V=V.slice().reverse()),H=G.PolygonGeometryLibrary.computeWallGeometry(V,e,r,o,l),u.walls.push(new C.GeometryInstance({geometry:H}))}return u}function ne(o){if(t.Check.typeOf.object("options",o),t.Check.typeOf.object("options.polygonHierarchy",o.polygonHierarchy),e.defined(o.perPositionHeight)&&o.perPositionHeight&&e.defined(o.height))throw new t.DeveloperError("Cannot use both options.perPositionHeight and options.height");if(e.defined(o.arcType)&&o.arcType!==x.ArcType.GEODESIC&&o.arcType!==x.ArcType.RHUMB)throw new t.DeveloperError("Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB.");var i=o.polygonHierarchy,n=e.defaultValue(o.vertexFormat,w.VertexFormat.DEFAULT),s=e.defaultValue(o.ellipsoid,a.Ellipsoid.WGS84),l=e.defaultValue(o.granularity,r.CesiumMath.RADIANS_PER_DEGREE),p=e.defaultValue(o.stRotation,0),u=e.defaultValue(o.perPositionHeight,!1),c=u&&e.defined(o.extrudedHeight),y=e.defaultValue(o.height,0),m=e.defaultValue(o.extrudedHeight,y);if(!c){var d=Math.max(y,m);m=Math.min(y,m),y=d}this._vertexFormat=w.VertexFormat.clone(n),this._ellipsoid=a.Ellipsoid.clone(s),this._granularity=l,this._stRotation=p,this._height=y,this._extrudedHeight=m,this._closeTop=e.defaultValue(o.closeTop,!0),this._closeBottom=e.defaultValue(o.closeBottom,!0),this._polygonHierarchy=i,this._perPositionHeight=u,this._perPositionHeightExtrude=c,this._shadowVolume=e.defaultValue(o.shadowVolume,!1),this._workerName="createPolygonGeometry",this._offsetAttribute=o.offsetAttribute,this._arcType=e.defaultValue(o.arcType,x.ArcType.GEODESIC),this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0,this.packedLength=G.PolygonGeometryLibrary.computeHierarchyPackedLength(i)+a.Ellipsoid.packedLength+w.VertexFormat.packedLength+12}ne.fromPositions=function(r){r=e.defaultValue(r,e.defaultValue.EMPTY_OBJECT),t.Check.defined("options.positions",r.positions);var a={polygonHierarchy:{positions:r.positions},height:r.height,extrudedHeight:r.extrudedHeight,vertexFormat:r.vertexFormat,stRotation:r.stRotation,ellipsoid:r.ellipsoid,granularity:r.granularity,perPositionHeight:r.perPositionHeight,closeTop:r.closeTop,closeBottom:r.closeBottom,offsetAttribute:r.offsetAttribute,arcType:r.arcType};return new ne(a)},ne.createBorderLine=function(e){let t,a,i=e.positions,n=e.height;if(!0===e.compressPlane){let e=1/0;i.forEach((t=>{e=Math.min(e,t.z)})),t=i.map((t=>new r.Cartesian3(t.x,t.y,e+n))),a=i.map((t=>new r.Cartesian3(t.x,t.y,e)))}else t=i.map((e=>new r.Cartesian3(e.x,e.y,e.z+n))),a=i.map((e=>new r.Cartesian3(e.x,e.y,e.z)));let s=[...a,...t],l=[];s.forEach((e=>{l.push(e.x,e.y,e.z)}));let y=[];t.pop(),t.forEach(((e,t)=>{y.push(t,t+1)})),y.push(t.length,0);let d=a.length,h=y.map((e=>e+d));y.push(...h),h.forEach((e=>{y.push(e-d,e)}));let g=o.BoundingSphere.fromPoints(i),f=new u.Geometry({attributes:new m.GeometryAttributes({position:new u.GeometryAttribute({values:new Float64Array(l),componentsPerAttribute:3,componentDatatype:p.ComponentDatatype.DOUBLE})}),indices:new Uint16Array(y),primitiveType:c.PrimitiveType.LINES,boundingSphere:g});return console.log(f),f},ne.fromPositionsPlaneMode=function(e){let t,a,i=e.positions,n=e.height,s=new Array(2*i.length);i.forEach(((e,t)=>{s[2*t]=e.x,s[2*t+1]=e.y}));let l=I.earcut(s);if(!0===e.compressPlane){let e=1/0;i.forEach((t=>{e=Math.min(e,t.z)})),t=i.map((t=>new r.Cartesian3(t.x,t.y,e+n))),a=i.map((t=>new r.Cartesian3(t.x,t.y,e)))}else t=i.map((e=>new r.Cartesian3(e.x,e.y,e.z+n))),a=i.map((e=>new r.Cartesian3(e.x,e.y,e.z)));let y=[...a],d=[...l.slice().reverse()];if(e.height){let e=a.length;a.forEach(((t,r)=>{r+1===e?d.push(r,0,e,r,e,r+e):d.push(r,r+1,r+e+1,r,r+e+1,r+e)})),y.push(...t);let r=l.map((t=>t+e));d.push(...r)}let h=new Array(3*y.length);y.forEach(((e,t)=>{h[3*t]=e.x,h[3*t+1]=e.y,h[3*t+2]=e.z}));let g=o.BoundingSphere.fromPoints(i),f=new u.Geometry({attributes:new m.GeometryAttributes({position:new u.GeometryAttribute({values:new Float64Array(h),componentsPerAttribute:3,componentDatatype:p.ComponentDatatype.DOUBLE})}),indices:new Uint16Array(d),primitiveType:c.PrimitiveType.TRIANGLES,boundingSphere:g});return f},ne.pack=function(r,o,i){return t.Check.typeOf.object("value",r),t.Check.defined("array",o),i=e.defaultValue(i,0),i=G.PolygonGeometryLibrary.packPolygonHierarchy(r._polygonHierarchy,o,i),a.Ellipsoid.pack(r._ellipsoid,o,i),i+=a.Ellipsoid.packedLength,w.VertexFormat.pack(r._vertexFormat,o,i),i+=w.VertexFormat.packedLength,o[i++]=r._height,o[i++]=r._extrudedHeight,o[i++]=r._granularity,o[i++]=r._stRotation,o[i++]=r._perPositionHeightExtrude?1:0,o[i++]=r._perPositionHeight?1:0,o[i++]=r._closeTop?1:0,o[i++]=r._closeBottom?1:0,o[i++]=r._shadowVolume?1:0,o[i++]=e.defaultValue(r._offsetAttribute,-1),o[i++]=r._arcType,o[i]=r.packedLength,o};var se=a.Ellipsoid.clone(a.Ellipsoid.UNIT_SPHERE),le=new w.VertexFormat,pe={polygonHierarchy:{}};function ue(e){var t=-e._stRotation;if(0===t)return[0,0,0,1,1,0];var r=e._ellipsoid,a=e._polygonHierarchy.positions,o=e.rectangle;return u.Geometry._textureCoordinateRotationPoints(a,t,r,o)}function ce(t,r){return e.defined(r)&&(t=ne.unpack(t,r)),t._ellipsoid=a.Ellipsoid.clone(t._ellipsoid),ne.createGeometry(t)}return ne.unpack=function(r,o,i){t.Check.defined("array",r),o=e.defaultValue(o,0);var n=G.PolygonGeometryLibrary.unpackPolygonHierarchy(r,o);o=n.startingIndex,delete n.startingIndex;var s=a.Ellipsoid.unpack(r,o,se);o+=a.Ellipsoid.packedLength;var l=w.VertexFormat.unpack(r,o,le);o+=w.VertexFormat.packedLength;var p=r[o++],u=r[o++],c=r[o++],y=r[o++],m=1===r[o++],d=1===r[o++],h=1===r[o++],g=1===r[o++],f=1===r[o++],v=r[o++],b=r[o++],P=r[o];return e.defined(i)||(i=new ne(pe)),i._polygonHierarchy=n,i._ellipsoid=a.Ellipsoid.clone(s,i._ellipsoid),i._vertexFormat=w.VertexFormat.clone(l,i._vertexFormat),i._height=p,i._extrudedHeight=u,i._granularity=c,i._stRotation=y,i._perPositionHeightExtrude=m,i._perPositionHeight=d,i._closeTop=h,i._closeBottom=g,i._shadowVolume=f,i._offsetAttribute=-1===v?void 0:v,i._arcType=b,i.packedLength=P,i},ne.computeRectangle=function(o,i){t.Check.typeOf.object("options",o),t.Check.typeOf.object("options.polygonHierarchy",o.polygonHierarchy);var n=e.defaultValue(o.granularity,r.CesiumMath.RADIANS_PER_DEGREE),s=e.defaultValue(o.arcType,x.ArcType.GEODESIC);if(s!==x.ArcType.GEODESIC&&s!==x.ArcType.RHUMB)throw new t.DeveloperError("Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB.");var l=o.polygonHierarchy,p=e.defaultValue(o.ellipsoid,a.Ellipsoid.WGS84);return te(l.positions,p,s,n,i)},ne.createGeometry=function(t){var a=t._vertexFormat,i=t._ellipsoid,n=t._granularity,s=t._stRotation,l=t._polygonHierarchy,c=t._perPositionHeight,y=t._closeTop,m=t._closeBottom,d=t._arcType,g=l.positions;if(!(g.length<3)){var v=A.EllipsoidTangentPlane.fromPoints(g,i),b=G.PolygonGeometryLibrary.polygonsFromHierarchy(l,v.projectPointsOntoPlane.bind(v),!c,i),w=b.hierarchy,_=b.polygons;if(0!==w.length){g=w[0].outerRing;var T,x=G.PolygonGeometryLibrary.computeBoundingRectangle(v.plane.normal,v.projectPointOntoPlane.bind(v),g,s,V),E=[],O=t._height,D=t._extrudedHeight,H=t._perPositionHeightExtrude||!r.CesiumMath.equalsEpsilon(O,D,0,r.CesiumMath.EPSILON2),L={perPositionHeight:c,vertexFormat:a,geometry:void 0,tangentPlane:v,boundingRectangle:x,ellipsoid:i,stRotation:s,bottom:!1,top:!0,wall:!1,extrude:!1,arcType:d};if(H)for(L.extrude=!0,L.top=y,L.bottom=m,L.shadowVolume=t._shadowVolume,L.offsetAttribute=t._offsetAttribute,T=0;T<_.length;T++){var F,N=ie(i,_[T],n,w[T],c,y,m,a,d);y&&m?(F=N.topAndBottom,L.geometry=G.PolygonGeometryLibrary.scaleToGeodeticHeightExtruded(F.geometry,O,D,i,c)):y?(F=N.topAndBottom,F.geometry.attributes.position.values=I.PolygonPipeline.scaleToGeodeticHeight(F.geometry.attributes.position.values,O,i,!c),L.geometry=F.geometry):m&&(F=N.topAndBottom,F.geometry.attributes.position.values=I.PolygonPipeline.scaleToGeodeticHeight(F.geometry.attributes.position.values,D,i,!0),L.geometry=F.geometry),(y||m)&&(L.wall=!1,F.geometry=Z(L),E.push(F));var R=N.walls;L.wall=!0;for(var M=0;M<R.length;M++){var S=R[M];L.geometry=G.PolygonGeometryLibrary.scaleToGeodeticHeightExtruded(S.geometry,O,D,i,c),S.geometry=Z(L),E.push(S)}}else for(T=0;T<_.length;T++){var B=new C.GeometryInstance({geometry:G.PolygonGeometryLibrary.createGeometryFromPositions(i,_[T],n,c,a,d)});if(B.geometry.attributes.position.values=I.PolygonPipeline.scaleToGeodeticHeight(B.geometry.attributes.position.values,O,i,!c),L.geometry=B.geometry,B.geometry=Z(L),e.defined(t._offsetAttribute)){var k=B.geometry.attributes.position.values.length,z=new Uint8Array(k/3),U=t._offsetAttribute===P.GeometryOffsetAttribute.NONE?0:1;P.arrayFill(z,U),B.geometry.attributes.applyOffset=new u.GeometryAttribute({componentDatatype:p.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:z})}E.push(B)}var W=h.GeometryPipeline.combineInstances(E)[0];W.attributes.position.values=new Float64Array(W.attributes.position.values),W.indices=f.IndexDatatype.createTypedArray(W.attributes.position.values.length/3,W.indices);var Y=W.attributes,j=o.BoundingSphere.fromVertices(Y.position.values);return a.position||delete Y.position,new u.Geometry({attributes:Y,indices:W.indices,primitiveType:W.primitiveType,boundingSphere:j,offsetAttribute:t._offsetAttribute})}}},ne.createShadowVolume=function(e,t,r){var a=e._granularity,o=e._ellipsoid,i=t(a,o),n=r(a,o);return new ne({polygonHierarchy:e._polygonHierarchy,ellipsoid:o,stRotation:e._stRotation,granularity:a,perPositionHeight:!1,extrudedHeight:i,height:n,vertexFormat:w.VertexFormat.POSITION_ONLY,shadowVolume:!0,arcType:e._arcType})},Object.defineProperties(ne.prototype,{rectangle:{get:function(){if(!e.defined(this._rectangle)){var t=this._polygonHierarchy.positions;this._rectangle=te(t,this._ellipsoid,this._arcType,this._granularity)}return this._rectangle}},textureCoordinateRotationPoints:{get:function(){return e.defined(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=ue(this)),this._textureCoordinateRotationPoints}}}),ce}));