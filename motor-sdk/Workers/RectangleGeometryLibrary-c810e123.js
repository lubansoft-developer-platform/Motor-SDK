define(["exports","./when-52cea266","./Check-ee5dd8a8","./Cartesian2-7c55a82d","./Rectangle-88e14f21","./BoundingSphere-f5553fb7","./GeometryAttribute-60495dd3"],(function(t,n,a,e,r,o,s){"use strict";var i=Math.cos,h=Math.sin,g=Math.sqrt,u={computePosition:function(t,a,e,r,o,s,u){var c=a.radiiSquared,C=t.nwCorner,l=t.boundingRectangle,d=C.latitude-t.granYCos*r+o*t.granXSin,S=i(d),w=h(d),M=c.z*w,m=C.longitude+r*t.granYSin+o*t.granXCos,R=S*i(m),X=S*h(m),Y=c.x*R,p=c.y*X,v=g(Y*R+p*X+M*w);if(s.x=Y/v,s.y=p/v,s.z=M/v,e){var O=t.stNwCorner;n.defined(O)?(d=O.latitude-t.stGranYCos*r+o*t.stGranXSin,m=O.longitude+r*t.stGranYSin+o*t.stGranXCos,u.x=(m-t.stWest)*t.lonScalar,u.y=(d-t.stSouth)*t.latScalar):(u.x=(m-l.west)*t.lonScalar,u.y=(d-l.south)*t.latScalar)}}},c=new s.Matrix2,C=new e.Cartesian3,l=new r.Cartographic,d=new e.Cartesian3,S=new o.GeographicProjection;function w(t,n,a,r,o,i,h){var g=Math.cos(n),u=r*g,l=a*g,w=Math.sin(n),M=r*w,m=a*w;C=S.project(t,C),C=e.Cartesian3.subtract(C,d,C);var R=s.Matrix2.fromRotation(n,c);C=s.Matrix2.multiplyByVector(R,C,C),C=e.Cartesian3.add(C,d,C),t=S.unproject(C,t),i-=1,h-=1;var X=t.latitude,Y=X+i*m,p=X-u*h,v=X-u*h+i*m,O=Math.max(X,Y,p,v),f=Math.min(X,Y,p,v),_=t.longitude,G=_+i*l,x=_+h*M,P=_+h*M+i*l,W=Math.max(_,G,x,P),y=Math.min(_,G,x,P);return{north:O,south:f,east:W,west:y,granYCos:u,granYSin:M,granXCos:l,granXSin:m,nwCorner:t}}u.computeOptions=function(t,n,o,s,i,h,g){var u,c,C,M,m,R=t.east,X=t.west,Y=t.north,p=t.south,v=!1,O=!1;Y===e.CesiumMath.PI_OVER_TWO&&(v=!0),p===-e.CesiumMath.PI_OVER_TWO&&(O=!0);var f=Y-p;m=X>R?e.CesiumMath.TWO_PI-X+R:R-X,u=Math.ceil(m/n)+1,c=Math.ceil(f/n)+1,C=m/(u-1),M=f/(c-1);var _=r.Rectangle.northwest(t,h),G=r.Rectangle.center(t,l);0===o&&0===s||(G.longitude<_.longitude&&(G.longitude+=e.CesiumMath.TWO_PI),d=S.project(G,d));var x=M,P=C,W=0,y=0,I=r.Rectangle.clone(t,i),T={granYCos:x,granYSin:W,granXCos:P,granXSin:y,nwCorner:_,boundingRectangle:I,width:u,height:c,northCap:v,southCap:O};if(0!==o){var E=w(_,o,C,M,G,u,c);if(Y=E.north,p=E.south,R=E.east,X=E.west,Y<-e.CesiumMath.PI_OVER_TWO||Y>e.CesiumMath.PI_OVER_TWO||p<-e.CesiumMath.PI_OVER_TWO||p>e.CesiumMath.PI_OVER_TWO)throw new a.DeveloperError("Rotated rectangle is invalid.  It crosses over either the north or south pole.");T.granYCos=E.granYCos,T.granYSin=E.granYSin,T.granXCos=E.granXCos,T.granXSin=E.granXSin,I.north=Y,I.south=p,I.east=R,I.west=X}if(0!==s){o-=s;var V=r.Rectangle.northwest(I,g),b=w(V,o,C,M,G,u,c);T.stGranYCos=b.granYCos,T.stGranXCos=b.granXCos,T.stGranYSin=b.granYSin,T.stGranXSin=b.granXSin,T.stNwCorner=V,T.stWest=b.west,T.stSouth=b.south}return T},t.RectangleGeometryLibrary=u}));