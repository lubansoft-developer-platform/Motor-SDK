define(["exports","./when-45f3d25d","./Check-34538dad","./Cartesian3-e69091b9","./Matrix4-c65e6a1b"],(function(e,t,n,a,r){"use strict";function o(e,t){if(n.Check.typeOf.object("normal",e),!a.CesiumMath.equalsEpsilon(a.Cartesian3.magnitude(e),1,a.CesiumMath.EPSILON6))throw new n.DeveloperError("normal must be normalized.");n.Check.typeOf.number("distance",t),this.normal=a.Cartesian3.clone(e),this.distance=t}o.fromPointNormal=function(e,r,i){if(n.Check.typeOf.object("point",e),n.Check.typeOf.object("normal",r),!a.CesiumMath.equalsEpsilon(a.Cartesian3.magnitude(r),1,a.CesiumMath.EPSILON6))throw new n.DeveloperError("normal must be normalized.");var c=-a.Cartesian3.dot(r,e);return t.defined(i)?(a.Cartesian3.clone(r,i.normal),i.distance=c,i):new o(r,c)};var i=new a.Cartesian3;o.fromCartesian4=function(e,r){n.Check.typeOf.object("coefficients",e);var c=a.Cartesian3.fromCartesian4(e,i),s=e.w;return t.defined(r)?(a.Cartesian3.clone(c,r.normal),r.distance=s,r):new o(c,s)},o.getPointDistance=function(e,t){return n.Check.typeOf.object("plane",e),n.Check.typeOf.object("point",t),a.Cartesian3.dot(e.normal,t)+e.distance};var c=new a.Cartesian3;o.projectPointOntoPlane=function(e,r,i){n.Check.typeOf.object("plane",e),n.Check.typeOf.object("point",r),t.defined(i)||(i=new a.Cartesian3);var s=o.getPointDistance(e,r),l=a.Cartesian3.multiplyByScalar(e.normal,s,c);return a.Cartesian3.subtract(r,l,i)},o.projectPointsOntoPlane=function(e,a,r){n.Check.typeOf.object("plane",e),n.Check.typeOf.object("array",a),t.defined(r)||(r=[]);for(let t=0;t<a.length;t++)r[t]=o.projectPointOntoPlane(e,a[t]);return r};var s=new a.Cartesian3;o.transform=function(e,t,c){return n.Check.typeOf.object("plane",e),n.Check.typeOf.object("transform",t),r.Matrix4.multiplyByPointAsVector(t,e.normal,i),a.Cartesian3.normalize(i,i),a.Cartesian3.multiplyByScalar(e.normal,-e.distance,s),r.Matrix4.multiplyByPoint(t,s,s),o.fromPointNormal(s,i,c)},o.clone=function(e,r){return n.Check.typeOf.object("plane",e),t.defined(r)?(a.Cartesian3.clone(e.normal,r.normal),r.distance=e.distance,r):new o(e.normal,e.distance)},o.equals=function(e,t){return n.Check.typeOf.object("left",e),n.Check.typeOf.object("right",t),e.distance===t.distance&&a.Cartesian3.equals(e.normal,t.normal)},o.ORIGIN_XY_PLANE=Object.freeze(new o(a.Cartesian3.UNIT_Z,0)),o.ORIGIN_YZ_PLANE=Object.freeze(new o(a.Cartesian3.UNIT_X,0)),o.ORIGIN_ZX_PLANE=Object.freeze(new o(a.Cartesian3.UNIT_Y,0)),o.prototype.projectPointsOntoPlane=function(e,t){return o.projectPointsOntoPlane(this,e,t)},e.Plane=o}));