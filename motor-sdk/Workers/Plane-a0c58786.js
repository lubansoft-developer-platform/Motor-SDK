define(["exports","./when-45f3d25d","./Check-34538dad","./Cartesian3-ef6ea826","./Matrix4-f54b529f"],(function(n,t,e,a,r){"use strict";function i(n,t){this.normal=a.Cartesian3.clone(n),this.distance=t}i.fromPointNormal=function(n,e,r){var o=-a.Cartesian3.dot(e,n);return t.defined(r)?(a.Cartesian3.clone(e,r.normal),r.distance=o,r):new i(e,o)};var o=new a.Cartesian3;i.fromCartesian4=function(n,e){var r=a.Cartesian3.fromCartesian4(n,o),s=n.w;return t.defined(e)?(a.Cartesian3.clone(r,e.normal),e.distance=s,e):new i(r,s)},i.getIntersectWithLineSegment=function(n,t,e){let r=a.Cartesian3.dot(n.normal,t)-n.distance;if(r*(a.Cartesian3.dot(n.normal,e)-n.distance)<=0){a.Cartesian3.subtract(t,e,o),a.Cartesian3.normalize(o,o);let i=a.Cartesian3.dot(o,n.normal);return a.Cartesian3.multiplyByScalar(o,-r/i,o),a.Cartesian3.add(o,t,new a.Cartesian3)}},i.getPointDistance=function(n,t){return a.Cartesian3.dot(n.normal,t)+n.distance};var s=new a.Cartesian3;i.projectPointOntoPlane=function(n,e,r){t.defined(r)||(r=new a.Cartesian3);var o=i.getPointDistance(n,e),c=a.Cartesian3.multiplyByScalar(n.normal,o,s);return a.Cartesian3.subtract(e,c,r)},i.projectPointsOntoPlane=function(n,e,a){t.defined(a)||(a=[]);for(let t=0;t<e.length;t++)a[t]=i.projectPointOntoPlane(n,e[t],a[t]);return a};var c=new a.Cartesian3;i.transform=function(n,t,e){return r.Matrix4.multiplyByPointAsVector(t,n.normal,o),a.Cartesian3.normalize(o,o),a.Cartesian3.multiplyByScalar(n.normal,-n.distance,c),r.Matrix4.multiplyByPoint(t,c,c),i.fromPointNormal(c,o,e)},i.clone=function(n,e){return t.defined(e)?(a.Cartesian3.clone(n.normal,e.normal),e.distance=n.distance,e):new i(n.normal,n.distance)},i.equals=function(n,t){return n.distance===t.distance&&a.Cartesian3.equals(n.normal,t.normal)},i.ORIGIN_XY_PLANE=Object.freeze(new i(a.Cartesian3.UNIT_Z,0)),i.ORIGIN_YZ_PLANE=Object.freeze(new i(a.Cartesian3.UNIT_X,0)),i.ORIGIN_ZX_PLANE=Object.freeze(new i(a.Cartesian3.UNIT_Y,0)),i.prototype.projectPointsOntoPlane=function(n,t){return i.projectPointsOntoPlane(this,n,t)},i.fromPositions=function(n){if(n.length<3)throw new Error("\u8bf7\u8f93\u5165\u81f3\u5c11\u4e09\u4e2a\u70b9");let t=n[0],e=n[1],r=n[2],o=a.Cartesian3.subtract(t,e,new a.Cartesian3),s=a.Cartesian3.subtract(t,r,new a.Cartesian3),c=a.Cartesian3.cross(o,s,s);return i.fromPointNormal(a.Cartesian3.clone(t,o),c)},n.Plane=i}));