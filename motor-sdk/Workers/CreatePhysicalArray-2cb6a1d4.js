define(["exports","./when-45f3d25d","./Cartesian3-ef6ea826","./Matrix4-f54b529f","./PrimitiveType-30fa6f85"],(function(e,a,r,t,i){"use strict";class n{}var l=new r.Cartesian3,f=new t.Matrix4,o=new r.Cartesian3;function d(e,r,t,i,n){var l,f=a.defined(t)&&t.length>0;for(e.SetPtValNum(r.length,f),l=0;l<r.length;++l)e.SetPtValVal(l,r[l]);if(f)for(l=0;l<t.length;++l)e.SetBatchIdVal(l,t[l]);if(a.defined(i)&&i.length>0){var o=a.defined(n)&&n.length>0;for(e.SetIndexNum(i.length,o),l=0;l<i.length;++l)e.SetIndexVal(l,i[l]);if(o)for(l=0;l<n.length;++l)e.SetEdgeCheckVal(l,n[l])}else e.InitIndexByPt()}n.createPhysicalArrayFromTerrain=function(e,i,n,S,h){n=a.defined(n)?n:r.Cartesian3.ZERO,r.Cartesian3.negate(n,l),t.Matrix4.fromTranslation(l,f);for(var s=new Float32Array(3*S.length),y=0,g=0;g<S.length;++g){var v=S[g];t.Matrix4.multiplyByPoint(f,v,o),s[y++]=o.x,s[y++]=o.y,s[y++]=o.z}var p=new e.LBSpaPrimitive;d(p,s,void 0,h,void 0);var u=i.CreateTriangleSpatial(p),c=new e.LBSpaSerial;c.WriteSpatial(u);for(var w=new Uint8Array(c.GetBufferSize()),B=0;B<w.length;++B)w[B]=c.GetBufferVal(B);return e.destroy(c),e.destroy(u),w},n.createPhysicalArrayFromModel=function(e,a,r,t,n,l,f){var o,S=new e.LBSpaPrimitive;d(S,t,n,l,f),o=i.PrimitiveType.LINES===r?a.CreateStepLineSpatial(S):a.CreateTriangleSpatial(S);var h=new e.LBSpaSerial;h.WriteSpatial(o);for(var s=new Uint8Array(h.GetBufferSize()),y=0;y<s.length;++y)s[y]=h.GetBufferVal(y);return e.destroy(h),e.destroy(o),s},e.CreatePhysicalArray=n}));