define(["./when-45f3d25d","./Check-34538dad","./Cartesian3-ef6ea826","./Cartesian2-a652b463","./BoundingSphere-038d5fbc","./Transforms-c8a82813","./Matrix4-f54b529f","./RuntimeError-86da6af2","./WebGLConstants-3660bc8f","./ComponentDatatype-d28c2e26","./GeometryAttribute-dfebcc43","./PrimitiveType-30fa6f85","./GeometryAttributes-9d45f9e2","./IndexDatatype-6d2070e9","./IntersectionTests-b186d985","./Plane-a0c58786","./GeometryOffsetAttribute-dae9c424","./VertexFormat-06aa4e32","./arrayRemoveDuplicates-e5b24eaf","./AxisAlignedBoundingBox-9187558e","./EllipsoidTangentPlane-dd3d1016","./EllipsoidRhumbLine-0c6cd7c8","./PolygonPipeline-28c8c9d7","./PolylineVolumeGeometryLibrary-78e26dc0","./EllipsoidGeodesic-1abfd38d","./PolylinePipeline-e4210f09","./CorridorGeometryLibrary-5e3b6e3e"],(function(t,e,r,a,i,o,n,s,l,d,u,m,f,y,p,c,h,g,C,b,v,A,_,w,T,G,E){"use strict";var V=new r.Cartesian3,x=new r.Cartesian3,F=new r.Cartesian3,L=new r.Cartesian3,P=new r.Cartesian3,N=new r.Cartesian3,D=new r.Cartesian3,M=new r.Cartesian3;function O(t,e){for(var r=0;r<t.length;r++)t[r]=e.scaleToGeodeticSurface(t[r],t[r]);return t}function I(t,e,a,i,o,n){var s=t.normals,l=t.tangents,d=t.bitangents,u=r.Cartesian3.normalize(r.Cartesian3.cross(a,e,D),D);n.normal&&E.CorridorGeometryLibrary.addAttribute(s,e,i,o),n.tangent&&E.CorridorGeometryLibrary.addAttribute(l,u,i,o),n.bitangent&&E.CorridorGeometryLibrary.addAttribute(d,a,i,o)}function S(e,a,i){var o,n,s,l=e.positions,m=e.corners,p=e.endPositions,c=e.lefts,h=e.normals,g=new f.GeometryAttributes,C=0,b=0,v=0;for(n=0;n<l.length;n+=2)C+=s=l[n].length-3,v+=2*s,b+=l[n+1].length-3;for(C+=3,b+=3,n=0;n<m.length;n++){o=m[n];var A=m[n].leftPositions;t.defined(A)?(C+=s=A.length,v+=s):(b+=s=m[n].rightPositions.length,v+=s)}var _,w=t.defined(p);w&&(C+=_=p[0].length-3,b+=_,v+=6*(_/=3));var T,G,P,O,S,R,k=C+b,H=new Float64Array(k),z={normals:a.normal?new Float32Array(k):void 0,tangents:a.tangent?new Float32Array(k):void 0,bitangents:a.bitangent?new Float32Array(k):void 0},B=0,U=k-1,Y=V,W=x,q=_/2,J=y.IndexDatatype.createTypedArray(k/3,v),j=0;if(w){R=F,S=L;var K=p[0];for(Y=r.Cartesian3.fromArray(h,0,Y),W=r.Cartesian3.fromArray(c,0,W),n=0;n<q;n++)R=r.Cartesian3.fromArray(K,3*(q-1-n),R),S=r.Cartesian3.fromArray(K,3*(q+n),S),E.CorridorGeometryLibrary.addAttribute(H,S,B),E.CorridorGeometryLibrary.addAttribute(H,R,void 0,U),I(z,Y,W,B,U,a),O=1+(G=B/3),P=(T=(U-2)/3)-1,J[j++]=T,J[j++]=G,J[j++]=P,J[j++]=P,J[j++]=G,J[j++]=O,B+=3,U-=3}var Q,X,Z=0,$=0,tt=l[Z++],et=l[Z++];for(H.set(tt,B),H.set(et,U-et.length+1),W=r.Cartesian3.fromArray(c,$,W),s=et.length-3,n=0;n<s;n+=3)Q=i.geodeticSurfaceNormal(r.Cartesian3.fromArray(tt,n,D),D),X=i.geodeticSurfaceNormal(r.Cartesian3.fromArray(et,s-n,M),M),I(z,Y=r.Cartesian3.normalize(r.Cartesian3.add(Q,X,Y),Y),W,B,U,a),O=1+(G=B/3),P=(T=(U-2)/3)-1,J[j++]=T,J[j++]=G,J[j++]=P,J[j++]=P,J[j++]=G,J[j++]=O,B+=3,U-=3;for(Q=i.geodeticSurfaceNormal(r.Cartesian3.fromArray(tt,s,D),D),X=i.geodeticSurfaceNormal(r.Cartesian3.fromArray(et,s,M),M),Y=r.Cartesian3.normalize(r.Cartesian3.add(Q,X,Y),Y),$+=3,n=0;n<m.length;n++){var rt,at,it,ot=(o=m[n]).leftPositions,nt=o.rightPositions,st=N,lt=F,dt=L;if(Y=r.Cartesian3.fromArray(h,$,Y),t.defined(ot)){for(I(z,Y,W,void 0,U,a),U-=3,at=O,it=P,rt=0;rt<ot.length/3;rt++)st=r.Cartesian3.fromArray(ot,3*rt,st),J[j++]=at,J[j++]=it-rt-1,J[j++]=it-rt,E.CorridorGeometryLibrary.addAttribute(H,st,void 0,U),lt=r.Cartesian3.fromArray(H,3*(it-rt-1),lt),dt=r.Cartesian3.fromArray(H,3*at,dt),I(z,Y,W=r.Cartesian3.normalize(r.Cartesian3.subtract(lt,dt,W),W),void 0,U,a),U-=3;st=r.Cartesian3.fromArray(H,3*at,st),lt=r.Cartesian3.subtract(r.Cartesian3.fromArray(H,3*it,lt),st,lt),dt=r.Cartesian3.subtract(r.Cartesian3.fromArray(H,3*(it-rt),dt),st,dt),I(z,Y,W=r.Cartesian3.normalize(r.Cartesian3.add(lt,dt,W),W),B,void 0,a),B+=3}else{for(I(z,Y,W,B,void 0,a),B+=3,at=P,it=O,rt=0;rt<nt.length/3;rt++)st=r.Cartesian3.fromArray(nt,3*rt,st),J[j++]=at,J[j++]=it+rt,J[j++]=it+rt+1,E.CorridorGeometryLibrary.addAttribute(H,st,B),lt=r.Cartesian3.fromArray(H,3*at,lt),dt=r.Cartesian3.fromArray(H,3*(it+rt),dt),I(z,Y,W=r.Cartesian3.normalize(r.Cartesian3.subtract(lt,dt,W),W),B,void 0,a),B+=3;st=r.Cartesian3.fromArray(H,3*at,st),lt=r.Cartesian3.subtract(r.Cartesian3.fromArray(H,3*(it+rt),lt),st,lt),dt=r.Cartesian3.subtract(r.Cartesian3.fromArray(H,3*it,dt),st,dt),I(z,Y,W=r.Cartesian3.normalize(r.Cartesian3.negate(r.Cartesian3.add(dt,lt,W),W),W),void 0,U,a),U-=3}for(tt=l[Z++],et=l[Z++],tt.splice(0,3),et.splice(et.length-3,3),H.set(tt,B),H.set(et,U-et.length+1),s=et.length-3,$+=3,W=r.Cartesian3.fromArray(c,$,W),rt=0;rt<et.length;rt+=3)Q=i.geodeticSurfaceNormal(r.Cartesian3.fromArray(tt,rt,D),D),X=i.geodeticSurfaceNormal(r.Cartesian3.fromArray(et,s-rt,M),M),I(z,Y=r.Cartesian3.normalize(r.Cartesian3.add(Q,X,Y),Y),W,B,U,a),G=(O=B/3)-1,T=1+(P=(U-2)/3),J[j++]=T,J[j++]=G,J[j++]=P,J[j++]=P,J[j++]=G,J[j++]=O,B+=3,U-=3;B-=3,U+=3}if(I(z,Y=r.Cartesian3.fromArray(h,h.length-3,Y),W,B,U,a),w){B+=3,U-=3,R=F,S=L;var ut=p[1];for(n=0;n<q;n++)R=r.Cartesian3.fromArray(ut,3*(_-n-1),R),S=r.Cartesian3.fromArray(ut,3*n,S),E.CorridorGeometryLibrary.addAttribute(H,R,void 0,U),E.CorridorGeometryLibrary.addAttribute(H,S,B),I(z,Y,W,B,U,a),G=(O=B/3)-1,T=1+(P=(U-2)/3),J[j++]=T,J[j++]=G,J[j++]=P,J[j++]=P,J[j++]=G,J[j++]=O,B+=3,U-=3}if(g.position=new u.GeometryAttribute({componentDatatype:d.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:H}),a.st){var mt,ft,yt=new Float32Array(k/3*2),pt=0;if(w){C/=3,b/=3;var ct,ht=Math.PI/(_+1);ft=1/(C-_+1),mt=1/(b-_+1);var gt=_/2;for(n=gt+1;n<_+1;n++)ct=r.CesiumMath.PI_OVER_TWO+ht*n,yt[pt++]=mt*(1+Math.cos(ct)),yt[pt++]=.5*(1+Math.sin(ct));for(n=1;n<b-_+1;n++)yt[pt++]=n*mt,yt[pt++]=0;for(n=_;n>gt;n--)ct=r.CesiumMath.PI_OVER_TWO-n*ht,yt[pt++]=1-mt*(1+Math.cos(ct)),yt[pt++]=.5*(1+Math.sin(ct));for(n=gt;n>0;n--)ct=r.CesiumMath.PI_OVER_TWO-ht*n,yt[pt++]=1-ft*(1+Math.cos(ct)),yt[pt++]=.5*(1+Math.sin(ct));for(n=C-_;n>0;n--)yt[pt++]=n*ft,yt[pt++]=1;for(n=1;n<gt+1;n++)ct=r.CesiumMath.PI_OVER_TWO+ht*n,yt[pt++]=ft*(1+Math.cos(ct)),yt[pt++]=.5*(1+Math.sin(ct))}else{for(ft=1/((C/=3)-1),mt=1/((b/=3)-1),n=0;n<b;n++)yt[pt++]=n*mt,yt[pt++]=0;for(n=C;n>0;n--)yt[pt++]=(n-1)*ft,yt[pt++]=1}g.st=new u.GeometryAttribute({componentDatatype:d.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:yt})}return a.normal&&(g.normal=new u.GeometryAttribute({componentDatatype:d.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:z.normals})),a.tangent&&(g.tangent=new u.GeometryAttribute({componentDatatype:d.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:z.tangents})),a.bitangent&&(g.bitangent=new u.GeometryAttribute({componentDatatype:d.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:z.bitangents})),{attributes:g,indices:J}}function R(t,e,r){r[e++]=t[0],r[e++]=t[1],r[e++]=t[2];for(var a=3;a<t.length;a+=3){var i=t[a],o=t[a+1],n=t[a+2];r[e++]=i,r[e++]=o,r[e++]=n,r[e++]=i,r[e++]=o,r[e++]=n}return r[e++]=t[0],r[e++]=t[1],r[e++]=t[2],r}function k(e,a){var i=new g.VertexFormat({position:a.position,normal:a.normal||a.bitangent||e.shadowVolume,tangent:a.tangent,bitangent:a.normal||a.bitangent,st:a.st}),o=e.ellipsoid,n=S(E.CorridorGeometryLibrary.computePositions(e),i,o),s=e.height,l=e.extrudedHeight,m=n.attributes,f=n.indices,p=m.position.values,c=p.length,C=new Float64Array(6*c),b=new Float64Array(c);b.set(p);var v,A=new Float64Array(4*c);A=R(p=_.PolygonPipeline.scaleToGeodeticHeight(p,s,o),0,A),A=R(b=_.PolygonPipeline.scaleToGeodeticHeight(b,l,o),2*c,A),C.set(p),C.set(b,c),C.set(A,2*c),m.position.values=C,m=function(t,e){if(!(e.normal||e.tangent||e.bitangent||e.st))return t;var a,i,o=t.position.values;(e.normal||e.bitangent)&&(a=t.normal.values,i=t.bitangent.values);var n,s=t.position.values.length/18,l=3*s,d=2*s,u=2*l;if(e.normal||e.bitangent||e.tangent){var m=e.normal?new Float32Array(6*l):void 0,f=e.tangent?new Float32Array(6*l):void 0,y=e.bitangent?new Float32Array(6*l):void 0,p=V,c=x,h=F,g=L,C=P,b=N,v=u;for(n=0;n<l;n+=3){var A=v+u;p=r.Cartesian3.fromArray(o,n,p),c=r.Cartesian3.fromArray(o,n+l,c),h=r.Cartesian3.fromArray(o,(n+3)%l,h),c=r.Cartesian3.subtract(c,p,c),h=r.Cartesian3.subtract(h,p,h),g=r.Cartesian3.normalize(r.Cartesian3.cross(c,h,g),g),e.normal&&(E.CorridorGeometryLibrary.addAttribute(m,g,A),E.CorridorGeometryLibrary.addAttribute(m,g,A+3),E.CorridorGeometryLibrary.addAttribute(m,g,v),E.CorridorGeometryLibrary.addAttribute(m,g,v+3)),(e.tangent||e.bitangent)&&(b=r.Cartesian3.fromArray(a,n,b),e.bitangent&&(E.CorridorGeometryLibrary.addAttribute(y,b,A),E.CorridorGeometryLibrary.addAttribute(y,b,A+3),E.CorridorGeometryLibrary.addAttribute(y,b,v),E.CorridorGeometryLibrary.addAttribute(y,b,v+3)),e.tangent&&(C=r.Cartesian3.normalize(r.Cartesian3.cross(b,g,C),C),E.CorridorGeometryLibrary.addAttribute(f,C,A),E.CorridorGeometryLibrary.addAttribute(f,C,A+3),E.CorridorGeometryLibrary.addAttribute(f,C,v),E.CorridorGeometryLibrary.addAttribute(f,C,v+3))),v+=6}if(e.normal){for(m.set(a),n=0;n<l;n+=3)m[n+l]=-a[n],m[n+l+1]=-a[n+1],m[n+l+2]=-a[n+2];t.normal.values=m}else t.normal=void 0;if(e.bitangent?(y.set(i),y.set(i,l),t.bitangent.values=y):t.bitangent=void 0,e.tangent){var _=t.tangent.values;f.set(_),f.set(_,l),t.tangent.values=f}}if(e.st){var w=t.st.values,T=new Float32Array(6*d);T.set(w),T.set(w,d);for(var G=2*d,D=0;D<2;D++){for(T[G++]=w[0],T[G++]=w[1],n=2;n<d;n+=2){var M=w[n],O=w[n+1];T[G++]=M,T[G++]=O,T[G++]=M,T[G++]=O}T[G++]=w[0],T[G++]=w[1]}t.st.values=T}return t}(m,a);var w=c/3;if(e.shadowVolume){var T=m.normal.values;c=T.length;var G=new Float32Array(6*c);for(v=0;v<c;v++)T[v]=-T[v];G.set(T,c),G=R(T,4*c,G),m.extrudeDirection=new u.GeometryAttribute({componentDatatype:d.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:G}),a.normal||(m.normal=void 0)}if(t.defined(e.offsetAttribute)){var D=new Uint8Array(6*w);if(e.offsetAttribute===h.GeometryOffsetAttribute.TOP)D=h.arrayFill(D,1,0,w),D=h.arrayFill(D,1,2*w,4*w);else{var M=e.offsetAttribute===h.GeometryOffsetAttribute.NONE?0:1;D=h.arrayFill(D,M)}m.applyOffset=new u.GeometryAttribute({componentDatatype:d.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:D})}var O=f.length,I=w+w,k=y.IndexDatatype.createTypedArray(C.length/3,2*O+3*I);k.set(f);var H,z,B,U,Y=O;for(v=0;v<O;v+=3){var W=f[v],q=f[v+1],J=f[v+2];k[Y++]=J+w,k[Y++]=q+w,k[Y++]=W+w}for(v=0;v<I;v+=2)B=(H=v+I)+1,U=(z=H+I)+1,k[Y++]=H,k[Y++]=z,k[Y++]=B,k[Y++]=B,k[Y++]=z,k[Y++]=U;return{attributes:m,indices:k}}var H=new r.Cartesian3,z=new r.Cartesian3,B=new a.Cartographic;function U(t,e,a,i,o,n){var s=r.Cartesian3.subtract(e,t,H);r.Cartesian3.normalize(s,s);var l=a.geodeticSurfaceNormal(t,z),d=r.Cartesian3.cross(s,l,H);r.Cartesian3.multiplyByScalar(d,i,d);var u=o.latitude,m=o.longitude,f=n.latitude,y=n.longitude;r.Cartesian3.add(t,d,z),a.cartesianToCartographic(z,B);var p=B.latitude,c=B.longitude;u=Math.min(u,p),m=Math.min(m,c),f=Math.max(f,p),y=Math.max(y,c),r.Cartesian3.subtract(t,d,z),a.cartesianToCartographic(z,B),p=B.latitude,c=B.longitude,u=Math.min(u,p),m=Math.min(m,c),f=Math.max(f,p),y=Math.max(y,c),o.latitude=u,o.longitude=m,n.latitude=f,n.longitude=y}var Y=new r.Cartesian3,W=new r.Cartesian3,q=new a.Cartographic,J=new a.Cartographic;function j(e,i,o,n,s){e=O(e,i);var l=C.arrayRemoveDuplicates(e,r.Cartesian3.equalsEpsilon),d=l.length;if(d<2||o<=0)return new a.Rectangle;var u,m,f=.5*o;if(q.latitude=Number.POSITIVE_INFINITY,q.longitude=Number.POSITIVE_INFINITY,J.latitude=Number.NEGATIVE_INFINITY,J.longitude=Number.NEGATIVE_INFINITY,n===w.CornerType.ROUNDED){var y=l[0];r.Cartesian3.subtract(y,l[1],Y),r.Cartesian3.normalize(Y,Y),r.Cartesian3.multiplyByScalar(Y,f,Y),r.Cartesian3.add(y,Y,W),i.cartesianToCartographic(W,B),u=B.latitude,m=B.longitude,q.latitude=Math.min(q.latitude,u),q.longitude=Math.min(q.longitude,m),J.latitude=Math.max(J.latitude,u),J.longitude=Math.max(J.longitude,m)}for(var p=0;p<d-1;++p)U(l[p],l[p+1],i,f,q,J);var c=l[d-1];r.Cartesian3.subtract(c,l[d-2],Y),r.Cartesian3.normalize(Y,Y),r.Cartesian3.multiplyByScalar(Y,f,Y),r.Cartesian3.add(c,Y,W),U(c,W,i,f,q,J),n===w.CornerType.ROUNDED&&(i.cartesianToCartographic(W,B),u=B.latitude,m=B.longitude,q.latitude=Math.min(q.latitude,u),q.longitude=Math.min(q.longitude,m),J.latitude=Math.max(J.latitude,u),J.longitude=Math.max(J.longitude,m));var h=t.defined(s)?s:new a.Rectangle;return h.north=J.latitude,h.south=q.latitude,h.east=J.longitude,h.west=q.longitude,h}function K(e){var i=(e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT)).positions,o=e.width,n=t.defaultValue(e.height,0),s=t.defaultValue(e.extrudedHeight,n);this._positions=i,this._ellipsoid=a.Ellipsoid.clone(t.defaultValue(e.ellipsoid,a.Ellipsoid.WGS84)),this._vertexFormat=g.VertexFormat.clone(t.defaultValue(e.vertexFormat,g.VertexFormat.DEFAULT)),this._width=o,this._height=Math.max(n,s),this._extrudedHeight=Math.min(n,s),this._cornerType=t.defaultValue(e.cornerType,w.CornerType.ROUNDED),this._granularity=t.defaultValue(e.granularity,r.CesiumMath.RADIANS_PER_DEGREE),this._shadowVolume=t.defaultValue(e.shadowVolume,!1),this._workerName="createCorridorGeometry",this._offsetAttribute=e.offsetAttribute,this._rectangle=void 0,this.packedLength=1+i.length*r.Cartesian3.packedLength+a.Ellipsoid.packedLength+g.VertexFormat.packedLength+7}K.pack=function(e,i,o){o=t.defaultValue(o,0);var n=e._positions,s=n.length;i[o++]=s;for(var l=0;l<s;++l,o+=r.Cartesian3.packedLength)r.Cartesian3.pack(n[l],i,o);return a.Ellipsoid.pack(e._ellipsoid,i,o),o+=a.Ellipsoid.packedLength,g.VertexFormat.pack(e._vertexFormat,i,o),o+=g.VertexFormat.packedLength,i[o++]=e._width,i[o++]=e._height,i[o++]=e._extrudedHeight,i[o++]=e._cornerType,i[o++]=e._granularity,i[o++]=e._shadowVolume?1:0,i[o]=t.defaultValue(e._offsetAttribute,-1),i};var Q=a.Ellipsoid.clone(a.Ellipsoid.UNIT_SPHERE),X=new g.VertexFormat,Z={positions:void 0,ellipsoid:Q,vertexFormat:X,width:void 0,height:void 0,extrudedHeight:void 0,cornerType:void 0,granularity:void 0,shadowVolume:void 0,offsetAttribute:void 0};return K.unpack=function(e,i,o){i=t.defaultValue(i,0);for(var n=e[i++],s=new Array(n),l=0;l<n;++l,i+=r.Cartesian3.packedLength)s[l]=r.Cartesian3.unpack(e,i);var d=a.Ellipsoid.unpack(e,i,Q);i+=a.Ellipsoid.packedLength;var u=g.VertexFormat.unpack(e,i,X);i+=g.VertexFormat.packedLength;var m=e[i++],f=e[i++],y=e[i++],p=e[i++],c=e[i++],h=1===e[i++],C=e[i];return t.defined(o)?(o._positions=s,o._ellipsoid=a.Ellipsoid.clone(d,o._ellipsoid),o._vertexFormat=g.VertexFormat.clone(u,o._vertexFormat),o._width=m,o._height=f,o._extrudedHeight=y,o._cornerType=p,o._granularity=c,o._shadowVolume=h,o._offsetAttribute=-1===C?void 0:C,o):(Z.positions=s,Z.width=m,Z.height=f,Z.extrudedHeight=y,Z.cornerType=p,Z.granularity=c,Z.shadowVolume=h,Z.offsetAttribute=-1===C?void 0:C,new K(Z))},K.computeRectangle=function(e,r){var i=(e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT)).positions,o=e.width;return j(i,t.defaultValue(e.ellipsoid,a.Ellipsoid.WGS84),o,t.defaultValue(e.cornerType,w.CornerType.ROUNDED),r)},K.createGeometry=function(e){var a=e._positions,o=e._width,n=e._ellipsoid;a=O(a,n);var s=C.arrayRemoveDuplicates(a,r.Cartesian3.equalsEpsilon);if(!(s.length<2||o<=0)){var l,f=e._height,y=e._extrudedHeight,p=!r.CesiumMath.equalsEpsilon(f,y,0,r.CesiumMath.EPSILON2),c=e._vertexFormat,g={ellipsoid:n,positions:s,width:o,cornerType:e._cornerType,granularity:e._granularity,saveAttributes:!0};if(p)g.height=f,g.extrudedHeight=y,g.shadowVolume=e._shadowVolume,g.offsetAttribute=e._offsetAttribute,l=k(g,c);else if((l=S(E.CorridorGeometryLibrary.computePositions(g),c,n)).attributes.position.values=_.PolygonPipeline.scaleToGeodeticHeight(l.attributes.position.values,f,n),t.defined(e._offsetAttribute)){var b=e._offsetAttribute===h.GeometryOffsetAttribute.NONE?0:1,v=l.attributes.position.values.length,A=new Uint8Array(v/3);h.arrayFill(A,b),l.attributes.applyOffset=new u.GeometryAttribute({componentDatatype:d.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:A})}var w=l.attributes,T=i.BoundingSphere.fromVertices(w.position.values,void 0,3);return c.position||(l.attributes.position.values=void 0),new u.Geometry({attributes:w,indices:l.indices,primitiveType:m.PrimitiveType.TRIANGLES,boundingSphere:T,offsetAttribute:e._offsetAttribute})}},K.createShadowVolume=function(t,e,r){var a=t._granularity,i=t._ellipsoid,o=e(a,i),n=r(a,i);return new K({positions:t._positions,width:t._width,cornerType:t._cornerType,ellipsoid:i,granularity:a,extrudedHeight:o,height:n,vertexFormat:g.VertexFormat.POSITION_ONLY,shadowVolume:!0})},Object.defineProperties(K.prototype,{rectangle:{get:function(){return t.defined(this._rectangle)||(this._rectangle=j(this._positions,this._ellipsoid,this._width,this._cornerType)),this._rectangle}},textureCoordinateRotationPoints:{get:function(){return[0,0,0,1,1,0]}}}),function(e,r){return t.defined(r)&&(e=K.unpack(e,r)),e._ellipsoid=a.Ellipsoid.clone(e._ellipsoid),K.createGeometry(e)}}));