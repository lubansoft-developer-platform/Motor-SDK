define(["exports","./when-45f3d25d","./Check-34538dad","./Cartesian3-eab74dc0","./Cartesian2-174fefc1","./BoundingSphere-f4be5efa","./GeometryAttribute-f2192ebb"],(function(t,n,a,e,r,o,s){"use strict";var i=Math.cos,h=Math.sin,g=Math.sqrt,u={computePosition:function(t,a,e,r,o,s,u){var C=a.radiiSquared,c=t.nwCorner,l=t.boundingRectangle,d=c.latitude-t.granYCos*r+o*t.granXSin,S=i(d),w=h(d),M=C.z*w,m=c.longitude+r*t.granYSin+o*t.granXCos,f=S*i(m),X=S*h(m),Y=C.x*f,p=C.y*X,v=g(Y*f+p*X+M*w);if(s.x=Y/v,s.y=p/v,s.z=M/v,e){var O=t.stNwCorner;n.defined(O)?(d=O.latitude-t.stGranYCos*r+o*t.stGranXSin,m=O.longitude+r*t.stGranYSin+o*t.stGranXCos,u.x=(m-t.stWest)*t.lonScalar,u.y=(d-t.stSouth)*t.latScalar):(u.x=(m-l.west)*t.lonScalar,u.y=(d-l.south)*t.latScalar)}}},C=new s.Matrix2,c=new e.Cartesian3,l=new r.Cartographic,d=new e.Cartesian3,S=new o.GeographicProjection;function w(t,n,a,r,o,i,h){var g=Math.cos(n),u=r*g,l=a*g,w=Math.sin(n),M=r*w,m=a*w;c=S.project(t,c),c=e.Cartesian3.subtract(c,d,c);var f=s.Matrix2.fromRotation(n,C);c=s.Matrix2.multiplyByVector(f,c,c),c=e.Cartesian3.add(c,d,c),t=S.unproject(c,t),i-=1,h-=1;var X=t.latitude,Y=X+i*m,p=X-u*h,v=X-u*h+i*m,O=Math.max(X,Y,p,v),R=Math.min(X,Y,p,v),_=t.longitude,G=_+i*l,x=_+h*M,P=_+h*M+i*l,W=Math.max(_,G,x,P),b=Math.min(_,G,x,P);return{north:O,south:R,east:W,west:b,granYCos:u,granYSin:M,granXCos:l,granXSin:m,nwCorner:t}}u.computeOptions=function(t,n,o,s,i,h,g){var u,C,c,M,m,f=t.east,X=t.west,Y=t.north,p=t.south,v=!1,O=!1;Y===e.CesiumMath.PI_OVER_TWO&&(v=!0),p===-e.CesiumMath.PI_OVER_TWO&&(O=!0);var R=Y-p;m=X>f?e.CesiumMath.TWO_PI-X+f:f-X,u=Math.ceil(m/n)+1,C=Math.ceil(R/n)+1,c=m/(u-1),M=R/(C-1);var _=r.Rectangle.northwest(t,h),G=r.Rectangle.center(t,l);0===o&&0===s||(G.longitude<_.longitude&&(G.longitude+=e.CesiumMath.TWO_PI),d=S.project(G,d));var x=M,P=c,W=0,b=0,y=r.Rectangle.clone(t,i),I={granYCos:x,granYSin:W,granXCos:P,granXSin:b,nwCorner:_,boundingRectangle:y,width:u,height:C,northCap:v,southCap:O};if(0!==o){var T=w(_,o,c,M,G,u,C);if(Y=T.north,p=T.south,f=T.east,X=T.west,Y<-e.CesiumMath.PI_OVER_TWO||Y>e.CesiumMath.PI_OVER_TWO||p<-e.CesiumMath.PI_OVER_TWO||p>e.CesiumMath.PI_OVER_TWO)throw new a.DeveloperError("Rotated rectangle is invalid.  It crosses over either the north or south pole.");I.granYCos=T.granYCos,I.granYSin=T.granYSin,I.granXCos=T.granXCos,I.granXSin=T.granXSin,y.north=Y,y.south=p,y.east=f,y.west=X}if(0!==s){o-=s;var E=r.Rectangle.northwest(y,g),V=w(E,o,c,M,G,u,C);I.stGranYCos=V.granYCos,I.stGranXCos=V.granXCos,I.stGranYSin=V.granYSin,I.stGranXSin=V.granXSin,I.stNwCorner=E,I.stWest=V.west,I.stSouth=V.south}return I},t.RectangleGeometryLibrary=u}));