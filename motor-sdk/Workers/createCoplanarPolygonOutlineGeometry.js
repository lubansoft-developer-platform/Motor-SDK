define(["./when-45f3d25d","./Check-34538dad","./Cartesian3-eab74dc0","./Cartesian2-174fefc1","./BoundingSphere-37359cf8","./Transforms-6b57162d","./Matrix4-ed224189","./RuntimeError-86da6af2","./WebGLConstants-3660bc8f","./ComponentDatatype-86703c58","./GeometryAttribute-b1ed7c2e","./PrimitiveType-30fa6f85","./GeometryAttributes-9d45f9e2","./AttributeCompression-6e02a904","./GeometryPipeline-256cdc45","./EncodedCartesian3-ceea15a0","./IndexDatatype-cb635cbc","./IntersectionTests-a310845d","./Plane-87957166","./GeometryInstance-534c5b60","./arrayRemoveDuplicates-8b568181","./AxisAlignedBoundingBox-804b7aeb","./EllipsoidTangentPlane-37f60f7a","./OrientedBoundingBox-f9a274cd","./CoplanarPolygonGeometryLibrary-13b1e03c","./ArcType-39be7a32","./EllipsoidRhumbLine-de5cdc57","./PolygonPipeline-b585c3c1","./PolygonGeometryLibrary-7096145f"],(function(e,r,t,n,o,i,a,y,c,l,p,s,d,u,f,m,g,h,b,v,P,G,C,k,L,T,E,H,A){"use strict";function w(e){for(var r=e.length,t=new Float64Array(3*r),n=g.IndexDatatype.createTypedArray(r,2*r),o=0,i=0,a=0;a<r;a++){var y=e[a];t[o++]=y.x,t[o++]=y.y,t[o++]=y.z,n[i++]=a,n[i++]=(a+1)%r}var c=new d.GeometryAttributes({position:new p.GeometryAttribute({componentDatatype:l.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:t})});return new p.Geometry({attributes:c,indices:n,primitiveType:s.PrimitiveType.LINES})}function x(t){t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT);var n=t.polygonHierarchy;r.Check.defined("options.polygonHierarchy",n),this._polygonHierarchy=n,this._workerName="createCoplanarPolygonOutlineGeometry",this.packedLength=A.PolygonGeometryLibrary.computeHierarchyPackedLength(n)+1}x.fromPositions=function(t){t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT),r.Check.defined("options.positions",t.positions);var n={polygonHierarchy:{positions:t.positions}};return new x(n)},x.pack=function(t,n,o){return r.Check.typeOf.object("value",t),r.Check.defined("array",n),o=e.defaultValue(o,0),o=A.PolygonGeometryLibrary.packPolygonHierarchy(t._polygonHierarchy,n,o),n[o]=t.packedLength,n};var B={polygonHierarchy:{}};function I(r,t){return e.defined(t)&&(r=x.unpack(r,t)),r._ellipsoid=n.Ellipsoid.clone(r._ellipsoid),x.createGeometry(r)}return x.unpack=function(t,n,o){r.Check.defined("array",t),n=e.defaultValue(n,0);var i=A.PolygonGeometryLibrary.unpackPolygonHierarchy(t,n);n=i.startingIndex,delete i.startingIndex;var a=t[n];return e.defined(o)||(o=new x(B)),o._polygonHierarchy=i,o.packedLength=a,o},x.createGeometry=function(e){var r=e._polygonHierarchy,n=r.positions;if(n=P.arrayRemoveDuplicates(n,t.Cartesian3.equalsEpsilon,!0),!(n.length<3)){var i=L.CoplanarPolygonGeometryLibrary.validOutline(n);if(i){var a=A.PolygonGeometryLibrary.polygonOutlinesFromHierarchy(r,!1);if(0!==a.length){for(var y=[],c=0;c<a.length;c++){var l=new v.GeometryInstance({geometry:w(a[c])});y.push(l)}var s=f.GeometryPipeline.combineInstances(y)[0],d=o.BoundingSphere.fromPoints(r.positions);return new p.Geometry({attributes:s.attributes,indices:s.indices,primitiveType:s.primitiveType,boundingSphere:d})}}}},I}));