define(["./when-45f3d25d","./Check-34538dad","./Cartesian3-ef6ea826","./Cartesian2-a652b463","./BoundingSphere-038d5fbc","./Transforms-c8a82813","./Matrix4-f54b529f","./RuntimeError-86da6af2","./WebGLConstants-3660bc8f","./ComponentDatatype-d28c2e26","./GeometryAttribute-dfebcc43","./PrimitiveType-30fa6f85","./GeometryAttributes-9d45f9e2","./AttributeCompression-20de7c5b","./GeometryPipeline-f4ca2db7","./EncodedCartesian3-f0b88724","./IndexDatatype-6d2070e9","./IntersectionTests-b186d985","./Plane-a0c58786","./GeometryInstance-0849bfce","./arrayRemoveDuplicates-e5b24eaf","./AxisAlignedBoundingBox-9187558e","./EllipsoidTangentPlane-dd3d1016","./OrientedBoundingBox-91354f3d","./CoplanarPolygonGeometryLibrary-ae493d00","./ArcType-39be7a32","./EllipsoidRhumbLine-0c6cd7c8","./PolygonPipeline-28c8c9d7","./PolygonGeometryLibrary-887a96e9"],(function(e,r,t,n,o,i,a,y,l,c,p,d,s,u,m,f,g,b,h,P,v,G,L,C,T,E,k,A,H){"use strict";function w(e){for(var r=e.length,t=new Float64Array(3*r),n=g.IndexDatatype.createTypedArray(r,2*r),o=0,i=0,a=0;a<r;a++){var y=e[a];t[o++]=y.x,t[o++]=y.y,t[o++]=y.z,n[i++]=a,n[i++]=(a+1)%r}var l=new s.GeometryAttributes({position:new p.GeometryAttribute({componentDatatype:c.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:t})});return new p.Geometry({attributes:l,indices:n,primitiveType:d.PrimitiveType.LINES})}function x(r){var t=(r=e.defaultValue(r,e.defaultValue.EMPTY_OBJECT)).polygonHierarchy;this._polygonHierarchy=t,this._workerName="createCoplanarPolygonOutlineGeometry",this.packedLength=H.PolygonGeometryLibrary.computeHierarchyPackedLength(t)+1}x.fromPositions=function(r){return new x({polygonHierarchy:{positions:(r=e.defaultValue(r,e.defaultValue.EMPTY_OBJECT)).positions}})},x.pack=function(r,t,n){return n=e.defaultValue(n,0),t[n=H.PolygonGeometryLibrary.packPolygonHierarchy(r._polygonHierarchy,t,n)]=r.packedLength,t};var B={polygonHierarchy:{}};return x.unpack=function(r,t,n){t=e.defaultValue(t,0);var o=H.PolygonGeometryLibrary.unpackPolygonHierarchy(r,t);t=o.startingIndex,delete o.startingIndex;var i=r[t];return e.defined(n)||(n=new x(B)),n._polygonHierarchy=o,n.packedLength=i,n},x.createGeometry=function(e){var r=e._polygonHierarchy,n=r.positions;if(!((n=v.arrayRemoveDuplicates(n,t.Cartesian3.equalsEpsilon,!0)).length<3)&&T.CoplanarPolygonGeometryLibrary.validOutline(n)){var i=H.PolygonGeometryLibrary.polygonOutlinesFromHierarchy(r,!1);if(0!==i.length){for(var a=[],y=0;y<i.length;y++){var l=new P.GeometryInstance({geometry:w(i[y])});a.push(l)}var c=m.GeometryPipeline.combineInstances(a)[0],d=o.BoundingSphere.fromPoints(r.positions);return new p.Geometry({attributes:c.attributes,indices:c.indices,primitiveType:c.primitiveType,boundingSphere:d})}}},function(r,t){return e.defined(t)&&(r=x.unpack(r,t)),r._ellipsoid=n.Ellipsoid.clone(r._ellipsoid),x.createGeometry(r)}}));