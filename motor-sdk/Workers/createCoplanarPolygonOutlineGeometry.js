define(["./when-45f3d25d","./Check-34538dad","./Cartesian3-e69091b9","./Cartesian2-7a44370a","./BoundingSphere-bacc5cb6","./Matrix4-c65e6a1b","./RuntimeError-86da6af2","./Rectangle-c7d55cfa","./WebGLConstants-3660bc8f","./ComponentDatatype-86703c58","./GeometryAttribute-70b679fd","./PrimitiveType-30fa6f85","./Transforms-7d49a8ab","./GeometryAttributes-9d45f9e2","./AttributeCompression-1e177d5e","./GeometryPipeline-7ef9305b","./EncodedCartesian3-7b803d4a","./IndexDatatype-e52361bd","./IntersectionTests-6b77277e","./Plane-b4c954eb","./GeometryInstance-734856d8","./arrayRemoveDuplicates-24a803e7","./EllipsoidTangentPlane-c567cc9c","./OrientedBoundingBox-c3a6bb7d","./CoplanarPolygonGeometryLibrary-37b281fa","./ArcType-39be7a32","./EllipsoidRhumbLine-4bc7760a","./PolygonPipeline-ac4549dc","./PolygonGeometryLibrary-e32c0cb3"],(function(e,r,t,n,a,o,i,y,c,l,p,s,d,u,m,b,f,g,h,v,P,G,C,k,L,T,E,H,w){"use strict";function A(e){for(var r=e.length,t=new Float64Array(3*r),n=g.IndexDatatype.createTypedArray(r,2*r),a=0,o=0,i=0;i<r;i++){var y=e[i];t[a++]=y.x,t[a++]=y.y,t[a++]=y.z,n[o++]=i,n[o++]=(i+1)%r}var c=new u.GeometryAttributes({position:new p.GeometryAttribute({componentDatatype:l.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:t})});return new p.Geometry({attributes:c,indices:n,primitiveType:s.PrimitiveType.LINES})}function I(t){t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT);var n=t.polygonHierarchy;r.Check.defined("options.polygonHierarchy",n),this._polygonHierarchy=n,this._workerName="createCoplanarPolygonOutlineGeometry",this.packedLength=w.PolygonGeometryLibrary.computeHierarchyPackedLength(n)+1}I.fromPositions=function(t){t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT),r.Check.defined("options.positions",t.positions);var n={polygonHierarchy:{positions:t.positions}};return new I(n)},I.pack=function(t,n,a){return r.Check.typeOf.object("value",t),r.Check.defined("array",n),a=e.defaultValue(a,0),a=w.PolygonGeometryLibrary.packPolygonHierarchy(t._polygonHierarchy,n,a),n[a]=t.packedLength,n};var _={polygonHierarchy:{}};function D(r,t){return e.defined(t)&&(r=I.unpack(r,t)),r._ellipsoid=n.Ellipsoid.clone(r._ellipsoid),I.createGeometry(r)}return I.unpack=function(t,n,a){r.Check.defined("array",t),n=e.defaultValue(n,0);var o=w.PolygonGeometryLibrary.unpackPolygonHierarchy(t,n);n=o.startingIndex,delete o.startingIndex;var i=t[n];return e.defined(a)||(a=new I(_)),a._polygonHierarchy=o,a.packedLength=i,a},I.createGeometry=function(e){var r=e._polygonHierarchy,n=r.positions;if(n=G.arrayRemoveDuplicates(n,t.Cartesian3.equalsEpsilon,!0),!(n.length<3)){var o=L.CoplanarPolygonGeometryLibrary.validOutline(n);if(o){var i=w.PolygonGeometryLibrary.polygonOutlinesFromHierarchy(r,!1);if(0!==i.length){for(var y=[],c=0;c<i.length;c++){var l=new P.GeometryInstance({geometry:A(i[c])});y.push(l)}var s=b.GeometryPipeline.combineInstances(y)[0],d=a.BoundingSphere.fromPoints(r.positions);return new p.Geometry({attributes:s.attributes,indices:s.indices,primitiveType:s.primitiveType,boundingSphere:d})}}}},D}));