define(["exports","./when-45f3d25d","./Check-34538dad","./Cartesian3-e69091b9","./Cartesian2-7a44370a","./BoundingSphere-e9924a3b","./Rectangle-c7d55cfa","./GeometryAttribute-4777d9f4"],(function(t,a,n,r,e,o,s,i){"use strict";var h=Math.cos,g=Math.sin,u=Math.sqrt,C={computePosition:function(t,n,r,e,o,s,i){var C=n.radiiSquared,c=t.nwCorner,l=t.boundingRectangle,d=c.latitude-t.granYCos*e+o*t.granXSin,S=h(d),w=g(d),M=C.z*w,m=c.longitude+e*t.granYSin+o*t.granXCos,R=S*h(m),X=S*g(m),Y=C.x*R,p=C.y*X,v=u(Y*R+p*X+M*w);if(s.x=Y/v,s.y=p/v,s.z=M/v,r){var O=t.stNwCorner;a.defined(O)?(d=O.latitude-t.stGranYCos*e+o*t.stGranXSin,m=O.longitude+e*t.stGranYSin+o*t.stGranXCos,i.x=(m-t.stWest)*t.lonScalar,i.y=(d-t.stSouth)*t.latScalar):(i.x=(m-l.west)*t.lonScalar,i.y=(d-l.south)*t.latScalar)}}},c=new i.Matrix2,l=new r.Cartesian3,d=new e.Cartographic,S=new r.Cartesian3,w=new o.GeographicProjection;function M(t,a,n,e,o,s,h){var g=Math.cos(a),u=e*g,C=n*g,d=Math.sin(a),M=e*d,m=n*d;l=w.project(t,l),l=r.Cartesian3.subtract(l,S,l);var R=i.Matrix2.fromRotation(a,c);l=i.Matrix2.multiplyByVector(R,l,l),l=r.Cartesian3.add(l,S,l),t=w.unproject(l,t),s-=1,h-=1;var X=t.latitude,Y=X+s*m,p=X-u*h,v=X-u*h+s*m,O=Math.max(X,Y,p,v),f=Math.min(X,Y,p,v),_=t.longitude,G=_+s*C,x=_+h*M,P=_+h*M+s*C,W=Math.max(_,G,x,P),y=Math.min(_,G,x,P);return{north:O,south:f,east:W,west:y,granYCos:u,granYSin:M,granXCos:C,granXSin:m,nwCorner:t}}C.computeOptions=function(t,a,e,o,i,h,g){var u,C,c,l,m,R=t.east,X=t.west,Y=t.north,p=t.south,v=!1,O=!1;Y===r.CesiumMath.PI_OVER_TWO&&(v=!0),p===-r.CesiumMath.PI_OVER_TWO&&(O=!0);var f=Y-p;m=X>R?r.CesiumMath.TWO_PI-X+R:R-X,u=Math.ceil(m/a)+1,C=Math.ceil(f/a)+1,c=m/(u-1),l=f/(C-1);var _=s.Rectangle.northwest(t,h),G=s.Rectangle.center(t,d);0===e&&0===o||(G.longitude<_.longitude&&(G.longitude+=r.CesiumMath.TWO_PI),S=w.project(G,S));var x=l,P=c,W=0,y=0,I=s.Rectangle.clone(t,i),T={granYCos:x,granYSin:W,granXCos:P,granXSin:y,nwCorner:_,boundingRectangle:I,width:u,height:C,northCap:v,southCap:O};if(0!==e){var b=M(_,e,c,l,G,u,C);if(Y=b.north,p=b.south,R=b.east,X=b.west,Y<-r.CesiumMath.PI_OVER_TWO||Y>r.CesiumMath.PI_OVER_TWO||p<-r.CesiumMath.PI_OVER_TWO||p>r.CesiumMath.PI_OVER_TWO)throw new n.DeveloperError("Rotated rectangle is invalid.  It crosses over either the north or south pole.");T.granYCos=b.granYCos,T.granYSin=b.granYSin,T.granXCos=b.granXCos,T.granXSin=b.granXSin,I.north=Y,I.south=p,I.east=R,I.west=X}if(0!==o){e-=o;var E=s.Rectangle.northwest(I,g),V=M(E,e,c,l,G,u,C);T.stGranYCos=V.granYCos,T.stGranXCos=V.granXCos,T.stGranYSin=V.granYSin,T.stGranXSin=V.granXSin,T.stNwCorner=E,T.stWest=V.west,T.stSouth=V.south}return T},t.RectangleGeometryLibrary=C}));