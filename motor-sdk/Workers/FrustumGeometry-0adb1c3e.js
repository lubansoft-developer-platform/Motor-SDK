define(["exports","./when-45f3d25d","./Check-34538dad","./Cartesian3-ef6ea826","./BoundingSphere-038d5fbc","./Transforms-c8a82813","./Matrix4-f54b529f","./ComponentDatatype-d28c2e26","./GeometryAttribute-dfebcc43","./PrimitiveType-30fa6f85","./GeometryAttributes-9d45f9e2","./Plane-a0c58786","./VertexFormat-06aa4e32"],(function(t,e,a,i,r,n,o,s,f,u,l,h,p){"use strict";function d(t){this.planes=e.defaultValue(t,[])}var c=[new i.Cartesian3,new i.Cartesian3,new i.Cartesian3];i.Cartesian3.clone(i.Cartesian3.UNIT_X,c[0]),i.Cartesian3.clone(i.Cartesian3.UNIT_Y,c[1]),i.Cartesian3.clone(i.Cartesian3.UNIT_Z,c[2]);var m=new i.Cartesian3,C=new i.Cartesian3,_=new h.Plane(new i.Cartesian3(1,0,0),0);function y(t){t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT),this.left=t.left,this._left=void 0,this.right=t.right,this._right=void 0,this.top=t.top,this._top=void 0,this.bottom=t.bottom,this._bottom=void 0,this.near=e.defaultValue(t.near,1),this._near=this.near,this.far=e.defaultValue(t.far,5e8),this._far=this.far,this._cullingVolume=new d,this._orthographicMatrix=new o.Matrix4}function v(t){t.top===t._top&&t.bottom===t._bottom&&t.left===t._left&&t.right===t._right&&t.near===t._near&&t.far===t._far||(t._left=t.left,t._right=t.right,t._top=t.top,t._bottom=t.bottom,t._near=t.near,t._far=t.far,t._orthographicMatrix=o.Matrix4.computeOrthographicOffCenter(t.left,t.right,t.bottom,t.top,t.near,t.far,t._orthographicMatrix))}d.fromBoundingSphere=function(t,a){e.defined(a)||(a=new d);var r=c.length,n=a.planes;n.length=2*r;for(var s=t.center,f=t.radius,u=0,l=0;l<r;++l){var h=c[l],p=n[u],_=n[u+1];e.defined(p)||(p=n[u]=new o.Cartesian4),e.defined(_)||(_=n[u+1]=new o.Cartesian4),i.Cartesian3.multiplyByScalar(h,-f,m),i.Cartesian3.add(s,m,m),p.x=h.x,p.y=h.y,p.z=h.z,p.w=-i.Cartesian3.dot(h,m),i.Cartesian3.multiplyByScalar(h,f,m),i.Cartesian3.add(s,m,m),_.x=-h.x,_.y=-h.y,_.z=-h.z,_.w=-i.Cartesian3.dot(i.Cartesian3.negate(h,C),m),u+=2}return a},d.prototype.computeVisibility=function(t){for(var e=this.planes,a=!1,i=0,r=e.length;i<r;++i){var o=t.intersectPlane(h.Plane.fromCartesian4(e[i],_));if(o===n.Intersect.OUTSIDE)return n.Intersect.OUTSIDE;o===n.Intersect.INTERSECTING&&(a=!0)}return a?n.Intersect.INTERSECTING:n.Intersect.INSIDE},d.prototype.computeVisibilityWithPlaneMask=function(t,e){if(e===d.MASK_OUTSIDE||e===d.MASK_INSIDE)return e;for(var a=d.MASK_INSIDE,i=this.planes,r=0,o=i.length;r<o;++r){var s=r<31?1<<r:0;if(!(r<31&&0==(e&s))){var f=t.intersectPlane(h.Plane.fromCartesian4(i[r],_));if(f===n.Intersect.OUTSIDE)return d.MASK_OUTSIDE;f===n.Intersect.INTERSECTING&&(a|=s)}}return a},d.MASK_OUTSIDE=4294967295,d.MASK_INSIDE=0,d.MASK_INDETERMINATE=2147483647,Object.defineProperties(y.prototype,{projectionMatrix:{get:function(){return v(this),this._orthographicMatrix}}});var w=new i.Cartesian3,g=new i.Cartesian3,x=new i.Cartesian3,M=new i.Cartesian3;function b(t){t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT),this._offCenterFrustum=new y,this.width=t.width,this._width=void 0,this.aspectRatio=t.aspectRatio,this._aspectRatio=void 0,this.near=e.defaultValue(t.near,1),this._near=this.near,this.far=e.defaultValue(t.far,5e8),this.width=e.defaultValue(t.width,1e3),this._width=void 0,this.aspectRatio=e.defaultValue(t.aspectRatio,1),this._aspectRatio=void 0,V(this)}function V(t){var e=t._offCenterFrustum;if(t.width!==t._width||t.aspectRatio!==t._aspectRatio||t.near!==t._near||t.far!==t._far){t._aspectRatio=t.aspectRatio,t._width=t.width,t._near=t.near,t._far=t.far;var a=1/t.aspectRatio;e.right=.5*t.width,e.left=-e.right,e.top=a*e.right,e.bottom=-e.top,e.near=t.near,e.far=t.far}}function F(t){t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT),this.left=t.left,this._left=void 0,this.right=t.right,this._right=void 0,this.top=t.top,this._top=void 0,this.bottom=t.bottom,this._bottom=void 0,this.near=e.defaultValue(t.near,1),this._near=this.near,this.far=e.defaultValue(t.far,5e8),this._far=this.far,this._cullingVolume=new d,this._perspectiveMatrix=new o.Matrix4,this._infinitePerspective=new o.Matrix4}function E(t){var e=t.top,a=t.bottom,i=t.right,r=t.left,n=t.near,s=t.far;e===t._top&&a===t._bottom&&r===t._left&&i===t._right&&n===t._near&&s===t._far||(t._left=r,t._right=i,t._top=e,t._bottom=a,t._near=n,t._far=s,t._perspectiveMatrix=o.Matrix4.computePerspectiveOffCenter(r,i,a,e,n,s,t._perspectiveMatrix),t._infinitePerspective=o.Matrix4.computeInfinitePerspectiveOffCenter(r,i,a,e,n,t._infinitePerspective))}y.prototype.computeCullingVolume=function(t,a,r){var n=this._cullingVolume.planes,s=this.top,f=this.bottom,u=this.right,l=this.left,h=this.near,p=this.far,d=i.Cartesian3.cross(a,r,w);i.Cartesian3.normalize(d,d);var c=g;i.Cartesian3.multiplyByScalar(a,h,c),i.Cartesian3.add(t,c,c);var m=x;i.Cartesian3.multiplyByScalar(d,l,m),i.Cartesian3.add(c,m,m);var C=n[0];return e.defined(C)||(C=n[0]=new o.Cartesian4),C.x=d.x,C.y=d.y,C.z=d.z,C.w=-i.Cartesian3.dot(d,m),i.Cartesian3.multiplyByScalar(d,u,m),i.Cartesian3.add(c,m,m),C=n[1],e.defined(C)||(C=n[1]=new o.Cartesian4),C.x=-d.x,C.y=-d.y,C.z=-d.z,C.w=-i.Cartesian3.dot(i.Cartesian3.negate(d,M),m),i.Cartesian3.multiplyByScalar(r,f,m),i.Cartesian3.add(c,m,m),C=n[2],e.defined(C)||(C=n[2]=new o.Cartesian4),C.x=r.x,C.y=r.y,C.z=r.z,C.w=-i.Cartesian3.dot(r,m),i.Cartesian3.multiplyByScalar(r,s,m),i.Cartesian3.add(c,m,m),C=n[3],e.defined(C)||(C=n[3]=new o.Cartesian4),C.x=-r.x,C.y=-r.y,C.z=-r.z,C.w=-i.Cartesian3.dot(i.Cartesian3.negate(r,M),m),C=n[4],e.defined(C)||(C=n[4]=new o.Cartesian4),C.x=a.x,C.y=a.y,C.z=a.z,C.w=-i.Cartesian3.dot(a,c),i.Cartesian3.multiplyByScalar(a,p,m),i.Cartesian3.add(t,m,m),C=n[5],e.defined(C)||(C=n[5]=new o.Cartesian4),C.x=-a.x,C.y=-a.y,C.z=-a.z,C.w=-i.Cartesian3.dot(i.Cartesian3.negate(a,M),m),this._cullingVolume},y.prototype.getPixelDimensions=function(t,e,a,i,r){v(this);var n=i*(this.right-this.left)/t,o=i*(this.top-this.bottom)/e;return r.x=n,r.y=o,r},y.prototype.clone=function(t){return e.defined(t)||(t=new y),t.left=this.left,t.right=this.right,t.top=this.top,t.bottom=this.bottom,t.near=this.near,t.far=this.far,t._left=void 0,t._right=void 0,t._top=void 0,t._bottom=void 0,t._near=void 0,t._far=void 0,t},y.prototype.equals=function(t){return e.defined(t)&&t instanceof y&&this.right===t.right&&this.left===t.left&&this.top===t.top&&this.bottom===t.bottom&&this.near===t.near&&this.far===t.far},y.prototype.equalsEpsilon=function(t,a,r){return t===this||e.defined(t)&&t instanceof y&&i.CesiumMath.equalsEpsilon(this.right,t.right,a,r)&&i.CesiumMath.equalsEpsilon(this.left,t.left,a,r)&&i.CesiumMath.equalsEpsilon(this.top,t.top,a,r)&&i.CesiumMath.equalsEpsilon(this.bottom,t.bottom,a,r)&&i.CesiumMath.equalsEpsilon(this.near,t.near,a,r)&&i.CesiumMath.equalsEpsilon(this.far,t.far,a,r)},b.packedLength=4,b.pack=function(t,a,i){return i=e.defaultValue(i,0),a[i++]=t.width,a[i++]=t.aspectRatio,a[i++]=t.near,a[i]=t.far,a},b.unpack=function(t,a,i){return a=e.defaultValue(a,0),e.defined(i)||(i=new b),i.width=t[a++],i.aspectRatio=t[a++],i.near=t[a++],i.far=t[a],i},Object.defineProperties(b.prototype,{projectionMatrix:{get:function(){return V(this),this._offCenterFrustum.projectionMatrix}}}),b.prototype.computeCullingVolume=function(t,e,a){return V(this),this._offCenterFrustum.computeCullingVolume(t,e,a)},b.prototype.getPixelDimensions=function(t,e,a,i,r){return V(this),this._offCenterFrustum.getPixelDimensions(t,e,a,i,r)},b.prototype.clone=function(t){return e.defined(t)||(t=new b),t.aspectRatio=this.aspectRatio,t.width=this.width,t.near=this.near,t.far=this.far,t._aspectRatio=void 0,t._width=void 0,t._near=void 0,t._far=void 0,this._offCenterFrustum.clone(t._offCenterFrustum),V(t),t},b.prototype.equals=function(t){return!!(e.defined(t)&&t instanceof b)&&(V(this),V(t),this.width===t.width&&this.aspectRatio===t.aspectRatio&&this._offCenterFrustum.equals(t._offCenterFrustum))},b.prototype.equalsEpsilon=function(t,a,r){return!!(e.defined(t)&&t instanceof b)&&(V(this),V(t),i.CesiumMath.equalsEpsilon(this.width,t.width,a,r)&&i.CesiumMath.equalsEpsilon(this.aspectRatio,t.aspectRatio,a,r)&&this._offCenterFrustum.equalsEpsilon(t._offCenterFrustum,a,r))},Object.defineProperties(F.prototype,{projectionMatrix:{get:function(){return E(this),this._perspectiveMatrix}},infiniteProjectionMatrix:{get:function(){return E(this),this._infinitePerspective}}});var O=new i.Cartesian3,P=new i.Cartesian3,z=new i.Cartesian3,R=new i.Cartesian3;function S(t){t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT),this._offCenterFrustum=new F,this.fov=t.fov,this._fov=void 0,this._fovy=void 0,this._sseDenominator=void 0,this.aspectRatio=t.aspectRatio,this._aspectRatio=void 0,this.near=e.defaultValue(t.near,.1),this._near=this.near,this.far=e.defaultValue(t.far,5e8),this._far=this.far,this.xOffset=e.defaultValue(t.xOffset,0),this._xOffset=this.xOffset,this.yOffset=e.defaultValue(t.yOffset,0),this._yOffset=this.yOffset}function T(t){var e=t._offCenterFrustum;t.fov===t._fov&&t.aspectRatio===t._aspectRatio&&t.near===t._near&&t.far===t._far&&t.xOffset===t._xOffset&&t.yOffset===t._yOffset||(t._aspectRatio=t.aspectRatio,t._fov=t.fov,t._fovy=t.aspectRatio>1?t.fov:2*Math.atan(Math.tan(.5*t.fov)/t.aspectRatio),t._near=t.near,t._far=t.far,t._sseDenominator=2*Math.tan(.5*t._fovy),t._xOffset=t.xOffset,t._yOffset=t.yOffset,e.top=t.near*Math.tan(.5*t._fovy),e.bottom=-e.top,e.right=t.aspectRatio*e.top,e.left=-e.right,e.near=t.near,e.far=t.far,e.right+=t.xOffset,e.left+=t.xOffset,e.top+=t.yOffset,e.bottom+=t.yOffset)}function k(t){var a,r,o=t.frustum,s=t.orientation,f=t.origin,u=e.defaultValue(t.vertexFormat,p.VertexFormat.DEFAULT),l=e.defaultValue(t._drawNearPlane,!0);o instanceof S?(a=0,r=S.packedLength):o instanceof b&&(a=1,r=b.packedLength),this._frustumType=a,this._frustum=o.clone(),this._origin=i.Cartesian3.clone(f),this._orientation=n.Quaternion.clone(s),this._drawNearPlane=l,this._vertexFormat=u,this._workerName="createFrustumGeometry",this.packedLength=2+r+i.Cartesian3.packedLength+n.Quaternion.packedLength+p.VertexFormat.packedLength}F.prototype.computeCullingVolume=function(t,a,r){var n=this._cullingVolume.planes,s=this.top,f=this.bottom,u=this.right,l=this.left,h=this.near,p=this.far,d=i.Cartesian3.cross(a,r,O),c=P;i.Cartesian3.multiplyByScalar(a,h,c),i.Cartesian3.add(t,c,c);var m=z;i.Cartesian3.multiplyByScalar(a,p,m),i.Cartesian3.add(t,m,m);var C=R;i.Cartesian3.multiplyByScalar(d,l,C),i.Cartesian3.add(c,C,C),i.Cartesian3.subtract(C,t,C),i.Cartesian3.normalize(C,C),i.Cartesian3.cross(C,r,C),i.Cartesian3.normalize(C,C);var _=n[0];return e.defined(_)||(_=n[0]=new o.Cartesian4),_.x=C.x,_.y=C.y,_.z=C.z,_.w=-i.Cartesian3.dot(C,t),i.Cartesian3.multiplyByScalar(d,u,C),i.Cartesian3.add(c,C,C),i.Cartesian3.subtract(C,t,C),i.Cartesian3.cross(r,C,C),i.Cartesian3.normalize(C,C),_=n[1],e.defined(_)||(_=n[1]=new o.Cartesian4),_.x=C.x,_.y=C.y,_.z=C.z,_.w=-i.Cartesian3.dot(C,t),i.Cartesian3.multiplyByScalar(r,f,C),i.Cartesian3.add(c,C,C),i.Cartesian3.subtract(C,t,C),i.Cartesian3.cross(d,C,C),i.Cartesian3.normalize(C,C),_=n[2],e.defined(_)||(_=n[2]=new o.Cartesian4),_.x=C.x,_.y=C.y,_.z=C.z,_.w=-i.Cartesian3.dot(C,t),i.Cartesian3.multiplyByScalar(r,s,C),i.Cartesian3.add(c,C,C),i.Cartesian3.subtract(C,t,C),i.Cartesian3.cross(C,d,C),i.Cartesian3.normalize(C,C),_=n[3],e.defined(_)||(_=n[3]=new o.Cartesian4),_.x=C.x,_.y=C.y,_.z=C.z,_.w=-i.Cartesian3.dot(C,t),_=n[4],e.defined(_)||(_=n[4]=new o.Cartesian4),_.x=a.x,_.y=a.y,_.z=a.z,_.w=-i.Cartesian3.dot(a,c),i.Cartesian3.negate(a,C),_=n[5],e.defined(_)||(_=n[5]=new o.Cartesian4),_.x=C.x,_.y=C.y,_.z=C.z,_.w=-i.Cartesian3.dot(C,m),this._cullingVolume},F.prototype.getPixelDimensions=function(t,e,a,i,r){E(this);var n=1/this.near,o=this.top*n,s=2*i*a*o/e,f=2*i*a*(o=this.right*n)/t;return r.x=f,r.y=s,r},F.prototype.clone=function(t){return e.defined(t)||(t=new F),t.right=this.right,t.left=this.left,t.top=this.top,t.bottom=this.bottom,t.near=this.near,t.far=this.far,t._left=void 0,t._right=void 0,t._top=void 0,t._bottom=void 0,t._near=void 0,t._far=void 0,t},F.prototype.equals=function(t){return e.defined(t)&&t instanceof F&&this.right===t.right&&this.left===t.left&&this.top===t.top&&this.bottom===t.bottom&&this.near===t.near&&this.far===t.far},F.prototype.equalsEpsilon=function(t,a,r){return t===this||e.defined(t)&&t instanceof F&&i.CesiumMath.equalsEpsilon(this.right,t.right,a,r)&&i.CesiumMath.equalsEpsilon(this.left,t.left,a,r)&&i.CesiumMath.equalsEpsilon(this.top,t.top,a,r)&&i.CesiumMath.equalsEpsilon(this.bottom,t.bottom,a,r)&&i.CesiumMath.equalsEpsilon(this.near,t.near,a,r)&&i.CesiumMath.equalsEpsilon(this.far,t.far,a,r)},S.packedLength=6,S.pack=function(t,a,i){return i=e.defaultValue(i,0),a[i++]=t.fov,a[i++]=t.aspectRatio,a[i++]=t.near,a[i++]=t.far,a[i++]=t.xOffset,a[i]=t.yOffset,a},S.unpack=function(t,a,i){return a=e.defaultValue(a,0),e.defined(i)||(i=new S),i.fov=t[a++],i.aspectRatio=t[a++],i.near=t[a++],i.far=t[a++],i.xOffset=t[a++],i.yOffset=t[a],i},Object.defineProperties(S.prototype,{projectionMatrix:{get:function(){return T(this),this._offCenterFrustum.projectionMatrix}},infiniteProjectionMatrix:{get:function(){return T(this),this._offCenterFrustum.infiniteProjectionMatrix}},fovy:{get:function(){return T(this),this._fovy}},sseDenominator:{get:function(){return T(this),this._sseDenominator}}}),S.prototype.computeCullingVolume=function(t,e,a){return T(this),this._offCenterFrustum.computeCullingVolume(t,e,a)},S.prototype.getPixelDimensions=function(t,e,a,i,r){return T(this),this._offCenterFrustum.getPixelDimensions(t,e,a,i,r)},S.prototype.clone=function(t){return e.defined(t)||(t=new S),t.aspectRatio=this.aspectRatio,t.fov=this.fov,t.near=this.near,t.far=this.far,t._aspectRatio=void 0,t._fov=void 0,t._near=void 0,t._far=void 0,this._offCenterFrustum.clone(t._offCenterFrustum),T(t),t},S.prototype.equals=function(t){return!!(e.defined(t)&&t instanceof S)&&(T(this),T(t),this.fov===t.fov&&this.aspectRatio===t.aspectRatio&&this._offCenterFrustum.equals(t._offCenterFrustum))},S.prototype.equalsEpsilon=function(t,a,r){return!!(e.defined(t)&&t instanceof S)&&(T(this),T(t),i.CesiumMath.equalsEpsilon(this.fov,t.fov,a,r)&&i.CesiumMath.equalsEpsilon(this.aspectRatio,t.aspectRatio,a,r)&&this._offCenterFrustum.equalsEpsilon(t._offCenterFrustum,a,r))},k.pack=function(t,a,r){r=e.defaultValue(r,0);var o=t._frustumType,s=t._frustum;return a[r++]=o,0===o?(S.pack(s,a,r),r+=S.packedLength):(b.pack(s,a,r),r+=b.packedLength),i.Cartesian3.pack(t._origin,a,r),r+=i.Cartesian3.packedLength,n.Quaternion.pack(t._orientation,a,r),r+=n.Quaternion.packedLength,p.VertexFormat.pack(t._vertexFormat,a,r),a[r+=p.VertexFormat.packedLength]=t._drawNearPlane?1:0,a};var A=new S,D=new b,I=new n.Quaternion,q=new i.Cartesian3,B=new p.VertexFormat;function L(t,a,i,r,n,o,s,f){for(var u=t/3*2,l=0;l<4;++l)e.defined(a)&&(a[t]=o.x,a[t+1]=o.y,a[t+2]=o.z),e.defined(i)&&(i[t]=s.x,i[t+1]=s.y,i[t+2]=s.z),e.defined(r)&&(r[t]=f.x,r[t+1]=f.y,r[t+2]=f.z),t+=3;n[u]=0,n[u+1]=0,n[u+2]=1,n[u+3]=0,n[u+4]=1,n[u+5]=1,n[u+6]=0,n[u+7]=1}k.unpack=function(t,a,r){a=e.defaultValue(a,0);var o,s=t[a++];0===s?(o=S.unpack(t,a,A),a+=S.packedLength):(o=b.unpack(t,a,D),a+=b.packedLength);var f=i.Cartesian3.unpack(t,a,q);a+=i.Cartesian3.packedLength;var u=n.Quaternion.unpack(t,a,I);a+=n.Quaternion.packedLength;var l=p.VertexFormat.unpack(t,a,B),h=1===t[a+=p.VertexFormat.packedLength];if(!e.defined(r))return new k({frustum:o,origin:f,orientation:u,vertexFormat:l,_drawNearPlane:h});var d=s===r._frustumType?r._frustum:void 0;return r._frustum=o.clone(d),r._frustumType=s,r._origin=i.Cartesian3.clone(f,r._origin),r._orientation=n.Quaternion.clone(u,r._orientation),r._vertexFormat=p.VertexFormat.clone(l,r._vertexFormat),r._drawNearPlane=h,r};var N=new o.Matrix3,G=new o.Matrix4,j=new o.Matrix4,U=new i.Cartesian3,Q=new i.Cartesian3,K=new i.Cartesian3,Y=new i.Cartesian3,J=new i.Cartesian3,W=new i.Cartesian3,X=new Array(3),Z=new Array(4);Z[0]=new o.Cartesian4(-1,-1,1,1),Z[1]=new o.Cartesian4(1,-1,1,1),Z[2]=new o.Cartesian4(1,1,1,1),Z[3]=new o.Cartesian4(-1,1,1,1);for(var H=new Array(4),$=0;$<4;++$)H[$]=new o.Cartesian4;k._computeNearFarPlanes=function(t,a,r,n,s,f,u,l){var h=o.Matrix3.fromQuaternion(a,N),p=e.defaultValue(f,U),d=e.defaultValue(u,Q),c=e.defaultValue(l,K);p=o.Matrix3.getColumn(h,0,p),d=o.Matrix3.getColumn(h,1,d),c=o.Matrix3.getColumn(h,2,c),i.Cartesian3.normalize(p,p),i.Cartesian3.normalize(d,d),i.Cartesian3.normalize(c,c),i.Cartesian3.negate(p,p);var m,C,_=o.Matrix4.computeView(t,c,d,p,G);if(0===r){var y=n.projectionMatrix,v=o.Matrix4.multiply(y,_,j);C=o.Matrix4.inverse(v,j)}else m=o.Matrix4.inverseTransformation(_,j);e.defined(C)?(X[0]=n.near,X[1]=n.far):(X[0]=0,X[1]=n.near,X[2]=n.far);for(var w=0;w<2;++w)for(var g=0;g<4;++g){var x=o.Cartesian4.clone(Z[g],H[g]);if(e.defined(C)){var M=1/(x=o.Matrix4.multiplyByVector(C,x,x)).w;i.Cartesian3.multiplyByScalar(x,M,x),i.Cartesian3.subtract(x,t,x),i.Cartesian3.normalize(x,x);var b=i.Cartesian3.dot(c,x);i.Cartesian3.multiplyByScalar(x,X[w]/b,x),i.Cartesian3.add(x,t,x)}else{e.defined(n._offCenterFrustum)&&(n=n._offCenterFrustum);var V=X[w],F=X[w+1];x.x=.5*(x.x*(n.right-n.left)+n.left+n.right),x.y=.5*(x.y*(n.top-n.bottom)+n.bottom+n.top),x.z=.5*(x.z*(V-F)-V-F),x.w=1,o.Matrix4.multiplyByVector(m,x,x)}s[12*w+3*g]=x.x,s[12*w+3*g+1]=x.y,s[12*w+3*g+2]=x.z}},k.createGeometry=function(t){var a=t._frustumType,n=t._frustum,o=t._origin,h=t._orientation,p=t._drawNearPlane,d=t._vertexFormat,c=p?6:5,m=new Float64Array(72);k._computeNearFarPlanes(o,h,a,n,m);var C=24;m[C]=m[12],m[C+1]=m[13],m[C+2]=m[14],m[C+3]=m[0],m[C+4]=m[1],m[C+5]=m[2],m[C+6]=m[9],m[C+7]=m[10],m[C+8]=m[11],m[C+9]=m[21],m[C+10]=m[22],m[C+11]=m[23],m[C+=12]=m[15],m[C+1]=m[16],m[C+2]=m[17],m[C+3]=m[3],m[C+4]=m[4],m[C+5]=m[5],m[C+6]=m[0],m[C+7]=m[1],m[C+8]=m[2],m[C+9]=m[12],m[C+10]=m[13],m[C+11]=m[14],m[C+=12]=m[3],m[C+1]=m[4],m[C+2]=m[5],m[C+3]=m[15],m[C+4]=m[16],m[C+5]=m[17],m[C+6]=m[18],m[C+7]=m[19],m[C+8]=m[20],m[C+9]=m[6],m[C+10]=m[7],m[C+11]=m[8],m[C+=12]=m[6],m[C+1]=m[7],m[C+2]=m[8],m[C+3]=m[18],m[C+4]=m[19],m[C+5]=m[20],m[C+6]=m[21],m[C+7]=m[22],m[C+8]=m[23],m[C+9]=m[9],m[C+10]=m[10],m[C+11]=m[11],p||(m=m.subarray(12));var _=new l.GeometryAttributes({position:new f.GeometryAttribute({componentDatatype:s.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:m})});if(e.defined(d.normal)||e.defined(d.tangent)||e.defined(d.bitangent)||e.defined(d.st)){var y=e.defined(d.normal)?new Float32Array(12*c):void 0,v=e.defined(d.tangent)?new Float32Array(12*c):void 0,w=e.defined(d.bitangent)?new Float32Array(12*c):void 0,g=e.defined(d.st)?new Float32Array(8*c):void 0,x=U,M=Q,b=K,V=i.Cartesian3.negate(x,Y),F=i.Cartesian3.negate(M,J),E=i.Cartesian3.negate(b,W);C=0,p&&(L(C,y,v,w,g,E,x,M),C+=12),L(C,y,v,w,g,b,V,M),L(C+=12,y,v,w,g,V,E,M),L(C+=12,y,v,w,g,F,E,V),L(C+=12,y,v,w,g,x,b,M),L(C+=12,y,v,w,g,M,b,V),e.defined(y)&&(_.normal=new f.GeometryAttribute({componentDatatype:s.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:y})),e.defined(v)&&(_.tangent=new f.GeometryAttribute({componentDatatype:s.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:v})),e.defined(w)&&(_.bitangent=new f.GeometryAttribute({componentDatatype:s.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:w})),e.defined(g)&&(_.st=new f.GeometryAttribute({componentDatatype:s.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:g}))}for(var O=new Uint16Array(6*c),P=0;P<c;++P){var z=6*P,R=4*P;O[z]=R,O[z+1]=R+1,O[z+2]=R+2,O[z+3]=R,O[z+4]=R+2,O[z+5]=R+3}return new f.Geometry({attributes:_,indices:O,primitiveType:u.PrimitiveType.TRIANGLES,boundingSphere:r.BoundingSphere.fromVertices(m)})},t.FrustumGeometry=k,t.OrthographicFrustum=b,t.PerspectiveFrustum=S}));