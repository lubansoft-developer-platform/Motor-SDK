define(["exports","./when-45f3d25d","./Check-34538dad","./Cartesian3-ef6ea826","./Cartesian2-a652b463","./Matrix4-f54b529f","./RuntimeError-86da6af2"],(function(e,t,r,n,i,a,s){"use strict";var o,u,l,f,d,c,p,h,m,y,v,w,g,_,C,E,x,A,O=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),S={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},R={};function T(e){for(var t=e.split("."),r=0,n=t.length;r<n;++r)t[r]=parseInt(t[r],10);return t}function M(){if(!t.defined(l)&&(l=!1,!q())){var e=/ Chrome\/([\.0-9]+)/.exec(u.userAgent);null!==e&&(l=!0,f=T(e[1]))}return l}function b(){if(!t.defined(d)&&(d=!1,!M()&&!q()&&/ Safari\/[\.0-9]+/.test(u.userAgent))){var e=/ Version\/([\.0-9]+)/.exec(u.userAgent);null!==e&&(d=!0,c=T(e[1]))}return d}function I(){if(!t.defined(p)){p=!1;var e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(u.userAgent);null!==e&&(p=!0,(h=T(e[1])).isNightly=!!e[2])}return p}function D(){var e;return t.defined(m)||(m=!1,"Microsoft Internet Explorer"===u.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(u.userAgent))&&(m=!0,y=T(e[1])):"Netscape"===u.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(u.userAgent))&&(m=!0,y=T(e[1]))),m}function q(){if(!t.defined(v)){v=!1;var e=/ Edge\/([\.0-9]+)/.exec(u.userAgent);null!==e&&(v=!0,w=T(e[1]))}return v}function P(){if(!t.defined(g)){g=!1;var e=/Firefox\/([\.0-9]+)/.exec(u.userAgent);null!==e&&(g=!0,_=T(e[1]))}return g}function U(){if(!t.defined(A)){var e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");var r=e.style.imageRendering;(A=t.defined(r)&&""!==r)&&(x=r)}return A}function N(){return N._result}Object.defineProperties(R,{element:{get:function(){if(R.supportsFullscreen())return document[S.fullscreenElement]}},changeEventName:{get:function(){if(R.supportsFullscreen())return S.fullscreenchange}},errorEventName:{get:function(){if(R.supportsFullscreen())return S.fullscreenerror}},enabled:{get:function(){if(R.supportsFullscreen())return document[S.fullscreenEnabled]}},fullscreen:{get:function(){if(R.supportsFullscreen())return null!==R.element}}}),R.supportsFullscreen=function(){if(t.defined(o))return o;o=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return S.requestFullscreen="requestFullscreen",S.exitFullscreen="exitFullscreen",S.fullscreenEnabled="fullscreenEnabled",S.fullscreenElement="fullscreenElement",S.fullscreenchange="fullscreenchange",S.fullscreenerror="fullscreenerror",o=!0;for(var r,n=["webkit","moz","o","ms","khtml"],i=0,a=n.length;i<a;++i){var s=n[i];("function"==typeof e[r=s+"RequestFullscreen"]||"function"==typeof e[r=s+"RequestFullScreen"])&&(S.requestFullscreen=r,o=!0),r=s+"ExitFullscreen","function"==typeof document[r]?S.exitFullscreen=r:(r=s+"CancelFullScreen","function"==typeof document[r]&&(S.exitFullscreen=r)),r=s+"FullscreenEnabled",void 0!==document[r]?S.fullscreenEnabled=r:(r=s+"FullScreenEnabled",void 0!==document[r]&&(S.fullscreenEnabled=r)),r=s+"FullscreenElement",void 0!==document[r]?S.fullscreenElement=r:(r=s+"FullScreenElement",void 0!==document[r]&&(S.fullscreenElement=r)),r=s+"fullscreenchange",void 0!==document["on"+r]&&("ms"===s&&(r="MSFullscreenChange"),S.fullscreenchange=r),r=s+"fullscreenerror",void 0!==document["on"+r]&&("ms"===s&&(r="MSFullscreenError"),S.fullscreenerror=r)}return o},R.requestFullscreen=function(e,t){R.supportsFullscreen()&&e[S.requestFullscreen]({vrDisplay:t})},R.exitFullscreen=function(){R.supportsFullscreen()&&document[S.exitFullscreen]()},R._names=S,u="undefined"!=typeof navigator?navigator:{},N._promise=void 0,N._result=void 0,N.initialize=function(){if(t.defined(N._promise))return N._promise;var e=t.when.defer();if(N._promise=e.promise,q())return N._result=!1,e.resolve(N._result),e.promise;var r=new Image;return r.onload=function(){N._result=r.width>0&&r.height>0,e.resolve(N._result)},r.onerror=function(){N._result=!1,e.resolve(N._result)},r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},Object.defineProperties(N,{initialized:{get:function(){return t.defined(N._result)}}});var F=[];"undefined"!=typeof ArrayBuffer&&(F.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&F.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&F.push(Uint8ClampedArray));var z={isChrome:M,chromeVersion:function(){return M()&&f},isSafari:b,safariVersion:function(){return b()&&c},isWebkit:I,webkitVersion:function(){return I()&&h},isInternetExplorer:D,internetExplorerVersion:function(){return D()&&y},isEdge:q,edgeVersion:function(){return q()&&w},isFirefox:P,firefoxVersion:function(){return P()&&_},isWindows:function(){return t.defined(C)||(C=/Windows/i.test(u.appVersion)),C},hardwareConcurrency:t.defaultValue(u.hardwareConcurrency,3),supportsPointerEvents:function(){return t.defined(E)||(E=!P()&&"undefined"!=typeof PointerEvent&&(!t.defined(u.pointerEnabled)||u.pointerEnabled)),E},supportsImageRenderingPixelated:U,supportsWebP:N,imageRenderingValue:function(){return U()?x:void 0},typedArrayTypes:F};function L(e,r,n,i){this.x=t.defaultValue(e,0),this.y=t.defaultValue(r,0),this.z=t.defaultValue(n,0),this.w=t.defaultValue(i,0)}z.supportsFullscreen=function(){return R.supportsFullscreen()},z.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},z.supportsWebWorkers=function(){return"undefined"!=typeof Worker},z.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly&&!z.isEdge()},z.isInternetExplorer=function(){return D()},z.isEdge=function(){return q()};var V=new n.Cartesian3;L.fromAxisAngle=function(e,r,i){var a=r/2,s=Math.sin(a),o=(V=n.Cartesian3.normalize(e,V)).x*s,u=V.y*s,l=V.z*s,f=Math.cos(a);return t.defined(i)?(i.x=o,i.y=u,i.z=l,i.w=f,i):new L(o,u,l,f)};var B=[1,2,0],j=new Array(3);L.fromRotationMatrix=function(e,r){var n,i,s,o,u,l=e[a.Matrix3.COLUMN0ROW0],f=e[a.Matrix3.COLUMN1ROW1],d=e[a.Matrix3.COLUMN2ROW2],c=l+f+d;if(c>0)u=.5*(n=Math.sqrt(c+1)),n=.5/n,i=(e[a.Matrix3.COLUMN1ROW2]-e[a.Matrix3.COLUMN2ROW1])*n,s=(e[a.Matrix3.COLUMN2ROW0]-e[a.Matrix3.COLUMN0ROW2])*n,o=(e[a.Matrix3.COLUMN0ROW1]-e[a.Matrix3.COLUMN1ROW0])*n;else{var p=0;f>l&&(p=1),d>l&&d>f&&(p=2);var h=B[p],m=B[h];n=Math.sqrt(e[a.Matrix3.getElementIndex(p,p)]-e[a.Matrix3.getElementIndex(h,h)]-e[a.Matrix3.getElementIndex(m,m)]+1);var y=j;y[p]=.5*n,n=.5/n,u=(e[a.Matrix3.getElementIndex(m,h)]-e[a.Matrix3.getElementIndex(h,m)])*n,y[h]=(e[a.Matrix3.getElementIndex(h,p)]+e[a.Matrix3.getElementIndex(p,h)])*n,y[m]=(e[a.Matrix3.getElementIndex(m,p)]+e[a.Matrix3.getElementIndex(p,m)])*n,i=-y[0],s=-y[1],o=-y[2]}return t.defined(r)?(r.x=i,r.y=s,r.z=o,r.w=u,r):new L(i,s,o,u)};var k=new L,W=new L,Y=new L,J=new L;L.fromHeadingPitchRoll=function(e,t){return J=L.fromAxisAngle(n.Cartesian3.UNIT_X,e.roll,k),Y=L.fromAxisAngle(n.Cartesian3.UNIT_Y,-e.pitch,t),t=L.multiply(Y,J,Y),W=L.fromAxisAngle(n.Cartesian3.UNIT_Z,-e.heading,k),L.multiply(W,t,t)};var H=new n.Cartesian3,X=new n.Cartesian3,G=new L,Z=new L,Q=new L;L.packedLength=4,L.pack=function(e,r,n){return n=t.defaultValue(n,0),r[n++]=e.x,r[n++]=e.y,r[n++]=e.z,r[n]=e.w,r},L.unpack=function(e,r,n){return r=t.defaultValue(r,0),t.defined(n)||(n=new L),n.x=e[r],n.y=e[r+1],n.z=e[r+2],n.w=e[r+3],n},L.packedInterpolationLength=3,L.convertPackedArrayForInterpolation=function(e,r,n,i){L.unpack(e,4*n,Q),L.conjugate(Q,Q);for(var a=0,s=n-r+1;a<s;a++){var o=3*a;L.unpack(e,4*(r+a),G),L.multiply(G,Q,G),G.w<0&&L.negate(G,G),L.computeAxis(G,H);var u=L.computeAngle(G);t.defined(i)||(i=[]),i[o]=H.x*u,i[o+1]=H.y*u,i[o+2]=H.z*u}},L.unpackInterpolationResult=function(e,r,i,a,s){t.defined(s)||(s=new L),n.Cartesian3.fromArray(e,0,X);var o=n.Cartesian3.magnitude(X);return L.unpack(r,4*a,Z),0===o?L.clone(L.IDENTITY,G):L.fromAxisAngle(X,o,G),L.multiply(G,Z,s)},L.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.x=e.x,r.y=e.y,r.z=e.z,r.w=e.w,r):new L(e.x,e.y,e.z,e.w)},L.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},L.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},L.magnitude=function(e){return Math.sqrt(L.magnitudeSquared(e))},L.normalize=function(e,t){var r=1/L.magnitude(e),n=e.x*r,i=e.y*r,a=e.z*r,s=e.w*r;return t.x=n,t.y=i,t.z=a,t.w=s,t},L.inverse=function(e,t){var r=L.magnitudeSquared(e);return t=L.conjugate(e,t),L.multiplyByScalar(t,1/r,t)},L.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},L.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},L.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},L.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},L.multiply=function(e,t,r){var n=e.x,i=e.y,a=e.z,s=e.w,o=t.x,u=t.y,l=t.z,f=t.w,d=s*o+n*f+i*l-a*u,c=s*u-n*l+i*f+a*o,p=s*l+n*u-i*o+a*f,h=s*f-n*o-i*u-a*l;return r.x=d,r.y=c,r.z=p,r.w=h,r},L.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},L.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},L.computeAxis=function(e,t){var r=e.w;if(Math.abs(r-1)<n.CesiumMath.EPSILON6)return t.x=t.y=t.z=0,t;var i=1/Math.sqrt(1-r*r);return t.x=e.x*i,t.y=e.y*i,t.z=e.z*i,t},L.computeAngle=function(e){return Math.abs(e.w-1)<n.CesiumMath.EPSILON6?0:2*Math.acos(e.w)};var K=new L;L.lerp=function(e,t,r,n){return K=L.multiplyByScalar(t,r,K),n=L.multiplyByScalar(e,1-r,n),L.add(K,n,n)};var $=new L,ee=new L,te=new L;L.slerp=function(e,t,r,i){var a=L.dot(e,t),s=t;if(a<0&&(a=-a,s=$=L.negate(t,$)),1-a<n.CesiumMath.EPSILON6)return L.lerp(e,s,r,i);var o=Math.acos(a);return ee=L.multiplyByScalar(e,Math.sin((1-r)*o),ee),te=L.multiplyByScalar(s,Math.sin(r*o),te),i=L.add(ee,te,i),L.multiplyByScalar(i,1/Math.sin(o),i)},L.log=function(e,t){var r=n.CesiumMath.acosClamped(e.w),i=0;return 0!==r&&(i=r/Math.sin(r)),n.Cartesian3.multiplyByScalar(e,i,t)},L.exp=function(e,t){var r=n.Cartesian3.magnitude(e),i=0;return 0!==r&&(i=Math.sin(r)/r),t.x=e.x*i,t.y=e.y*i,t.z=e.z*i,t.w=Math.cos(r),t};var re=new n.Cartesian3,ne=new n.Cartesian3,ie=new L,ae=new L;L.computeInnerQuadrangle=function(e,t,r,i){var a=L.conjugate(t,ie);L.multiply(a,r,ae);var s=L.log(ae,re);L.multiply(a,e,ae);var o=L.log(ae,ne);return n.Cartesian3.add(s,o,s),n.Cartesian3.multiplyByScalar(s,.25,s),n.Cartesian3.negate(s,s),L.exp(s,ie),L.multiply(t,ie,i)},L.squad=function(e,t,r,n,i,a){var s=L.slerp(e,t,i,ie),o=L.slerp(r,n,i,ae);return L.slerp(s,o,2*i*(1-i),a)};for(var se=new L,oe=1.9011074535173003,ue=z.supportsTypedArrays()?new Float32Array(8):[],le=z.supportsTypedArrays()?new Float32Array(8):[],fe=z.supportsTypedArrays()?new Float32Array(8):[],de=z.supportsTypedArrays()?new Float32Array(8):[],ce=0;ce<7;++ce){var pe=ce+1,he=2*pe+1;ue[ce]=1/(pe*he),le[ce]=pe/he}function me(e,t,r){for(var n,i,a=0,s=e.length-1;a<=s;)if((i=r(e[n=~~((a+s)/2)],t))<0)a=n+1;else{if(!(i>0))return n;s=n-1}return~(s+1)}function ye(e,t,r,n,i){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=r,this.yPoleOffset=n,this.ut1MinusUtc=i}function ve(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,t=arguments,r=0,n=t[r++],i=function(e,t,r,n){r||(r=" ");var i=e.length>=t?"":Array(1+t-e.length>>>0).join(r);return n?e+i:i+e},a=function(e,t,r,n,a,s){var o=n-e.length;return o>0&&(e=r||!a?i(e,n,s,r):e.slice(0,t.length)+i("",o,"0",!0)+e.slice(t.length)),e},s=function(e,t,r,n,s,o,u){var l=e>>>0;return e=(r=r&&l&&{2:"0b",8:"0",16:"0x"}[t]||"")+i(l.toString(t),o||0,"0",!1),a(e,r,n,s,u)},o=function(e,t,r,n,i,s){return null!=n&&(e=e.slice(0,n)),a(e,"",t,r,i,s)},u=function(e,n,u,l,f,d,c){var p,h,m,y,v;if("%%"==e)return"%";for(var w=!1,g="",_=!1,C=!1,E=" ",x=u.length,A=0;u&&A<x;A++)switch(u.charAt(A)){case" ":g=" ";break;case"+":g="+";break;case"-":w=!0;break;case"'":E=u.charAt(A+1);break;case"0":_=!0;break;case"#":C=!0}if((l=l?"*"==l?+t[r++]:"*"==l.charAt(0)?+t[l.slice(1,-1)]:+l:0)<0&&(l=-l,w=!0),!isFinite(l))throw new Error("sprintf: (minimum-)width must be finite");switch(d=d?"*"==d?+t[r++]:"*"==d.charAt(0)?+t[d.slice(1,-1)]:+d:"fFeE".indexOf(c)>-1?6:"d"==c?0:void 0,v=n?t[n.slice(0,-1)]:t[r++],c){case"s":return o(String(v),w,l,d,_,E);case"c":return o(String.fromCharCode(+v),w,l,d,_);case"b":return s(v,2,C,w,l,d,_);case"o":return s(v,8,C,w,l,d,_);case"x":return s(v,16,C,w,l,d,_);case"X":return s(v,16,C,w,l,d,_).toUpperCase();case"u":return s(v,10,C,w,l,d,_);case"i":case"d":return p=+v||0,v=(h=(p=Math.round(p-p%1))<0?"-":g)+i(String(Math.abs(p)),d,"0",!1),a(v,h,w,l,_);case"e":case"E":case"f":case"F":case"g":case"G":return h=(p=+v)<0?"-":g,m=["toExponential","toFixed","toPrecision"]["efg".indexOf(c.toLowerCase())],y=["toString","toUpperCase"]["eEfFgG".indexOf(c)%2],v=h+Math.abs(p)[m](d),a(v,h,w,l,_)[y]();default:return e}};return n.replace(e,u)}function we(e,t,r,n,i,a,s,o){this.year=e,this.month=t,this.day=r,this.hour=n,this.minute=i,this.second=a,this.millisecond=s,this.isLeapSecond=o}function ge(e){return e%4==0&&e%100!=0||e%400==0}function _e(e,t){this.julianDate=e,this.offset=t}ue[7]=oe/136,le[7]=8*oe/17,L.fastSlerp=function(e,t,r,n){var i,a=L.dot(e,t);a>=0?i=1:(i=-1,a=-a);for(var s=a-1,o=1-r,u=r*r,l=o*o,f=7;f>=0;--f)fe[f]=(ue[f]*u-le[f])*s,de[f]=(ue[f]*l-le[f])*s;var d=i*r*(1+fe[0]*(1+fe[1]*(1+fe[2]*(1+fe[3]*(1+fe[4]*(1+fe[5]*(1+fe[6]*(1+fe[7])))))))),c=o*(1+de[0]*(1+de[1]*(1+de[2]*(1+de[3]*(1+de[4]*(1+de[5]*(1+de[6]*(1+de[7])))))))),p=L.multiplyByScalar(e,c,se);return L.multiplyByScalar(t,d,n),L.add(p,n,n)},L.fastSquad=function(e,t,r,n,i,a){var s=L.fastSlerp(e,t,i,ie),o=L.fastSlerp(r,n,i,ae);return L.fastSlerp(s,o,2*i*(1-i),a)},L.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e.x===r.x&&e.y===r.y&&e.z===r.z&&e.w===r.w},L.equalsEpsilon=function(e,r,n){return n=t.defaultValue(n,0),e===r||t.defined(e)&&t.defined(r)&&Math.abs(e.x-r.x)<=n&&Math.abs(e.y-r.y)<=n&&Math.abs(e.z-r.z)<=n&&Math.abs(e.w-r.w)<=n},L.ZERO=Object.freeze(new L(0,0,0,0)),L.IDENTITY=Object.freeze(new L(0,0,0,1)),L.prototype.clone=function(e){return L.clone(this,e)},L.prototype.equals=function(e){return L.equals(this,e)},L.prototype.equalsEpsilon=function(e,t){return L.equalsEpsilon(this,e,t)},L.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var Ce=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),Ee=Object.freeze({UTC:0,TAI:1}),xe=new we,Ae=[31,28,31,30,31,30,31,31,30,31,30,31];function Oe(e,t){return Ve.compare(e.julianDate,t.julianDate)}var Se=new _e;function Re(e){Se.julianDate=e;var t=Ve.leapSeconds,r=me(t,Se,Oe);r<0&&(r=~r),r>=t.length&&(r=t.length-1);var n=t[r].offset;r>0&&Ve.secondsDifference(t[r].julianDate,e)>n&&(n=t[--r].offset),Ve.addSeconds(e,n,e)}function Te(e,t){Se.julianDate=e;var r=Ve.leapSeconds,n=me(r,Se,Oe);if(n<0&&(n=~n),0===n)return Ve.addSeconds(e,-r[0].offset,t);if(n>=r.length)return Ve.addSeconds(e,-r[n-1].offset,t);var i=Ve.secondsDifference(r[n].julianDate,e);return 0===i?Ve.addSeconds(e,-r[n].offset,t):i<=1?void 0:Ve.addSeconds(e,-r[--n].offset,t)}function Me(e,t,r){var n=t/Ce.SECONDS_PER_DAY|0;return e+=n,(t-=Ce.SECONDS_PER_DAY*n)<0&&(e--,t+=Ce.SECONDS_PER_DAY),r.dayNumber=e,r.secondsOfDay=t,r}function be(e,t,r,n,i,a,s){var o=(t-14)/12|0,u=e+4800+o,l=(1461*u/4|0)+(367*(t-2-12*o)/12|0)-(3*((u+100)/100|0)/4|0)+r-32075;(n-=12)<0&&(n+=24);var f=a+(n*Ce.SECONDS_PER_HOUR+i*Ce.SECONDS_PER_MINUTE+s*Ce.SECONDS_PER_MILLISECOND);return f>=43200&&(l-=1),[l,f]}var Ie=/^(\d{4})$/,De=/^(\d{4})-(\d{2})$/,qe=/^(\d{4})-?(\d{3})$/,Pe=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,Ue=/^(\d{4})-?(\d{2})-?(\d{2})$/,Ne=/([Z+\-])?(\d{2})?:?(\d{2})?$/,Fe=/^(\d{2})(\.\d+)?/.source+Ne.source,ze=/^(\d{2}):?(\d{2})(\.\d+)?/.source+Ne.source,Le=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+Ne.source;function Ve(e,r,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=t.defaultValue(e,0),r=t.defaultValue(r,0),n=t.defaultValue(n,Ee.UTC);var i=0|e;Me(i,r+=(e-i)*Ce.SECONDS_PER_DAY,this),n===Ee.UTC&&Re(this)}Ve.fromGregorianDate=function(e,r){var n=be(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return t.defined(r)?(Me(n[0],n[1],r),Re(r),r):new Ve(n[0],n[1],Ee.UTC)},Ve.fromDate=function(e,r){var n=be(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return t.defined(r)?(Me(n[0],n[1],r),Re(r),r):new Ve(n[0],n[1],Ee.UTC)},Ve.fromIso8601=function(e,r){var n,i,a,s,o=(e=e.replace(",",".")).split("T"),u=1,l=1,f=0,d=0,c=0,p=0,h=o[0],m=o[1];if(null!==(o=h.match(Ue)))n=+o[1],u=+o[2],l=+o[3];else if(null!==(o=h.match(De)))n=+o[1],u=+o[2];else if(null!==(o=h.match(Ie)))n=+o[1];else{var y;null!==(o=h.match(qe))?(n=+o[1],y=+o[2],a=ge(n)):null!==(o=h.match(Pe))&&(n=+o[1],y=7*+o[2]+(+o[3]||0)-new Date(Date.UTC(n,0,4)).getUTCDay()-3),(i=new Date(Date.UTC(n,0,1))).setUTCDate(y),u=i.getUTCMonth()+1,l=i.getUTCDate()}if(a=ge(n),t.defined(m)){null!==(o=m.match(Le))?(f=+o[1],d=+o[2],c=+o[3],p=1e3*+(o[4]||0),s=5):null!==(o=m.match(ze))?(f=+o[1],d=+o[2],c=60*+(o[3]||0),s=4):null!==(o=m.match(Fe))&&(f=+o[1],d=60*+(o[2]||0),s=3);var v=o[s],w=+o[s+1],g=+(o[s+2]||0);switch(v){case"+":f-=w,d-=g;break;case"-":f+=w,d+=g;break;case"Z":break;default:d+=new Date(Date.UTC(n,u-1,l,f,d)).getTimezoneOffset()}}var _=60===c;for(_&&c--;d>=60;)d-=60,f++;for(;f>=24;)f-=24,l++;for(i=a&&2===u?29:Ae[u-1];l>i;)l-=i,++u>12&&(u-=12,n++),i=a&&2===u?29:Ae[u-1];for(;d<0;)d+=60,f--;for(;f<0;)f+=24,l--;for(;l<1;)--u<1&&(u+=12,n--),l+=i=a&&2===u?29:Ae[u-1];var C=be(n,u,l,f,d,c,p);return t.defined(r)?(Me(C[0],C[1],r),Re(r)):r=new Ve(C[0],C[1],Ee.UTC),_&&Ve.addSeconds(r,1,r),r},Ve.now=function(e){return Ve.fromDate(new Date,e)};var Be=new Ve(0,0,Ee.TAI);function je(e){if(e instanceof je)this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment;else if(e){var t=ke.exec(e);this.scheme=t[1],this.authority=t[2],this.path=t[3],this.query=t[4],this.fragment=t[5]}}Ve.toGregorianDate=function(e,r){var n=!1,i=Te(e,Be);t.defined(i)||(Ve.addSeconds(e,-1,Be),i=Te(Be,Be),n=!0);var a=i.dayNumber,s=i.secondsOfDay;s>=43200&&(a+=1);var o=a+68569|0,u=4*o/146097|0,l=4e3*(1+(o=o-((146097*u+3)/4|0)|0))/1461001|0,f=80*(o=o-(1461*l/4|0)+31|0)/2447|0,d=o-(2447*f/80|0)|0,c=f+2-12*(o=f/11|0)|0,p=100*(u-49)+l+o|0,h=s/Ce.SECONDS_PER_HOUR|0,m=s-h*Ce.SECONDS_PER_HOUR,y=m/Ce.SECONDS_PER_MINUTE|0,v=0|(m-=y*Ce.SECONDS_PER_MINUTE),w=(m-v)/Ce.SECONDS_PER_MILLISECOND;return(h+=12)>23&&(h-=24),n&&(v+=1),t.defined(r)?(r.year=p,r.month=c,r.day=d,r.hour=h,r.minute=y,r.second=v,r.millisecond=w,r.isLeapSecond=n,r):new we(p,c,d,h,y,v,w,n)},Ve.toDate=function(e){var t=Ve.toGregorianDate(e,xe),r=t.second;return t.isLeapSecond&&(r-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,r,t.millisecond))},Ve.toIso8601=function(e,r){var n=Ve.toGregorianDate(e,xe),i=n.year,a=n.month,s=n.day,o=n.hour,u=n.minute,l=n.second,f=n.millisecond;return 1e4===i&&1===a&&1===s&&0===o&&0===u&&0===l&&0===f&&(i=9999,a=12,s=31,o=24),t.defined(r)||0===f?t.defined(r)&&0!==r?ve("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",i,a,s,o,u,l,(.01*f).toFixed(r).replace(".","").slice(0,r)):ve("%04d-%02d-%02dT%02d:%02d:%02dZ",i,a,s,o,u,l):ve("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",i,a,s,o,u,l,(.01*f).toString().replace(".",""))},Ve.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.dayNumber=e.dayNumber,r.secondsOfDay=e.secondsOfDay,r):new Ve(e.dayNumber,e.secondsOfDay,Ee.TAI)},Ve.compare=function(e,t){var r=e.dayNumber-t.dayNumber;return 0!==r?r:e.secondsOfDay-t.secondsOfDay},Ve.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e.dayNumber===r.dayNumber&&e.secondsOfDay===r.secondsOfDay},Ve.equalsEpsilon=function(e,r,n){return n=t.defaultValue(n,0),e===r||t.defined(e)&&t.defined(r)&&Math.abs(Ve.secondsDifference(e,r))<=n},Ve.totalDays=function(e){return e.dayNumber+e.secondsOfDay/Ce.SECONDS_PER_DAY},Ve.secondsDifference=function(e,t){return(e.dayNumber-t.dayNumber)*Ce.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},Ve.daysDifference=function(e,t){return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/Ce.SECONDS_PER_DAY},Ve.computeTaiMinusUtc=function(e){Se.julianDate=e;var t=Ve.leapSeconds,r=me(t,Se,Oe);return r<0&&(r=~r,--r<0&&(r=0)),t[r].offset},Ve.addSeconds=function(e,t,r){return Me(e.dayNumber,e.secondsOfDay+t,r)},Ve.addMinutes=function(e,t,r){var n=e.secondsOfDay+t*Ce.SECONDS_PER_MINUTE;return Me(e.dayNumber,n,r)},Ve.addHours=function(e,t,r){var n=e.secondsOfDay+t*Ce.SECONDS_PER_HOUR;return Me(e.dayNumber,n,r)},Ve.addDays=function(e,t,r){return Me(e.dayNumber+t,e.secondsOfDay,r)},Ve.lessThan=function(e,t){return Ve.compare(e,t)<0},Ve.lessThanOrEquals=function(e,t){return Ve.compare(e,t)<=0},Ve.greaterThan=function(e,t){return Ve.compare(e,t)>0},Ve.greaterThanOrEquals=function(e,t){return Ve.compare(e,t)>=0},Ve.prototype.clone=function(e){return Ve.clone(this,e)},Ve.prototype.equals=function(e){return Ve.equals(this,e)},Ve.prototype.equalsEpsilon=function(e,t){return Ve.equalsEpsilon(this,e,t)},Ve.prototype.toString=function(){return Ve.toIso8601(this)},Ve.leapSeconds=[new _e(new Ve(2441317,43210,Ee.TAI),10),new _e(new Ve(2441499,43211,Ee.TAI),11),new _e(new Ve(2441683,43212,Ee.TAI),12),new _e(new Ve(2442048,43213,Ee.TAI),13),new _e(new Ve(2442413,43214,Ee.TAI),14),new _e(new Ve(2442778,43215,Ee.TAI),15),new _e(new Ve(2443144,43216,Ee.TAI),16),new _e(new Ve(2443509,43217,Ee.TAI),17),new _e(new Ve(2443874,43218,Ee.TAI),18),new _e(new Ve(2444239,43219,Ee.TAI),19),new _e(new Ve(2444786,43220,Ee.TAI),20),new _e(new Ve(2445151,43221,Ee.TAI),21),new _e(new Ve(2445516,43222,Ee.TAI),22),new _e(new Ve(2446247,43223,Ee.TAI),23),new _e(new Ve(2447161,43224,Ee.TAI),24),new _e(new Ve(2447892,43225,Ee.TAI),25),new _e(new Ve(2448257,43226,Ee.TAI),26),new _e(new Ve(2448804,43227,Ee.TAI),27),new _e(new Ve(2449169,43228,Ee.TAI),28),new _e(new Ve(2449534,43229,Ee.TAI),29),new _e(new Ve(2450083,43230,Ee.TAI),30),new _e(new Ve(2450630,43231,Ee.TAI),31),new _e(new Ve(2451179,43232,Ee.TAI),32),new _e(new Ve(2453736,43233,Ee.TAI),33),new _e(new Ve(2454832,43234,Ee.TAI),34),new _e(new Ve(2456109,43235,Ee.TAI),35),new _e(new Ve(2457204,43236,Ee.TAI),36),new _e(new Ve(2457754,43237,Ee.TAI),37)],je.prototype.scheme=null,je.prototype.authority=null,je.prototype.path="",je.prototype.query=null,je.prototype.fragment=null;var ke=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");je.prototype.getScheme=function(){return this.scheme},je.prototype.getAuthority=function(){return this.authority},je.prototype.getPath=function(){return this.path},je.prototype.getQuery=function(){return this.query},je.prototype.getFragment=function(){return this.fragment},je.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},je.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},je.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},je.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(Je,Xe).replace(We,He)),this.path&&(this.path=this.path.replace(We,He)),this.query&&(this.query=this.query.replace(We,He)),this.fragment&&(this.fragment=this.fragment.replace(We,He))};var We=/%[0-9a-z]{2}/gi,Ye=/[a-zA-Z0-9\-\._~]/,Je=/(.*@)?([^@:]*)(:.*)?/;function He(e){var t=unescape(e);return Ye.test(t)?t:e.toUpperCase()}function Xe(e,t,r,n){return(t||"")+r.toLowerCase()+(n||"")}function Ge(e,r){if(null===e||"object"!=typeof e)return e;r=t.defaultValue(r,!1);var n=new e.constructor;for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];r&&(a=Ge(a,r)),n[i]=a}return n}function Ze(e,r,n){n=t.defaultValue(n,!1);var i,a,s,o={},u=t.defined(e),l=t.defined(r);if(u)for(i in e)e.hasOwnProperty(i)&&(a=e[i],l&&n&&"object"==typeof a&&r.hasOwnProperty(i)?(s=r[i],o[i]="object"==typeof s?Ze(a,s,n):a):o[i]=a);if(l)for(i in r)r.hasOwnProperty(i)&&!o.hasOwnProperty(i)&&(s=r[i],o[i]=s);return o}function Qe(e,t){var r;return"undefined"!=typeof document&&(r=document),Qe._implementation(e,t,r)}je.prototype.resolve=function(e){var t=new je;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?(t.path=this.path,t.removeDotSegments()):(e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments()),t.query=this.query))),t.fragment=this.fragment,t},je.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),r=[],n=""==t[0];for(n&&t.shift(),""==t[0]&&t.shift();t.length;)".."==(e=t.shift())?r.pop():"."!=e&&r.push(e);"."!=e&&".."!=e||r.push(""),n&&r.unshift(""),this.path=r.join("/")},je.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},Qe._implementation=function(e,r,n){if(!t.defined(r)){if(void 0===n)return e;r=t.defaultValue(n.baseURI,n.location.href)}var i=new je(r);return new je(e).resolve(i).toString()};var Ke,$e=/^blob:/i;function et(e){return $e.test(e)}var tt=/^data:/i;function rt(e){return tt.test(e)}var nt=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),it=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function at(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT);var r=t.defaultValue(e.throttleByServer,!1),n=t.defaultValue(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=t.defaultValue(e.priority,0),this.throttle=n,this.throttleByServer=r,this.type=t.defaultValue(e.type,it.OTHER),this.serverKey=void 0,this.state=nt.UNISSUED,this.deferred=void 0,this.cancelled=!1}function st(e,t,r){this.statusCode=e,this.response=t,this.responseHeaders=r,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(e){var t={};if(!e)return t;for(var r=e.split("\r\n"),n=0;n<r.length;++n){var i=r[n],a=i.indexOf(": ");if(a>0){var s=i.substring(0,a),o=i.substring(a+2);t[s]=o}}return t}(this.responseHeaders))}function ot(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function ut(e,t){return t-e}function lt(e){this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function ft(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}at.prototype.cancel=function(){this.cancelled=!0},at.prototype.clone=function(e){return t.defined(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new at(this)},st.prototype.toString=function(){var e="Request has failed.";return t.defined(this.statusCode)&&(e+=" Status Code: "+this.statusCode),e},Object.defineProperties(ot.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),ot.prototype.addEventListener=function(e,t){this._listeners.push(e),this._scopes.push(t);var r=this;return function(){r.removeEventListener(e,t)}},ot.prototype.removeEventListener=function(e,t){for(var r=this._listeners,n=this._scopes,i=-1,a=0;a<r.length;a++)if(r[a]===e&&n[a]===t){i=a;break}return-1!==i&&(this._insideRaiseEvent?(this._toRemove.push(i),r[i]=void 0,n[i]=void 0):(r.splice(i,1),n.splice(i,1)),!0)},ot.prototype.raiseEvent=function(){var e;this._insideRaiseEvent=!0;var r=this._listeners,n=this._scopes,i=r.length;for(e=0;e<i;e++){var a=r[e];t.defined(a)&&r[e].apply(n[e],arguments)}var s=this._toRemove;if((i=s.length)>0){for(s.sort(ut),e=0;e<i;e++){var o=s[e];r.splice(o,1),n.splice(o,1)}s.length=0}this._insideRaiseEvent=!1},Object.defineProperties(lt.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){this._maximumLength=e,this._length>e&&e>0&&(this._length=e,this._array.length=e)}},comparator:{get:function(){return this._comparator}}}),lt.prototype.reserve=function(e){e=t.defaultValue(e,this._length),this._array.length=e},lt.prototype.heapify=function(e){e=t.defaultValue(e,0);for(var r=this._length,n=this._comparator,i=this._array,a=-1,s=!0;s;){var o=2*(e+1),u=o-1;a=u<r&&n(i[u],i[e])<0?u:e,o<r&&n(i[o],i[a])<0&&(a=o),a!==e?(ft(i,a,e),e=a):s=!1}},lt.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);t>=0;--t)this.heapify(t)},lt.prototype.insert=function(e){var r,n=this._array,i=this._comparator,a=this._maximumLength,s=this._length++;for(s<n.length?n[s]=e:n.push(e);0!==s;){var o=Math.floor((s-1)/2);if(!(i(n[s],n[o])<0))break;ft(n,s,o),s=o}return t.defined(a)&&this._length>a&&(r=n[a],this._length=a),r},lt.prototype.pop=function(e){if(e=t.defaultValue(e,0),0!==this._length){var r=this._array,n=r[e];return ft(r,e,--this._length),this.heapify(e),n}};var dt={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},ct=20,pt=new lt({comparator:function(e,t){return e.priority-t.priority}});pt.maximumLength=ct,pt.reserve(ct);var ht=[],mt={},yt="undefined"!=typeof document?new je(document.location.href):new je,vt=new ot;function wt(){}function gt(e){t.defined(e.priorityFunction)&&(e.priority=e.priorityFunction())}function _t(e){var r=t.defaultValue(wt.requestsByServer[e],wt.maximumRequestsPerServer);return mt[e]<r}function Ct(e){return e.state===nt.UNISSUED&&(e.state=nt.ISSUED,e.deferred=t.when.defer()),e.deferred.promise}function Et(e){var t=Ct(e);return e.state=nt.ACTIVE,ht.push(e),++dt.numberOfActiveRequests,++dt.numberOfActiveRequestsEver,++mt[e.serverKey],e.requestFunction().then(function(e){return function(t){e.state!==nt.CANCELLED&&(--dt.numberOfActiveRequests,--mt[e.serverKey],vt.raiseEvent(),e.state=nt.RECEIVED,e.deferred.resolve(t))}}(e)).otherwise(function(e){return function(t){e.state!==nt.CANCELLED&&(++dt.numberOfFailedRequests,--dt.numberOfActiveRequests,--mt[e.serverKey],vt.raiseEvent(t),e.state=nt.FAILED,e.deferred.reject(t))}}(e)),t}function xt(e){var r=e.state===nt.ACTIVE;e.state=nt.CANCELLED,++dt.numberOfCancelledRequests,e.deferred.reject(),r&&(--dt.numberOfActiveRequests,--mt[e.serverKey],++dt.numberOfCancelledActiveRequests),t.defined(e.cancelFunction)&&e.cancelFunction()}wt.maximumRequests=50,wt.maximumRequestsPerServer=6,wt.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},wt.throttleRequests=!0,wt.debugShowStatistics=!1,wt.requestCompletedEvent=vt,Object.defineProperties(wt,{statistics:{get:function(){return dt}},priorityHeapLength:{get:function(){return ct},set:function(e){if(e<ct)for(;pt.length>e;)xt(pt.pop());ct=e,pt.maximumLength=e,pt.reserve(e)}}}),wt.update=function(){var e,t,r=0,n=ht.length;for(e=0;e<n;++e)(t=ht[e]).cancelled&&xt(t),t.state===nt.ACTIVE?r>0&&(ht[e-r]=t):++r;ht.length-=r;var i=pt.internalArray,a=pt.length;for(e=0;e<a;++e)gt(i[e]);pt.resort();for(var s=Math.max(wt.maximumRequests-ht.length,0),o=0;o<s&&pt.length>0;)(t=pt.pop()).cancelled?xt(t):!t.throttleByServer||_t(t.serverKey)?(Et(t),++o):xt(t);!function(){wt.debugShowStatistics&&(0===dt.numberOfActiveRequests&&dt.lastNumberOfActiveRequests>0&&(dt.numberOfAttemptedRequests>0&&(console.log("Number of attempted requests: "+dt.numberOfAttemptedRequests),dt.numberOfAttemptedRequests=0),dt.numberOfCancelledRequests>0&&(console.log("Number of cancelled requests: "+dt.numberOfCancelledRequests),dt.numberOfCancelledRequests=0),dt.numberOfCancelledActiveRequests>0&&(console.log("Number of cancelled active requests: "+dt.numberOfCancelledActiveRequests),dt.numberOfCancelledActiveRequests=0),dt.numberOfFailedRequests>0&&(console.log("Number of failed requests: "+dt.numberOfFailedRequests),dt.numberOfFailedRequests=0)),dt.lastNumberOfActiveRequests=dt.numberOfActiveRequests)}()},wt.getServerKey=function(e){var r=new je(e).resolve(yt),n=r.authority;/:/.test(n)||(n=n+":"+("https"===r.scheme?"443":"80"));var i=mt[n];return t.defined(i)||(mt[n]=0),n},wt.request=function(e){if(rt(e.url)||et(e.url))return vt.raiseEvent(),e.state=nt.RECEIVED,e.requestFunction();if(++dt.numberOfAttemptedRequests,t.defined(e.serverKey)||(e.serverKey=wt.getServerKey(e.url)),!wt.throttleRequests||!e.throttleByServer||_t(e.serverKey)){if(!wt.throttleRequests||!e.throttle)return Et(e);if(!(ht.length>=wt.maximumRequests)){gt(e);var r=pt.insert(e);if(t.defined(r)){if(r===e)return;xt(r)}return Ct(e)}}},wt.clearForSpecs=function(){for(;pt.length>0;)xt(pt.pop());for(var e=ht.length,t=0;t<e;++t)xt(ht[t]);ht.length=0,mt={},dt.numberOfAttemptedRequests=0,dt.numberOfActiveRequests=0,dt.numberOfCancelledRequests=0,dt.numberOfCancelledActiveRequests=0,dt.numberOfFailedRequests=0,dt.numberOfActiveRequestsEver=0,dt.lastNumberOfActiveRequests=0},wt.numberOfActiveRequestsByServer=function(e){return mt[e]},wt.requestHeap=pt;var At={},Ot={};At.add=function(e,r){var n=e.toLowerCase()+":"+r;t.defined(Ot[n])||(Ot[n]=!0)},At.remove=function(e,r){var n=e.toLowerCase()+":"+r;t.defined(Ot[n])&&delete Ot[n]},At.contains=function(e){var r=function(e){var r=new je(e);r.normalize();var n=r.getAuthority();if(t.defined(n)){if(-1!==n.indexOf("@")){var i=n.split("@");n=i[1]}if(-1===n.indexOf(":")){var a=r.getScheme();if(t.defined(a)||(a=(a=window.location.protocol).substring(0,a.length-1)),"http"===a)n+=":80";else{if("https"!==a)return;n+=":443"}}return n}}(e);return!(!t.defined(r)||!t.defined(Ot[r]))},At.clear=function(){Ot={}};var St,Rt=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),e.responseType="blob","blob"===e.responseType}catch(e){return!1}}();function Tt(e,r,n,i){var a,s=e.query;if(!t.defined(s)||0===s.length)return{};if(-1===s.indexOf("=")){var o={};o[s]=void 0,a=o}else a=function(e){var r={};if(""===e)return r;for(var n=e.replace(/\+/g,"%20").split(/[&;]/),i=0,a=n.length;i<a;++i){var s=n[i].split("="),o=decodeURIComponent(s[0]),u=s[1];u=t.defined(u)?decodeURIComponent(u):"";var l=r[o];"string"==typeof l?r[o]=[l,u]:Array.isArray(l)?l.push(u):r[o]=u}return r}(s);r._queryParameters=n?Dt(a,r._queryParameters,i):a,e.query=void 0}function Mt(e,r){var n=r._queryParameters,i=Object.keys(n);1!==i.length||t.defined(n[i[0]])?e.query=function(e){var t="";for(var r in e)if(e.hasOwnProperty(r)){var n=e[r],i=encodeURIComponent(r)+"=";if(Array.isArray(n))for(var a=0,s=n.length;a<s;++a)t+=i+encodeURIComponent(n[a])+"&";else t+=i+encodeURIComponent(n)+"&"}return t.slice(0,-1)}(n):e.query=i[0]}function bt(e,r){return t.defined(e)?t.defined(e.clone)?e.clone():Ge(e):r}function It(e){if(e.state===nt.ISSUED||e.state===nt.ACTIVE)throw new s.RuntimeError("The Resource is already being fetched.");e.state=nt.UNISSUED,e.deferred=void 0}function Dt(e,r,n){if(!n)return Ze(e,r);var i=Ge(e,!0);for(var a in r)if(r.hasOwnProperty(a)){var s=i[a],o=r[a];t.defined(s)?(Array.isArray(s)||(s=i[a]=[s]),i[a]=s.concat(o)):i[a]=Array.isArray(o)?o.slice():o}return i}function qt(e){"string"==typeof(e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT))&&(e={url:e}),this._url=void 0,this._templateValues=bt(e.templateValues,{}),this._queryParameters=bt(e.queryParameters,{}),this.headers=bt(e.headers,{}),this.request=t.defaultValue(e.request,new at),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=t.defaultValue(e.retryAttempts,0),this._retryCount=0;var r=new je(e.url);Tt(r,this,!0,!0),r.fragment=void 0,this._url=r.toString()}function Pt(e){var r=e.resource,n=e.flipY,i=e.preferImageBitmap,a=r.request;a.url=r.url,a.requestFunction=function(){var e=!1;r.isDataUri||r.isBlobUri||(e=r.isCrossOriginUrl);var s=t.when.defer();return qt._Implementations.createImage(a,e,s,n,i),s.promise};var s=wt.request(a);if(t.defined(s))return s.otherwise((function(e){return a.state!==nt.FAILED?t.when.reject(e):r.retryOnError(e).then((function(s){return s?(a.state=nt.UNISSUED,a.deferred=void 0,Pt({resource:r,flipY:n,preferImageBitmap:i})):t.when.reject(e)}))}))}qt.createIfNeeded=function(e){return e instanceof qt?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new qt({url:e})},qt.supportsImageBitmapOptions=function(){return t.defined(St)?St:St="function"!=typeof createImageBitmap?t.when.resolve(!1):qt.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg=="}).then((function(e){return createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none"})})).then((function(e){return!0})).otherwise((function(){return!1}))},Object.defineProperties(qt,{isBlobSupported:{get:function(){return Rt}}}),Object.defineProperties(qt.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){var t=new je(e);Tt(t,this,!1),t.fragment=void 0,this._url=t.toString()}},extension:{get:function(){return function(e){var t=new je(e);t.normalize();var r=t.path,n=r.lastIndexOf("/");return-1!==n&&(r=r.substr(n+1)),n=r.lastIndexOf("."),-1===n?"":r.substr(n+1)}(this._url)}},isDataUri:{get:function(){return rt(this._url)}},isBlobUri:{get:function(){return et(this._url)}},isCrossOriginUrl:{get:function(){return function(e){t.defined(Ke)||(Ke=document.createElement("a")),Ke.href=window.location.href;var r=Ke.host,n=Ke.protocol;return Ke.href=e,Ke.href=Ke.href,n!==Ke.protocol||r!==Ke.host}(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}}}),qt.prototype.getUrlComponent=function(e,r){if(this.isDataUri)return this._url;var n=new je(this._url);e&&Mt(n,this);var i=n.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),a=this._templateValues;return i=i.replace(/{(.*?)}/g,(function(e,r){var n=a[r];return t.defined(n)?encodeURIComponent(n):e})),r&&t.defined(this.proxy)&&(i=this.proxy.getURL(i)),i},qt.prototype.setQueryParameters=function(e,t){this._queryParameters=t?Dt(this._queryParameters,e,!1):Dt(e,this._queryParameters,!1)},qt.prototype.appendQueryParameters=function(e){this._queryParameters=Dt(e,this._queryParameters,!0)},qt.prototype.setTemplateValues=function(e,t){this._templateValues=t?Ze(this._templateValues,e):Ze(e,this._templateValues)},qt.prototype.getDerivedResource=function(e){var r=this.clone();if(r._retryCount=0,t.defined(e.url)){var n=new je(e.url);Tt(n,r,!0,t.defaultValue(e.preserveQueryParameters,!1)),n.fragment=void 0,r._url=n.resolve(new je(Qe(this._url))).toString()}return t.defined(e.queryParameters)&&(r._queryParameters=Ze(e.queryParameters,r._queryParameters)),t.defined(e.templateValues)&&(r._templateValues=Ze(e.templateValues,r.templateValues)),t.defined(e.headers)&&(r.headers=Ze(e.headers,r.headers)),t.defined(e.proxy)&&(r.proxy=e.proxy),t.defined(e.request)&&(r.request=e.request),t.defined(e.retryCallback)&&(r.retryCallback=e.retryCallback),t.defined(e.retryAttempts)&&(r.retryAttempts=e.retryAttempts),r},qt.prototype.retryOnError=function(e){var r=this.retryCallback;if("function"!=typeof r||this._retryCount>=this.retryAttempts)return t.when(!1);var n=this;return t.when(r(this,e)).then((function(e){return++n._retryCount,e}))},qt.prototype.clone=function(e){return t.defined(e)||(e=new qt({url:this._url})),e._url=this._url,e._queryParameters=Ge(this._queryParameters),e._templateValues=Ge(this._templateValues),e.headers=Ge(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},qt.prototype.getBaseUri=function(e){return function(e,r){var n="",i=e.lastIndexOf("/");return-1!==i&&(n=e.substring(0,i+1)),r?(e=new je(e),t.defined(e.query)&&(n+="?"+e.query),t.defined(e.fragment)&&(n+="#"+e.fragment),n):n}(this.getUrlComponent(e),e)},qt.prototype.appendForwardSlash=function(){var e;this._url=(0!==(e=this._url).length&&"/"===e[e.length-1]||(e+="/"),e)},qt.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},qt.fetchArrayBuffer=function(e){return new qt(e).fetchArrayBuffer()},qt.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},qt.fetchBlob=function(e){return new qt(e).fetchBlob()},qt.prototype.fetchImage=function(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT);var r=t.defaultValue(e.preferImageBitmap,!1),n=t.defaultValue(e.preferBlob,!1),i=t.defaultValue(e.flipY,!1);if(It(this.request),!Rt||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!n)return Pt({resource:this,flipY:i,preferImageBitmap:r});var a,s,o,u=this.fetchBlob();return t.defined(u)?qt.supportsImageBitmapOptions().then((function(e){return a=e&&r,u})).then((function(e){if(t.defined(e)){if(o=e,a)return qt.createImageBitmapFromBlob(e,{flipY:i,premultiplyAlpha:!1});var r=window.URL.createObjectURL(e);return Pt({resource:s=new qt({url:r}),flipY:i,preferImageBitmap:!1})}})).then((function(e){if(t.defined(e))return e.blob=o,a||window.URL.revokeObjectURL(s.url),e})).otherwise((function(e){return t.defined(s)&&window.URL.revokeObjectURL(s.url),e.blob=o,t.when.reject(e)})):void 0},qt.fetchImage=function(e){return new qt(e).fetchImage({flipY:e.flipY,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},qt.prototype.fetchText=function(){return this.fetch({responseType:"text"})},qt.fetchText=function(e){return new qt(e).fetchText()},qt.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});const r=this;if(t.defined(e))return e.then((function(e){if(!t.defined(e))return;let n={};try{n=JSON.parse(e)}catch(t){console.error("====JSON parse ERR:===="),console.log(e),console.log(r),console.log(t)}return n}))},qt.fetchJson=function(e){return new qt(e).fetchJson()},qt.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},qt.fetchXML=function(e){return new qt(e).fetchXML()},qt.prototype.fetchJsonp=function(e){var r;e=t.defaultValue(e,"callback"),It(this.request);do{r="loadJsonp"+Math.random().toString().substring(2,8)}while(t.defined(window[r]));return function e(r,n,i){var a={};a[n]=i,r.setQueryParameters(a);var s=r.request;s.url=r.url,s.requestFunction=function(){var e=t.when.defer();return window[i]=function(t){e.resolve(t);try{delete window[i]}catch(e){window[i]=void 0}},qt._Implementations.loadAndExecuteScript(r.url,i,e),e.promise};var o=wt.request(s);if(t.defined(o))return o.otherwise((function(a){return s.state!==nt.FAILED?t.when.reject(a):r.retryOnError(a).then((function(o){return o?(s.state=nt.UNISSUED,s.deferred=void 0,e(r,n,i)):t.when.reject(a)}))}))}(this,e,r)},qt.fetchJsonp=function(e){return new qt(e).fetchJsonp(e.callbackParameterName)},qt.prototype._makeRequest=function(e){var r=this;It(r.request);var n=r.request;n.url=r.url,n.requestFunction=function(){var i=e.responseType,a=Ze(e.headers,r.headers),s=e.overrideMimeType,o=e.method,u=e.data,l=t.when.defer(),f=qt._Implementations.loadWithXhr(r.url,i,o,u,a,l,s);return t.defined(f)&&t.defined(f.abort)&&(n.cancelFunction=function(){f.abort()}),l.promise};var i=wt.request(n);if(t.defined(i))return i.then((function(e){return e})).otherwise((function(i){return n.state!==nt.FAILED?t.when.reject(i):r.retryOnError(i).then((function(a){return a?(n.state=nt.UNISSUED,n.deferred=void 0,r.fetch(e)):t.when.reject(i)}))}))};var Ut=/^data:(.*?)(;base64)?,(.*)$/;function Nt(e,t){var r=decodeURIComponent(t);return e?atob(r):r}function Ft(e,t){for(var r=Nt(e,t),n=new ArrayBuffer(r.length),i=new Uint8Array(n),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return n}function zt(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}qt.prototype.fetch=function(e){return(e=bt(e,{})).method="GET",this._makeRequest(e)},qt.fetch=function(e){return new qt(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},qt.prototype.delete=function(e){return(e=bt(e,{})).method="DELETE",this._makeRequest(e)},qt.delete=function(e){return new qt(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},qt.prototype.head=function(e){return(e=bt(e,{})).method="HEAD",this._makeRequest(e)},qt.head=function(e){return new qt(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},qt.prototype.options=function(e){return(e=bt(e,{})).method="OPTIONS",this._makeRequest(e)},qt.options=function(e){return new qt(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},qt.prototype.post=function(e,t){return r.Check.defined("data",e),(t=bt(t,{})).method="POST",t.data=e,this._makeRequest(t)},qt.post=function(e){return new qt(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},qt.prototype.put=function(e,t){return r.Check.defined("data",e),(t=bt(t,{})).method="PUT",t.data=e,this._makeRequest(t)},qt.put=function(e){return new qt(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},qt.prototype.patch=function(e,t){return r.Check.defined("data",e),(t=bt(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},qt.patch=function(e){return new qt(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},qt._Implementations={},qt._Implementations.createImage=function(e,r,n,i,a){var o=e.url;qt.supportsImageBitmapOptions().then((function(u){if(u&&a){var l=t.when.defer(),f=qt._Implementations.loadWithXhr(o,"blob","GET",void 0,void 0,l,void 0,void 0,void 0);return t.defined(f)&&t.defined(f.abort)&&(e.cancelFunction=function(){f.abort()}),l.promise.then((function(e){if(t.defined(e))return qt.createImageBitmapFromBlob(e,{flipY:i,premultiplyAlpha:!1});n.reject(new s.RuntimeError("Successfully retrieved "+o+" but it contained no content."))})).then(n.resolve)}!function(e,t,r){var n=new Image;n.onload=function(){r.resolve(n)},n.onerror=function(e){r.reject(e)},t&&(At.contains(e)?n.crossOrigin="use-credentials":n.crossOrigin=""),n.src=e}(o,r,n)})).otherwise(n.reject)},qt.createImageBitmapFromBlob=function(e,t){return r.Check.defined("options",t),r.Check.typeOf.bool("options.flipY",t.flipY),r.Check.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none"})};var Lt="undefined"==typeof XMLHttpRequest;function Vt(e){if(e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=t.defaultValue(e.addNewLeapSeconds,!0),t.defined(e.data))jt(this,e.data);else if(t.defined(e.url)){var r=qt.createIfNeeded(e.url),n=this;this._downloadPromise=t.when(r.fetchJson(),(function(e){jt(n,e)}),(function(){n._dataError="An error occurred while retrieving the EOP data from the URL "+r.url+"."}))}else jt(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function Bt(e,t){return Ve.compare(e.julianDate,t)}function jt(e,r){if(t.defined(r.columnNames))if(t.defined(r.samples)){var n=r.columnNames.indexOf("modifiedJulianDateUtc"),i=r.columnNames.indexOf("xPoleWanderRadians"),a=r.columnNames.indexOf("yPoleWanderRadians"),s=r.columnNames.indexOf("ut1MinusUtcSeconds"),o=r.columnNames.indexOf("xCelestialPoleOffsetRadians"),u=r.columnNames.indexOf("yCelestialPoleOffsetRadians"),l=r.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||i<0||a<0||s<0||o<0||u<0||l<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var f,d=e._samples=r.samples,c=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=i,e._yPoleWanderRadiansColumn=a,e._ut1MinusUtcSecondsColumn=s,e._xCelestialPoleOffsetRadiansColumn=o,e._yCelestialPoleOffsetRadiansColumn=u,e._taiMinusUtcSecondsColumn=l,e._columnCount=r.columnNames.length,e._lastIndex=void 0;for(var p=e._addNewLeapSeconds,h=0,m=d.length;h<m;h+=e._columnCount){var y=d[h+n],v=d[h+l],w=new Ve(y+Ce.MODIFIED_JULIAN_DATE_DIFFERENCE,v,Ee.TAI);if(c.push(w),p){if(v!==f&&t.defined(f)){var g=Ve.leapSeconds,_=me(g,w,Bt);if(_<0){var C=new _e(w,v);g.splice(~_,0,C)}}f=v}}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function kt(e,t,r,n,i){var a=r*n;i.xPoleWander=t[a+e._xPoleWanderRadiansColumn],i.yPoleWander=t[a+e._yPoleWanderRadiansColumn],i.xPoleOffset=t[a+e._xCelestialPoleOffsetRadiansColumn],i.yPoleOffset=t[a+e._yCelestialPoleOffsetRadiansColumn],i.ut1MinusUtc=t[a+e._ut1MinusUtcSecondsColumn]}function Wt(e,t,r){return t+e*(r-t)}function Yt(e,t,r,n,i,a,s){var o=e._columnCount;if(a>t.length-1)return s.xPoleWander=0,s.yPoleWander=0,s.xPoleOffset=0,s.yPoleOffset=0,s.ut1MinusUtc=0,s;var u=t[i],l=t[a];if(u.equals(l)||n.equals(u))return kt(e,r,i,o,s),s;if(n.equals(l))return kt(e,r,a,o,s),s;var f=Ve.secondsDifference(n,u)/Ve.secondsDifference(l,u),d=i*o,c=a*o,p=r[d+e._ut1MinusUtcSecondsColumn],h=r[c+e._ut1MinusUtcSecondsColumn],m=h-p;if(m>.5||m<-.5){var y=r[d+e._taiMinusUtcSecondsColumn],v=r[c+e._taiMinusUtcSecondsColumn];y!==v&&(l.equals(n)?p=h:h-=v-y)}return s.xPoleWander=Wt(f,r[d+e._xPoleWanderRadiansColumn],r[c+e._xPoleWanderRadiansColumn]),s.yPoleWander=Wt(f,r[d+e._yPoleWanderRadiansColumn],r[c+e._yPoleWanderRadiansColumn]),s.xPoleOffset=Wt(f,r[d+e._xCelestialPoleOffsetRadiansColumn],r[c+e._xCelestialPoleOffsetRadiansColumn]),s.yPoleOffset=Wt(f,r[d+e._yCelestialPoleOffsetRadiansColumn],r[c+e._yCelestialPoleOffsetRadiansColumn]),s.ut1MinusUtc=Wt(f,p,h),s}function Jt(e,r,n){this.heading=t.defaultValue(e,0),this.pitch=t.defaultValue(r,0),this.roll=t.defaultValue(n,0)}qt._Implementations.loadWithXhr=function(e,r,n,i,a,o,u){var l=Ut.exec(e);if(null===l){if(!Lt){var f=new XMLHttpRequest;if(At.contains(e)&&(f.withCredentials=!0),f.open(n,e,!0),t.defined(u)&&t.defined(f.overrideMimeType)&&f.overrideMimeType(u),t.defined(a))for(var d in a)a.hasOwnProperty(d)&&f.setRequestHeader(d,a[d]);t.defined(r)&&(f.responseType=r);var c=!1;return"string"==typeof e&&(c=0===e.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),f.onload=function(){if(!(f.status<200||f.status>=300)||c&&0===f.status){var e=f.response,i=f.responseType;if("HEAD"===n||"OPTIONS"===n){var a=f.getAllResponseHeaders().trim().split(/[\r\n]+/),u={};return a.forEach((function(e){var t=e.split(": "),r=t.shift();u[r]=t.join(": ")})),void o.resolve(u)}if(204===f.status)o.resolve();else if(!t.defined(e)||t.defined(r)&&i!==r)if("json"===r&&"string"==typeof e)try{o.resolve(JSON.parse(e))}catch(e){o.reject(e)}else(""===i||"document"===i)&&t.defined(f.responseXML)&&f.responseXML.hasChildNodes()?o.resolve(f.responseXML):""!==i&&"text"!==i||!t.defined(f.responseText)?o.reject(new s.RuntimeError("Invalid XMLHttpRequest response type.")):o.resolve(f.responseText);else o.resolve(e)}else o.reject(new st(f.status,f.response,f.getAllResponseHeaders()))},f.onerror=function(e){o.reject(new st)},f.send(i),f}!function(e,t,r,n,i,a,o){var u=require("url").parse(e),l="https:"===u.protocol?require("https"):require("http"),f=require("zlib"),d={protocol:u.protocol,hostname:u.hostname,port:u.port,path:u.path,query:u.query,method:r,headers:i};l.request(d).on("response",(function(e){if(e.statusCode<200||e.statusCode>=300)a.reject(new st(e.statusCode,e,e.headers));else{var r=[];e.on("data",(function(e){r.push(e)})),e.on("end",(function(){var n=Buffer.concat(r);"gzip"===e.headers["content-encoding"]?f.gunzip(n,(function(e,r){e?a.reject(new s.RuntimeError("Error decompressing response.")):a.resolve(zt(r,t))})):a.resolve(zt(n,t))}))}})).on("error",(function(e){a.reject(new st)})).end()}(e,r,n,0,a,o)}else o.resolve(function(e,r){r=t.defaultValue(r,"");var n=e[1],i=!!e[2],a=e[3];switch(r){case"":case"text":return Nt(i,a);case"arraybuffer":return Ft(i,a);case"blob":var s=Ft(i,a);return new Blob([s],{type:n});case"document":return(new DOMParser).parseFromString(Nt(i,a),n);case"json":return JSON.parse(Nt(i,a))}}(l,r))},qt._Implementations.loadAndExecuteScript=function(e,r,n){return function(e){var r=t.when.defer(),n=document.createElement("script");n.async=!0,n.src=e;var i=document.getElementsByTagName("head")[0];return n.onload=function(){n.onload=void 0,i.removeChild(n),r.resolve()},n.onerror=function(e){r.reject(e)},i.appendChild(n),r.promise}(e).otherwise(n.reject)},qt._DefaultImplementations={},qt._DefaultImplementations.createImage=qt._Implementations.createImage,qt._DefaultImplementations.loadWithXhr=qt._Implementations.loadWithXhr,qt._DefaultImplementations.loadAndExecuteScript=qt._Implementations.loadAndExecuteScript,qt.DEFAULT=Object.freeze(new qt({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),Vt.NONE=Object.freeze({getPromiseToLoad:function(){return t.when()},compute:function(e,r){return t.defined(r)?(r.xPoleWander=0,r.yPoleWander=0,r.xPoleOffset=0,r.yPoleOffset=0,r.ut1MinusUtc=0):r=new ye(0,0,0,0,0),r}}),Vt.prototype.getPromiseToLoad=function(){return t.when(this._downloadPromise)},Vt.prototype.compute=function(e,r){if(t.defined(this._samples)){if(t.defined(r)||(r=new ye(0,0,0,0,0)),0===this._samples.length)return r.xPoleWander=0,r.yPoleWander=0,r.xPoleOffset=0,r.yPoleOffset=0,r.ut1MinusUtc=0,r;var n=this._dates,i=this._lastIndex,a=0,o=0;if(t.defined(i)){var u=n[i],l=n[i+1],f=Ve.lessThanOrEquals(u,e),d=!t.defined(l),c=d||Ve.greaterThanOrEquals(l,e);if(f&&c)return a=i,!d&&l.equals(e)&&++a,o=a+1,Yt(this,n,this._samples,e,a,o,r),r}var p=me(n,e,Ve.compare,this._dateColumn);return p>=0?(p<n.length-1&&n[p+1].equals(e)&&++p,a=p,o=p):(a=(o=~p)-1)<0&&(a=0),this._lastIndex=a,Yt(this,n,this._samples,e,a,o,r),r}if(t.defined(this._dataError))throw new s.RuntimeError(this._dataError)},Jt.fromQuaternion=function(e,r){t.defined(r)||(r=new Jt);var i=2*(e.w*e.y-e.z*e.x),a=1-2*(e.x*e.x+e.y*e.y),s=2*(e.w*e.x+e.y*e.z),o=1-2*(e.y*e.y+e.z*e.z),u=2*(e.w*e.z+e.x*e.y);return r.heading=-Math.atan2(u,o),r.roll=Math.atan2(s,a),r.pitch=-n.CesiumMath.asinClamped(i),r},Jt.fromDegrees=function(e,r,i,a){return t.defined(a)||(a=new Jt),a.heading=e*n.CesiumMath.RADIANS_PER_DEGREE,a.pitch=r*n.CesiumMath.RADIANS_PER_DEGREE,a.roll=i*n.CesiumMath.RADIANS_PER_DEGREE,a},Jt.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.heading=e.heading,r.pitch=e.pitch,r.roll=e.roll,r):new Jt(e.heading,e.pitch,e.roll)},Jt.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e.heading===r.heading&&e.pitch===r.pitch&&e.roll===r.roll},Jt.equalsEpsilon=function(e,r,i,a){return e===r||t.defined(e)&&t.defined(r)&&n.CesiumMath.equalsEpsilon(e.heading,r.heading,i,a)&&n.CesiumMath.equalsEpsilon(e.pitch,r.pitch,i,a)&&n.CesiumMath.equalsEpsilon(e.roll,r.roll,i,a)},Jt.prototype.clone=function(e){return Jt.clone(this,e)},Jt.prototype.equals=function(e){return Jt.equals(this,e)},Jt.prototype.equalsEpsilon=function(e,t,r){return Jt.equalsEpsilon(this,e,t,r)},Jt.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var Ht,Xt,Gt,Zt=/((?:.*\/)|^)Cesium\.js$/;function Qt(e){return"undefined"==typeof document?e:(t.defined(Ht)||(Ht=document.createElement("a")),Ht.href=e,Ht.href=Ht.href,Ht.href)}function Kt(){return t.defined(Xt)||(e="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:"object"==typeof define&&t.defined(define.amd)&&!define.amd.toUrlUndefined&&t.defined(require.toUrl)?Qe("..",tr("Core/buildModuleUrl.js")):function(){for(var e=document.getElementsByTagName("script"),t=0,r=e.length;t<r;++t){var n=e[t].getAttribute("src"),i=Zt.exec(n);if(null!==i)return i[1]}}(),(Xt=new qt({url:Qt(e)})).appendForwardSlash()),Xt;var e}function $t(e){return Qt(require.toUrl("../"+e))}function er(e){return Kt().getDerivedResource({url:e}).url}function tr(e){return t.defined(Gt)||(Gt="object"==typeof define&&t.defined(define.amd)&&!define.amd.toUrlUndefined&&t.defined(require.toUrl)?$t:er),Gt(e)}function rr(e,t,r){this.x=e,this.y=t,this.s=r}function nr(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT),this._xysFileUrlTemplate=qt.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=t.defaultValue(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=t.defaultValue(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new Ve(this._sampleZeroJulianEphemerisDate,0,Ee.TAI),this._stepSizeDays=t.defaultValue(e.stepSizeDays,1),this._samplesPerXysFile=t.defaultValue(e.samplesPerXysFile,1e3),this._totalSamples=t.defaultValue(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var r=this._interpolationOrder,n=this._denominators=new Array(r+1),i=this._xTable=new Array(r+1),a=Math.pow(this._stepSizeDays,r),s=0;s<=r;++s){n[s]=a,i[s]=s*this._stepSizeDays;for(var o=0;o<=r;++o)o!==s&&(n[s]*=s-o);n[s]=1/n[s]}this._work=new Array(r+1),this._coef=new Array(r+1)}tr._cesiumScriptRegex=Zt,tr._buildModuleUrlFromBaseUrl=er,tr._clearBaseResource=function(){Xt=void 0},tr.setBaseUrl=function(e){Xt=qt.DEFAULT.getDerivedResource({url:e})},tr.getCesiumBaseUrl=Kt,tr.getModUrl=function(e){return tr(e)};var ir=new Ve(0,0,Ee.TAI);function ar(e,t,r){var n=ir;return n.dayNumber=t,n.secondsOfDay=r,Ve.daysDifference(n,e._sampleZeroDateTT)}function sr(e,r){if(e._chunkDownloadsInProgress[r])return e._chunkDownloadsInProgress[r];var n,i=t.when.defer();e._chunkDownloadsInProgress[r]=i;var a=e._xysFileUrlTemplate;return n=t.defined(a)?a.getDerivedResource({templateValues:{0:r}}):new qt({url:tr("Assets/IAU2006_XYS/IAU2006_XYS_"+r+".json")}),t.when(n.fetchJson(),(function(t){e._chunkDownloadsInProgress[r]=!1;for(var n=e._samples,a=t.samples,s=r*e._samplesPerXysFile*3,o=0,u=a.length;o<u;++o)n[s+o]=a[o];i.resolve()})),i.promise}nr.prototype.preload=function(e,r,n,i){var a=ar(this,e,r),s=ar(this,n,i),o=a/this._stepSizeDays-this._interpolationOrder/2|0;o<0&&(o=0);var u=s/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;u>=this._totalSamples&&(u=this._totalSamples-1);for(var l=o/this._samplesPerXysFile|0,f=u/this._samplesPerXysFile|0,d=[],c=l;c<=f;++c)d.push(sr(this,c));return t.when.all(d)},nr.prototype.computeXysRadians=function(e,r,n){var i=ar(this,e,r);if(!(i<0)){var a=i/this._stepSizeDays|0;if(!(a>=this._totalSamples)){var s=this._interpolationOrder,o=a-(s/2|0);o<0&&(o=0);var u=o+s;u>=this._totalSamples&&(o=(u=this._totalSamples-1)-s)<0&&(o=0);var l=!1,f=this._samples;if(t.defined(f[3*o])||(sr(this,o/this._samplesPerXysFile|0),l=!0),t.defined(f[3*u])||(sr(this,u/this._samplesPerXysFile|0),l=!0),!l){t.defined(n)?(n.x=0,n.y=0,n.s=0):n=new rr(0,0,0);var d,c,p=i-o*this._stepSizeDays,h=this._work,m=this._denominators,y=this._coef,v=this._xTable;for(d=0;d<=s;++d)h[d]=p-v[d];for(d=0;d<=s;++d){for(y[d]=1,c=0;c<=s;++c)c!==d&&(y[d]*=h[c]);y[d]*=m[d];var w=3*(o+d);n.x+=y[d]*f[w++],n.y+=y[d]*f[w++],n.s+=y[d]*f[w]}return n}}}};var or={},ur={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},lr={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},fr={},dr={east:new n.Cartesian3,north:new n.Cartesian3,up:new n.Cartesian3,west:new n.Cartesian3,south:new n.Cartesian3,down:new n.Cartesian3},cr=new n.Cartesian3,pr=new n.Cartesian3,hr=new n.Cartesian3;or.localFrameToFixedFrameGenerator=function(e,s){if(!ur.hasOwnProperty(e)||!ur[e].hasOwnProperty(s))throw new r.DeveloperError("firstAxis and secondAxis must be east, north, up, west, south or down.");var o,u=ur[e][s],l=e+s;return t.defined(fr[l])?o=fr[l]:(o=function(r,o,l){if(t.defined(l)||(l=new a.Matrix4),n.Cartesian3.equalsEpsilon(r,n.Cartesian3.ZERO,n.CesiumMath.EPSILON14))n.Cartesian3.unpack(lr[e],0,cr),n.Cartesian3.unpack(lr[s],0,pr),n.Cartesian3.unpack(lr[u],0,hr);else if(n.CesiumMath.equalsEpsilon(r.x,0,n.CesiumMath.EPSILON14)&&n.CesiumMath.equalsEpsilon(r.y,0,n.CesiumMath.EPSILON14)){var f=n.CesiumMath.sign(r.z);n.Cartesian3.unpack(lr[e],0,cr),"east"!==e&&"west"!==e&&n.Cartesian3.multiplyByScalar(cr,f,cr),n.Cartesian3.unpack(lr[s],0,pr),"east"!==s&&"west"!==s&&n.Cartesian3.multiplyByScalar(pr,f,pr),n.Cartesian3.unpack(lr[u],0,hr),"east"!==u&&"west"!==u&&n.Cartesian3.multiplyByScalar(hr,f,hr)}else{(o=t.defaultValue(o,i.Ellipsoid.WGS84)).geodeticSurfaceNormal(r,dr.up);var d=dr.up,c=dr.east;c.x=-r.y,c.y=r.x,c.z=0,n.Cartesian3.normalize(c,dr.east),n.Cartesian3.cross(d,c,dr.north),n.Cartesian3.multiplyByScalar(dr.up,-1,dr.down),n.Cartesian3.multiplyByScalar(dr.east,-1,dr.west),n.Cartesian3.multiplyByScalar(dr.north,-1,dr.south),cr=dr[e],pr=dr[s],hr=dr[u]}return l[0]=cr.x,l[1]=cr.y,l[2]=cr.z,l[3]=0,l[4]=pr.x,l[5]=pr.y,l[6]=pr.z,l[7]=0,l[8]=hr.x,l[9]=hr.y,l[10]=hr.z,l[11]=0,l[12]=r.x,l[13]=r.y,l[14]=r.z,l[15]=1,l},fr[l]=o),o},or.eastNorthUpToFixedFrame=or.localFrameToFixedFrameGenerator("east","north"),or.northEastDownToFixedFrame=or.localFrameToFixedFrameGenerator("north","east"),or.northUpEastToFixedFrame=or.localFrameToFixedFrameGenerator("north","up"),or.northWestUpToFixedFrame=or.localFrameToFixedFrameGenerator("north","west");var mr=new L,yr=new n.Cartesian3(1,1,1),vr=new a.Matrix4;or.headingPitchRollToFixedFrame=function(e,r,i,s,o){s=t.defaultValue(s,or.eastNorthUpToFixedFrame);var u=L.fromHeadingPitchRoll(r,mr),l=a.Matrix4.fromTranslationQuaternionRotationScale(n.Cartesian3.ZERO,u,yr,vr);return o=s(e,i,o),a.Matrix4.multiply(o,l,o)};var wr=new a.Matrix4,gr=new a.Matrix3;or.headingPitchRollQuaternion=function(e,t,r,n,i){var s=or.headingPitchRollToFixedFrame(e,t,r,n,wr),o=a.Matrix4.getMatrix3(s,gr);return L.fromRotationMatrix(o,i)};var _r=new n.Cartesian3(1,1,1),Cr=new n.Cartesian3,Er=new a.Matrix4,xr=new a.Matrix4,Ar=new a.Matrix3,Or=new L;or.fixedFrameToHeadingPitchRoll=function(e,r,s,o){r=t.defaultValue(r,i.Ellipsoid.WGS84),s=t.defaultValue(s,or.eastNorthUpToFixedFrame),t.defined(o)||(o=new Jt);var u=a.Matrix4.getTranslation(e,Cr);if(n.Cartesian3.equals(u,n.Cartesian3.ZERO))return o.heading=0,o.pitch=0,o.roll=0,o;var l=a.Matrix4.inverseTransformation(s(u,r,Er),Er),f=a.Matrix4.setScale(e,_r,xr);f=a.Matrix4.setTranslation(f,n.Cartesian3.ZERO,f),l=a.Matrix4.multiply(l,f,l);var d=L.fromRotationMatrix(a.Matrix4.getMatrix3(l,Ar),Or);return d=L.normalize(d,d),Jt.fromQuaternion(d,o)};var Sr=n.CesiumMath.TWO_PI/86400,Rr=new Ve;or.computeTemeToPseudoFixedMatrix=function(e,r){var i,s=(Rr=Ve.addSeconds(e,-Ve.computeTaiMinusUtc(e),Rr)).dayNumber,o=Rr.secondsOfDay,u=s-2451545,l=(24110.54841+(i=o>=43200?(u+.5)/Ce.DAYS_PER_JULIAN_CENTURY:(u-.5)/Ce.DAYS_PER_JULIAN_CENTURY)*(8640184.812866+i*(.093104+-62e-7*i)))*Sr%n.CesiumMath.TWO_PI+(72921158553e-15+11772758384668e-32*(s-2451545.5))*((o+.5*Ce.SECONDS_PER_DAY)%Ce.SECONDS_PER_DAY),f=Math.cos(l),d=Math.sin(l);return t.defined(r)?(r[0]=f,r[1]=-d,r[2]=0,r[3]=d,r[4]=f,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r):new a.Matrix3(f,d,0,-d,f,0,0,0,1)},or.iau2006XysData=new nr,or.earthOrientationParameters=Vt.NONE,or.preloadIcrfFixed=function(e){var r=e.start.dayNumber,n=e.start.secondsOfDay+32.184,i=e.stop.dayNumber,a=e.stop.secondsOfDay+32.184,s=or.iau2006XysData.preload(r,n,i,a),o=or.earthOrientationParameters.getPromiseToLoad();return t.when.all([s,o])},or.computeIcrfToFixedMatrix=function(e,r){t.defined(r)||(r=new a.Matrix3);var n=or.computeFixedToIcrfMatrix(e,r);if(t.defined(n))return a.Matrix3.transpose(n,r)};var Tr=new rr(0,0,0),Mr=new ye(0,0,0,0,0,0),br=new a.Matrix3,Ir=new a.Matrix3;or.computeFixedToIcrfMatrix=function(e,r){t.defined(r)||(r=new a.Matrix3);var i=or.earthOrientationParameters.compute(e,Mr);if(t.defined(i)){var s=e.dayNumber,o=e.secondsOfDay+32.184,u=or.iau2006XysData.computeXysRadians(s,o,Tr);if(t.defined(u)){var l=u.x+i.xPoleOffset,f=u.y+i.yPoleOffset,d=1/(1+Math.sqrt(1-l*l-f*f)),c=br;c[0]=1-d*l*l,c[3]=-d*l*f,c[6]=l,c[1]=-d*l*f,c[4]=1-d*f*f,c[7]=f,c[2]=-l,c[5]=-f,c[8]=1-d*(l*l+f*f);var p=a.Matrix3.fromRotationZ(-u.s,Ir),h=a.Matrix3.multiply(c,p,br),m=e.dayNumber-2451545,y=(e.secondsOfDay-Ve.computeTaiMinusUtc(e)+i.ut1MinusUtc)/Ce.SECONDS_PER_DAY,v=.779057273264+y+.00273781191135448*(m+y);v=v%1*n.CesiumMath.TWO_PI;var w=a.Matrix3.fromRotationZ(v,Ir),g=a.Matrix3.multiply(h,w,br),_=Math.cos(i.xPoleWander),C=Math.cos(i.yPoleWander),E=Math.sin(i.xPoleWander),x=Math.sin(i.yPoleWander),A=s-2451545+o/Ce.SECONDS_PER_DAY,O=-47e-6*(A/=36525)*n.CesiumMath.RADIANS_PER_DEGREE/3600,S=Math.cos(O),R=Math.sin(O),T=Ir;return T[0]=_*S,T[1]=_*R,T[2]=E,T[3]=-C*R+x*E*S,T[4]=C*S+x*E*R,T[5]=-x*_,T[6]=-x*R-C*E*S,T[7]=x*S-C*E*R,T[8]=C*_,a.Matrix3.multiply(g,T,r)}}};var Dr=new a.Cartesian4;or.pointToWindowCoordinates=function(e,t,r,n){return(n=or.pointToGLWindowCoordinates(e,t,r,n)).y=2*t[5]-n.y,n},or.pointToGLWindowCoordinates=function(e,r,n,s){t.defined(s)||(s=new i.Cartesian2);var o=Dr;return a.Matrix4.multiplyByVector(e,a.Cartesian4.fromElements(n.x,n.y,n.z,1,o),o),a.Cartesian4.multiplyByScalar(o,1/o.w,o),a.Matrix4.multiplyByVector(r,o,o),i.Cartesian2.fromCartesian4(o,s)};var qr=new n.Cartesian3,Pr=new n.Cartesian3;or.rotationMatrixFromPositionVelocity=function(e,r,i,s){let o=n.Cartesian3.UNIT_Z;var u=n.Cartesian3.cross(r,o,qr);n.Cartesian3.equalsEpsilon(u,n.Cartesian3.ZERO,n.CesiumMath.EPSILON6)&&(u=n.Cartesian3.clone(n.Cartesian3.UNIT_X,u));var l=n.Cartesian3.cross(u,r,Pr);return n.Cartesian3.normalize(l,l),n.Cartesian3.cross(r,l,u),n.Cartesian3.negate(u,u),n.Cartesian3.normalize(u,u),t.defined(s)||(s=new a.Matrix3),s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=u.x,s[4]=u.y,s[5]=u.z,s[6]=l.x,s[7]=l.y,s[8]=l.z,s};var Ur=new a.Matrix4(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),Nr=new i.Cartographic,Fr=new n.Cartesian3,zr=new n.Cartesian3,Lr=new a.Matrix3,Vr=new a.Matrix4,Br=new a.Matrix4;or.basisTo2D=function(e,t,r){var i=a.Matrix4.getTranslation(t,zr),s=e.ellipsoid,o=s.cartesianToCartographic(i,Nr),u=e.project(o,Fr);n.Cartesian3.fromElements(u.z,u.x,u.y,u);var l=or.eastNorthUpToFixedFrame(i,s,Vr),f=a.Matrix4.inverseTransformation(l,Br),d=a.Matrix4.getMatrix3(t,Lr),c=a.Matrix4.multiplyByMatrix3(f,d,r);return a.Matrix4.multiply(Ur,c,r),a.Matrix4.setTranslation(r,u,r),r},or.wgs84To2DModelMatrix=function(e,t,r){var i=e.ellipsoid,s=or.eastNorthUpToFixedFrame(t,i,Vr),o=a.Matrix4.inverseTransformation(s,Br),u=i.cartesianToCartographic(t,Nr),l=e.project(u,Fr);n.Cartesian3.fromElements(l.z,l.x,l.y,l);var f=a.Matrix4.fromTranslation(l,Vr);return a.Matrix4.multiply(Ur,o,r),a.Matrix4.multiply(f,r,r),r},e.FeatureDetection=z,e.Intersect=O,e.Quaternion=L,e.Resource=qt,e.Transforms=or,e.buildModuleUrl=tr}));