define(["./when-45f3d25d","./Check-34538dad","./Cartesian3-ef6ea826","./Cartesian2-a652b463","./BoundingSphere-038d5fbc","./Transforms-c8a82813","./Matrix4-f54b529f","./RuntimeError-86da6af2","./WebGLConstants-3660bc8f","./ComponentDatatype-d28c2e26","./GeometryAttribute-dfebcc43","./PrimitiveType-30fa6f85","./GeometryAttributes-9d45f9e2","./IndexDatatype-6d2070e9","./IntersectionTests-b186d985","./Plane-a0c58786","./arrayRemoveDuplicates-e5b24eaf","./BoundingRectangle-13917389","./AxisAlignedBoundingBox-9187558e","./EllipsoidTangentPlane-dd3d1016","./EllipsoidRhumbLine-0c6cd7c8","./PolygonPipeline-28c8c9d7","./PolylineVolumeGeometryLibrary-78e26dc0","./EllipsoidGeodesic-1abfd38d","./PolylinePipeline-e4210f09"],(function(e,i,n,t,a,r,o,l,s,p,d,c,u,y,f,h,g,m,v,E,P,_,C,k,b){"use strict";function L(i){var a=(i=e.defaultValue(i,e.defaultValue.EMPTY_OBJECT)).polylinePositions,r=i.shapePositions;this._positions=a,this._shape=r,this._ellipsoid=t.Ellipsoid.clone(e.defaultValue(i.ellipsoid,t.Ellipsoid.WGS84)),this._cornerType=e.defaultValue(i.cornerType,C.CornerType.ROUNDED),this._granularity=e.defaultValue(i.granularity,n.CesiumMath.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeOutlineGeometry";var o=1+a.length*n.Cartesian3.packedLength;o+=1+r.length*t.Cartesian2.packedLength,this.packedLength=o+t.Ellipsoid.packedLength+2}L.pack=function(i,a,r){var o;r=e.defaultValue(r,0);var l=i._positions,s=l.length;for(a[r++]=s,o=0;o<s;++o,r+=n.Cartesian3.packedLength)n.Cartesian3.pack(l[o],a,r);var p=i._shape;for(s=p.length,a[r++]=s,o=0;o<s;++o,r+=t.Cartesian2.packedLength)t.Cartesian2.pack(p[o],a,r);return t.Ellipsoid.pack(i._ellipsoid,a,r),r+=t.Ellipsoid.packedLength,a[r++]=i._cornerType,a[r]=i._granularity,a};var T=t.Ellipsoid.clone(t.Ellipsoid.UNIT_SPHERE),D={polylinePositions:void 0,shapePositions:void 0,ellipsoid:T,height:void 0,cornerType:void 0,granularity:void 0};L.unpack=function(i,a,r){var o;a=e.defaultValue(a,0);var l=i[a++],s=new Array(l);for(o=0;o<l;++o,a+=n.Cartesian3.packedLength)s[o]=n.Cartesian3.unpack(i,a);l=i[a++];var p=new Array(l);for(o=0;o<l;++o,a+=t.Cartesian2.packedLength)p[o]=t.Cartesian2.unpack(i,a);var d=t.Ellipsoid.unpack(i,a,T);a+=t.Ellipsoid.packedLength;var c=i[a++],u=i[a];return e.defined(r)?(r._positions=s,r._shape=p,r._ellipsoid=t.Ellipsoid.clone(d,r._ellipsoid),r._cornerType=c,r._granularity=u,r):(D.polylinePositions=s,D.shapePositions=p,D.cornerType=c,D.granularity=u,new L(D))};var G=new m.BoundingRectangle;return L.createGeometry=function(e){var i=e._positions,t=g.arrayRemoveDuplicates(i,n.Cartesian3.equalsEpsilon),r=e._shape;if(r=C.PolylineVolumeGeometryLibrary.removeDuplicatesFromShape(r),!(t.length<2||r.length<3)){_.PolygonPipeline.computeWindingOrder2D(r)===_.WindingOrder.CLOCKWISE&&r.reverse();var o=m.BoundingRectangle.fromPoints(r,G);return function(e,i){var n=new u.GeometryAttributes;n.position=new d.GeometryAttribute({componentDatatype:p.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:e});var t,r,o=i.length,l=n.position.values.length/3,s=e.length/3/o,f=y.IndexDatatype.createTypedArray(l,2*o*(s+1)),h=0,g=(t=0)*o;for(r=0;r<o-1;r++)f[h++]=r+g,f[h++]=r+g+1;for(f[h++]=o-1+g,f[h++]=g,g=(t=s-1)*o,r=0;r<o-1;r++)f[h++]=r+g,f[h++]=r+g+1;for(f[h++]=o-1+g,f[h++]=g,t=0;t<s-1;t++){var m=o*t,v=m+o;for(r=0;r<o;r++)f[h++]=r+m,f[h++]=r+v}return new d.Geometry({attributes:n,indices:y.IndexDatatype.createTypedArray(l,f),boundingSphere:a.BoundingSphere.fromVertices(e),primitiveType:c.PrimitiveType.LINES})}(C.PolylineVolumeGeometryLibrary.computePositions(t,r,o,e,!1),r)}},function(i,n){return e.defined(n)&&(i=L.unpack(i,n)),i._ellipsoid=t.Ellipsoid.clone(i._ellipsoid),L.createGeometry(i)}}));