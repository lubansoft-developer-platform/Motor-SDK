define(["./when-52cea266","./Check-ee5dd8a8","./Cartesian2-7c55a82d","./Rectangle-88e14f21","./BoundingSphere-f5553fb7","./Transforms-d0762529","./Matrix4-da50dd55","./RuntimeError-02840484","./WebGLConstants-52779751","./ComponentDatatype-fc6a16e1","./GeometryAttribute-60495dd3","./PrimitiveType-875d1f73","./GeometryAttributes-769ca2c2","./IndexDatatype-f9231b69","./IntersectionTests-ca78fc8a","./Plane-fdd70b9e","./arrayRemoveDuplicates-64b1d558","./BoundingRectangle-c47690af","./AxisAlignedBoundingBox-08b0db17","./EllipsoidTangentPlane-64b84590","./EllipsoidRhumbLine-90d09904","./PolygonPipeline-fe89e8c5","./PolylineVolumeGeometryLibrary-758b4391","./EllipsoidGeodesic-69201d63","./PolylinePipeline-6fde5179"],(function(e,i,r,n,t,o,a,l,s,p,d,u,c,y,f,h,g,v,m,E,P,_,k,C,b){"use strict";function D(e,i){var r=new c.GeometryAttributes;r.position=new d.GeometryAttribute({componentDatatype:p.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:e});var n,o,a=i.length,l=r.position.values.length/3,s=e.length/3,f=s/a,h=y.IndexDatatype.createTypedArray(l,2*a*(f+1)),g=0;n=0;var v=n*a;for(o=0;o<a-1;o++)h[g++]=o+v,h[g++]=o+v+1;for(h[g++]=a-1+v,h[g++]=v,n=f-1,v=n*a,o=0;o<a-1;o++)h[g++]=o+v,h[g++]=o+v+1;for(h[g++]=a-1+v,h[g++]=v,n=0;n<f-1;n++){var m=a*n,E=m+a;for(o=0;o<a;o++)h[g++]=o+m,h[g++]=o+E}var P=new d.Geometry({attributes:r,indices:y.IndexDatatype.createTypedArray(l,h),boundingSphere:t.BoundingSphere.fromVertices(e),primitiveType:u.PrimitiveType.LINES});return P}function w(t){t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT);var o=t.polylinePositions,a=t.shapePositions;if(!e.defined(o))throw new i.DeveloperError("options.polylinePositions is required.");if(!e.defined(a))throw new i.DeveloperError("options.shapePositions is required.");this._positions=o,this._shape=a,this._ellipsoid=n.Ellipsoid.clone(e.defaultValue(t.ellipsoid,n.Ellipsoid.WGS84)),this._cornerType=e.defaultValue(t.cornerType,k.CornerType.ROUNDED),this._granularity=e.defaultValue(t.granularity,r.CesiumMath.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeOutlineGeometry";var l=1+o.length*r.Cartesian3.packedLength;l+=1+a.length*r.Cartesian2.packedLength,this.packedLength=l+n.Ellipsoid.packedLength+2}w.pack=function(t,o,a){if(!e.defined(t))throw new i.DeveloperError("value is required");if(!e.defined(o))throw new i.DeveloperError("array is required");var l;a=e.defaultValue(a,0);var s=t._positions,p=s.length;for(o[a++]=p,l=0;l<p;++l,a+=r.Cartesian3.packedLength)r.Cartesian3.pack(s[l],o,a);var d=t._shape;for(p=d.length,o[a++]=p,l=0;l<p;++l,a+=r.Cartesian2.packedLength)r.Cartesian2.pack(d[l],o,a);return n.Ellipsoid.pack(t._ellipsoid,o,a),a+=n.Ellipsoid.packedLength,o[a++]=t._cornerType,o[a]=t._granularity,o};var L=n.Ellipsoid.clone(n.Ellipsoid.UNIT_SPHERE),T={polylinePositions:void 0,shapePositions:void 0,ellipsoid:L,height:void 0,cornerType:void 0,granularity:void 0};w.unpack=function(t,o,a){if(!e.defined(t))throw new i.DeveloperError("array is required");var l;o=e.defaultValue(o,0);var s=t[o++],p=new Array(s);for(l=0;l<s;++l,o+=r.Cartesian3.packedLength)p[l]=r.Cartesian3.unpack(t,o);s=t[o++];var d=new Array(s);for(l=0;l<s;++l,o+=r.Cartesian2.packedLength)d[l]=r.Cartesian2.unpack(t,o);var u=n.Ellipsoid.unpack(t,o,L);o+=n.Ellipsoid.packedLength;var c=t[o++],y=t[o];return e.defined(a)?(a._positions=p,a._shape=d,a._ellipsoid=n.Ellipsoid.clone(u,a._ellipsoid),a._cornerType=c,a._granularity=y,a):(T.polylinePositions=p,T.shapePositions=d,T.cornerType=c,T.granularity=y,new w(T))};var G=new v.BoundingRectangle;function A(i,r){return e.defined(r)&&(i=w.unpack(i,r)),i._ellipsoid=n.Ellipsoid.clone(i._ellipsoid),w.createGeometry(i)}return w.createGeometry=function(e){var i=e._positions,n=g.arrayRemoveDuplicates(i,r.Cartesian3.equalsEpsilon),t=e._shape;if(t=k.PolylineVolumeGeometryLibrary.removeDuplicatesFromShape(t),!(n.length<2||t.length<3)){_.PolygonPipeline.computeWindingOrder2D(t)===_.WindingOrder.CLOCKWISE&&t.reverse();var o=v.BoundingRectangle.fromPoints(t,G),a=k.PolylineVolumeGeometryLibrary.computePositions(n,t,o,e,!1);return D(a,t)}},A}));