define(["exports","./when-45f3d25d","./Cartesian3-e69091b9","./Cartesian2-7a44370a","./EllipsoidTangentPlane-c567cc9c","./PolygonPipeline-d22f3330","./PolylinePipeline-5cca45a5"],(function(e,i,t,n,r,o,a){"use strict";var l={};function s(e,i){return t.CesiumMath.equalsEpsilon(e.latitude,i.latitude,t.CesiumMath.EPSILON14)&&t.CesiumMath.equalsEpsilon(e.longitude,i.longitude,t.CesiumMath.EPSILON14)}var h=new n.Cartographic,g=new n.Cartographic;function p(e,t,r,o){var a=t.length;if(!(a<2)){var l=i.defined(o),p=i.defined(r),c=!0,d=new Array(a),P=new Array(a),u=new Array(a),v=t[0];d[0]=v;var f=e.cartesianToCartographic(v,h);p&&(f.height=r[0]),c=c&&f.height<=0,P[0]=f.height,u[0]=l?o[0]:0;for(var y=1,m=1;m<a;++m){var C=t[m],A=e.cartesianToCartographic(C,g);p&&(A.height=r[m]),c=c&&A.height<=0,s(f,A)?f.height<A.height&&(P[y-1]=A.height):(d[y]=C,P[y]=A.height,u[y]=l?o[m]:0,n.Cartographic.clone(A,f),++y)}if(!(c||y<2))return d.length=y,P.length=y,u.length=y,{positions:d,topHeights:P,bottomHeights:u}}}var c=new Array(2),d=new Array(2),P={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};l.computePositions=function(e,n,l,s,h,g){var u=p(e,n,l,s);if(i.defined(u)){if(n=u.positions,l=u.topHeights,s=u.bottomHeights,n.length>=3){var v=r.EllipsoidTangentPlane.fromPoints(n,e),f=v.projectPointsOntoPlane(n);o.PolygonPipeline.computeWindingOrder2D(f)===o.WindingOrder.CLOCKWISE&&(n.reverse(),l.reverse(),s.reverse())}var y,m,C=n.length,A=C-2,w=t.CesiumMath.chordLength(h,e.maximumRadius),E=P;if(E.minDistance=w,E.ellipsoid=e,g){var O,b=0;for(O=0;O<C-1;O++)b+=a.PolylinePipeline.numberOfPoints(n[O],n[O+1],w)+1;y=new Float64Array(3*b),m=new Float64Array(3*b);var L=c,M=d;E.positions=L,E.height=M;var F=0;for(O=0;O<C-1;O++){L[0]=n[O],L[1]=n[O+1],M[0]=l[O],M[1]=l[O+1];var H=a.PolylinePipeline.generateArc(E);y.set(H,F),M[0]=s[O],M[1]=s[O+1],m.set(a.PolylinePipeline.generateArc(E),F),F+=H.length}}else E.positions=n,E.height=l,y=new Float64Array(a.PolylinePipeline.generateArc(E)),E.height=s,m=new Float64Array(a.PolylinePipeline.generateArc(E));return{bottomPositions:m,topPositions:y,numCorners:A}}},e.WallGeometryLibrary=l}));