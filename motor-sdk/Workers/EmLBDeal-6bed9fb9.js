define(["exports","./when-45f3d25d","./Check-34538dad","./Cartesian3-e69091b9","./Matrix4-c65e6a1b","./Transforms-68229cf3","./EmWrapperManager-a482472d"],(function(e,t,r,o,a,i,n){"use strict";const s=new o.Cartesian3,m=new o.Cartesian3,y=new a.Matrix3,h=new a.Matrix3,l=new a.Matrix4;class d{constructor(){}init(e,s){if(!t.defined(n.emMod))throw new r.DeveloperError("initWebAssembly\u521d\u59cb\u5316\u5c1a\u672a\u5b8c\u6210");return this._LBDeal=new n.emMod.LBDeal,this._LBDeal.Init(e,s.x,s.y,s.z)?(this._centerENMatrix=i.Transforms.eastNorthUpToFixedFrame(o.Cartesian3.fromDegrees(s.x,s.y,s.z)),this._matrixArray=new Float64Array(a.Matrix4.toArray(a.Matrix4.IDENTITY)),this._pMatrixAry=n.emMod._malloc(this._matrixArray.byteLength),this._oneTyped32Array=new Float32Array([0,0,0]),this._pOnePt32Ary=n.emMod._malloc(this._oneTyped32Array.byteLength),this._oneTyped64Array=new Float64Array([0,0,0]),this._pOnePt64Ary=n.emMod._malloc(this._oneTyped64Array.byteLength),!0):(n.emMod.destroy(this._LBDeal),this._LBDeal=void 0,!1)}destroy(){t.defined(this._LBDeal)&&(n.emMod.destroy(this._LBDeal),this._LBDeal=void 0,n.emMod._free(this._pMatrixAry),n.emMod._free(this._pOnePt32Ary),n.emMod._free(this._pOnePt64Ary))}computeProjToCartesianAry(e,t,r){this.computeProjToCartesianAryImp(r,e,t,!1,this._LBDeal,!1)}computeCartesianToProjAry(e,t,r){this.computeProjToCartesianAryImp(r,e,t,!0,this._LBDeal,!1)}computeProjToCartesian(e,r,a){let i=[e.x,e.y,e.z];return this.computeProjToCartesianAryImp(r,i,!1,!1,this._LBDeal,!0),t.defined(a)?(a.x=i[0],a.y=i[1],a.z=i[2],a):new o.Cartesian3(i[0],i[1],i[2])}computeCartesianToProj(e,r,a){let i=[e.x,e.y,e.z];return this.computeProjToCartesianAryImp(r,i,!1,!0,this._LBDeal,!0),t.defined(a)?(a.x=i[0],a.y=i[1],a.z=i[2],a):new o.Cartesian3(i[0],i[1],i[2])}computeDegreeToProjAry(e,t){this.computeDegreeToProjImp(e,t,!1,this._LBDeal,!1)}computeProjToDegreeAry(e,t){this.computeDegreeToProjImp(e,t,!0,this._LBDeal,!1)}computeDegreeToProj(e,r,a){let i=[e.x,e.y,e.z];return this.computeDegreeToProjImp(i,r,!1,this._LBDeal,!0),t.defined(a)?(a.x=i[0],a.y=i[1],a.z=i[2],a):new o.Cartesian3(i[0],i[1],i[2])}computeProjToDegree(e,r,a){let i=[e.x,e.y,e.z];return this.computeDegreeToProjImp(i,r,!0,this._LBDeal,!0),t.defined(a)?(a.x=i[0],a.y=i[1],a.z=i[2],a):new o.Cartesian3(i[0],i[1],i[2])}cvtRelProjMatrixToCartesianMatrix(e,r){return t.defined(r)||(r=new a.Matrix4),a.Matrix4.getTranslation(e,s),a.Matrix4.getScale(e,m),a.Matrix4.getMatrix3(e,y),a.Matrix3.getRotation(y,h),a.Matrix4.fromScale(m,r),a.Matrix4.multiplyByMatrix3(r,h,r),this.computeProjToCartesian(s,void 0,s),a.Matrix4.multiplyByPoint(this._centerENMatrix,s,s),i.Transforms.eastNorthUpToFixedFrame(s,void 0,l),a.Matrix4.multiply(l,r,r),r}computeProjToCartesianAryImp(e,o,i,s,m,y){if(!t.defined(m))throw new r.DeveloperError("\u8bf7\u5148\u6267\u884c init\u8fdb\u884c\u521d\u59cb\u5316");let h,l;y?(h=this._oneTyped32Array,h.set(o),l=this._pOnePt32Ary):(h=new Float32Array(o),l=n.emMod._malloc(h.byteLength)),n.emMod.HEAPF32.set(h,l/4),e=t.defaultValue(e,a.Matrix4.IDENTITY),this._matrixArray.set(a.Matrix4.toArray(e)),n.emMod.HEAPF64.set(this._matrixArray,this._pMatrixAry/8),s?m.ComputeCartesianToProj(l,h.length,this._pMatrixAry,i):m.ComputeProjToCartesian(l,h.length,this._pMatrixAry,i);for(let t=0;t<o.length;++t)o[t]=n.emMod.HEAPF32[(l>>2)+t];y||n.emMod._free(l)}computeDegreeToProjImp(e,o,a,i,s){if(!t.defined(i))throw new r.DeveloperError("\u8bf7\u5148\u6267\u884c init\u8fdb\u884c\u521d\u59cb\u5316");let m,y;s?(m=this._oneTyped64Array,m.set(e),y=this._pOnePt64Ary):(m=new Float64Array(e),y=n.emMod._malloc(m.byteLength)),n.emMod.HEAPF64.set(m,y/8),a?i.TranformProjToDegree(y,m.length,o):i.TranformDegreeToProj(y,m.length,o);for(let t=0;t<e.length;++t)e[t]=n.emMod.HEAPF64[(y>>3)+t];s||n.emMod._free(y)}}e.EmLBDeal=d}));