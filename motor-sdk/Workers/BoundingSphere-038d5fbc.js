define(["exports","./when-45f3d25d","./Check-34538dad","./Cartesian3-ef6ea826","./Cartesian2-a652b463","./Transforms-c8a82813","./Matrix4-f54b529f"],(function(a,e,n,r,t,i,s){"use strict";function u(a){this._ellipsoid=e.defaultValue(a,t.Ellipsoid.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}function c(a,n){this.start=e.defaultValue(a,0),this.stop=e.defaultValue(n,0)}function d(a,n){this.center=r.Cartesian3.clone(e.defaultValue(a,r.Cartesian3.ZERO)),this.radius=e.defaultValue(n,0)}Object.defineProperties(u.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),u.prototype.project=function(a,n){var t=this._semimajorAxis,i=a.longitude*t,s=a.latitude*t,u=a.height;return e.defined(n)?(n.x=i,n.y=s,n.z=u,n):new r.Cartesian3(i,s,u)},u.prototype.unproject=function(a,n){var r=this._oneOverSemimajorAxis,i=a.x*r,s=a.y*r,u=a.z;return e.defined(n)?(n.longitude=i,n.latitude=s,n.height=u,n):new t.Cartographic(i,s,u)};var o=new r.Cartesian3,C=new r.Cartesian3,l=new r.Cartesian3,f=new r.Cartesian3,y=new r.Cartesian3,h=new r.Cartesian3,m=new r.Cartesian3,v=new r.Cartesian3,x=new r.Cartesian3,p=new r.Cartesian3,g=new r.Cartesian3,z=new r.Cartesian3,w=4/3*r.CesiumMath.PI;d.fromPoints=function(a,n){if(e.defined(n)||(n=new d),!e.defined(a)||0===a.length)return n.center=r.Cartesian3.clone(r.Cartesian3.ZERO,n.center),n.radius=0,n;var t,i=r.Cartesian3.clone(a[0],m),s=r.Cartesian3.clone(i,o),u=r.Cartesian3.clone(i,C),c=r.Cartesian3.clone(i,l),w=r.Cartesian3.clone(i,f),b=r.Cartesian3.clone(i,y),S=r.Cartesian3.clone(i,h),q=a.length;for(t=1;t<q;t++){r.Cartesian3.clone(a[t],i);var R=i.x,M=i.y,E=i.z;R<s.x&&r.Cartesian3.clone(i,s),R>w.x&&r.Cartesian3.clone(i,w),M<u.y&&r.Cartesian3.clone(i,u),M>b.y&&r.Cartesian3.clone(i,b),E<c.z&&r.Cartesian3.clone(i,c),E>S.z&&r.Cartesian3.clone(i,S)}var O=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(w,s,v)),P=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(b,u,v)),V=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(S,c,v)),I=s,j=w,B=O;P>B&&(B=P,I=u,j=b),V>B&&(B=V,I=c,j=S);var Z=x;Z.x=.5*(I.x+j.x),Z.y=.5*(I.y+j.y),Z.z=.5*(I.z+j.z);var D=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(j,Z,v)),T=Math.sqrt(D),_=p;_.x=s.x,_.y=u.y,_.z=c.z;var A=g;A.x=w.x,A.y=b.y,A.z=S.z;var N=r.Cartesian3.midpoint(_,A,z),W=0;for(t=0;t<q;t++){r.Cartesian3.clone(a[t],i);var k=r.Cartesian3.magnitude(r.Cartesian3.subtract(i,N,v));k>W&&(W=k);var G=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(i,Z,v));if(G>D){var U=Math.sqrt(G);D=(T=.5*(T+U))*T;var H=U-T;Z.x=(T*Z.x+H*i.x)/U,Z.y=(T*Z.y+H*i.y)/U,Z.z=(T*Z.z+H*i.z)/U}}return T<W?(r.Cartesian3.clone(Z,n.center),n.radius=T):(r.Cartesian3.clone(N,n.center),n.radius=W),n},d.fromInstancePoints=function(a,n,t){if(e.defined(n)||(n=new d),!e.defined(a)||0===t)return n.center=r.Cartesian3.clone(r.Cartesian3.ZERO,n.center),n.radius=0,n;var i,s=r.Cartesian3.clone(a[0],m),u=r.Cartesian3.clone(s,o),c=r.Cartesian3.clone(s,C),w=r.Cartesian3.clone(s,l),b=r.Cartesian3.clone(s,f),S=r.Cartesian3.clone(s,y),q=r.Cartesian3.clone(s,h);for(i=1;i<t;i++){r.Cartesian3.clone(a[i],s);var R=s.x,M=s.y,E=s.z;R<u.x&&r.Cartesian3.clone(s,u),R>b.x&&r.Cartesian3.clone(s,b),M<c.y&&r.Cartesian3.clone(s,c),M>S.y&&r.Cartesian3.clone(s,S),E<w.z&&r.Cartesian3.clone(s,w),E>q.z&&r.Cartesian3.clone(s,q)}var O=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(b,u,v)),P=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(S,c,v)),V=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(q,w,v)),I=u,j=b,B=O;P>B&&(B=P,I=c,j=S),V>B&&(B=V,I=w,j=q);var Z=x;Z.x=.5*(I.x+j.x),Z.y=.5*(I.y+j.y),Z.z=.5*(I.z+j.z);var D=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(j,Z,v)),T=Math.sqrt(D),_=p;_.x=u.x,_.y=c.y,_.z=w.z;var A=g;A.x=b.x,A.y=S.y,A.z=q.z;var N=r.Cartesian3.midpoint(_,A,z),W=0;for(i=0;i<t;i++){r.Cartesian3.clone(a[i],s);var k=r.Cartesian3.magnitude(r.Cartesian3.subtract(s,N,v));k>W&&(W=k);var G=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(s,Z,v));if(G>D){var U=Math.sqrt(G);D=(T=.5*(T+U))*T;var H=U-T;Z.x=(T*Z.x+H*s.x)/U,Z.y=(T*Z.y+H*s.y)/U,Z.z=(T*Z.z+H*s.z)/U}}return T<W?(r.Cartesian3.clone(Z,n.center),n.radius=T):(r.Cartesian3.clone(N,n.center),n.radius=W),n},d.isIntersect=function(a,e){return!(r.Cartesian3.distance(a.center,e.center)>a.radius+e.radius)},d.isInclude=function(a,e){let n=r.Cartesian3.distance(a.center,e.center);return a.radius>n+e.radius};var b=new u,S=new r.Cartesian3,q=new r.Cartesian3,R=new t.Cartographic,M=new t.Cartographic;d.fromRectangle2D=function(a,e,n){return d.fromRectangleWithHeights2D(a,e,0,0,n)},d.fromRectangleWithHeights2D=function(a,n,i,s,u){if(e.defined(u)||(u=new d),!e.defined(a))return u.center=r.Cartesian3.clone(r.Cartesian3.ZERO,u.center),u.radius=0,u;n=e.defaultValue(n,b),t.Rectangle.southwest(a,R),R.height=i,t.Rectangle.northeast(a,M),M.height=s;var c=n.project(R,S),o=n.project(M,q),C=o.x-c.x,l=o.y-c.y,f=o.z-c.z;u.radius=.5*Math.sqrt(C*C+l*l+f*f);var y=u.center;return y.x=c.x+.5*C,y.y=c.y+.5*l,y.z=c.z+.5*f,u};var E=[];d.fromRectangle3D=function(a,n,i,s){if(n=e.defaultValue(n,t.Ellipsoid.WGS84),i=e.defaultValue(i,0),e.defined(s)||(s=new d),!e.defined(a))return s.center=r.Cartesian3.clone(r.Cartesian3.ZERO,s.center),s.radius=0,s;var u=t.Rectangle.subsample(a,n,i,E);return d.fromPoints(u,s)},d.fromVertices=function(a,n,t,i){if(e.defined(i)||(i=new d),!e.defined(a)||0===a.length)return i.center=r.Cartesian3.clone(r.Cartesian3.ZERO,i.center),i.radius=0,i;n=e.defaultValue(n,r.Cartesian3.ZERO),t=e.defaultValue(t,3);var s=m;s.x=a[0]+n.x,s.y=a[1]+n.y,s.z=a[2]+n.z;var u,c=r.Cartesian3.clone(s,o),w=r.Cartesian3.clone(s,C),b=r.Cartesian3.clone(s,l),S=r.Cartesian3.clone(s,f),q=r.Cartesian3.clone(s,y),R=r.Cartesian3.clone(s,h),M=a.length;for(u=0;u<M;u+=t){var E=a[u]+n.x,O=a[u+1]+n.y,P=a[u+2]+n.z;s.x=E,s.y=O,s.z=P,E<c.x&&r.Cartesian3.clone(s,c),E>S.x&&r.Cartesian3.clone(s,S),O<w.y&&r.Cartesian3.clone(s,w),O>q.y&&r.Cartesian3.clone(s,q),P<b.z&&r.Cartesian3.clone(s,b),P>R.z&&r.Cartesian3.clone(s,R)}var V=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(S,c,v)),I=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(q,w,v)),j=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(R,b,v)),B=c,Z=S,D=V;I>D&&(D=I,B=w,Z=q),j>D&&(D=j,B=b,Z=R);var T=x;T.x=.5*(B.x+Z.x),T.y=.5*(B.y+Z.y),T.z=.5*(B.z+Z.z);var _=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(Z,T,v)),A=Math.sqrt(_),N=p;N.x=c.x,N.y=w.y,N.z=b.z;var W=g;W.x=S.x,W.y=q.y,W.z=R.z;var k=r.Cartesian3.midpoint(N,W,z),G=0;for(u=0;u<M;u+=t){s.x=a[u]+n.x,s.y=a[u+1]+n.y,s.z=a[u+2]+n.z;var U=r.Cartesian3.magnitude(r.Cartesian3.subtract(s,k,v));U>G&&(G=U);var H=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(s,T,v));if(H>_){var L=Math.sqrt(H);_=(A=.5*(A+L))*A;var X=L-A;T.x=(A*T.x+X*s.x)/L,T.y=(A*T.y+X*s.y)/L,T.z=(A*T.z+X*s.z)/L}}return A<G?(r.Cartesian3.clone(T,i.center),i.radius=A):(r.Cartesian3.clone(k,i.center),i.radius=G),i},d.fromEncodedCartesianVertices=function(a,n,t){if(e.defined(t)||(t=new d),!e.defined(a)||!e.defined(n)||a.length!==n.length||0===a.length)return t.center=r.Cartesian3.clone(r.Cartesian3.ZERO,t.center),t.radius=0,t;var i=m;i.x=a[0]+n[0],i.y=a[1]+n[1],i.z=a[2]+n[2];var s,u=r.Cartesian3.clone(i,o),c=r.Cartesian3.clone(i,C),w=r.Cartesian3.clone(i,l),b=r.Cartesian3.clone(i,f),S=r.Cartesian3.clone(i,y),q=r.Cartesian3.clone(i,h),R=a.length;for(s=0;s<R;s+=3){var M=a[s]+n[s],E=a[s+1]+n[s+1],O=a[s+2]+n[s+2];i.x=M,i.y=E,i.z=O,M<u.x&&r.Cartesian3.clone(i,u),M>b.x&&r.Cartesian3.clone(i,b),E<c.y&&r.Cartesian3.clone(i,c),E>S.y&&r.Cartesian3.clone(i,S),O<w.z&&r.Cartesian3.clone(i,w),O>q.z&&r.Cartesian3.clone(i,q)}var P=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(b,u,v)),V=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(S,c,v)),I=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(q,w,v)),j=u,B=b,Z=P;V>Z&&(Z=V,j=c,B=S),I>Z&&(Z=I,j=w,B=q);var D=x;D.x=.5*(j.x+B.x),D.y=.5*(j.y+B.y),D.z=.5*(j.z+B.z);var T=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(B,D,v)),_=Math.sqrt(T),A=p;A.x=u.x,A.y=c.y,A.z=w.z;var N=g;N.x=b.x,N.y=S.y,N.z=q.z;var W=r.Cartesian3.midpoint(A,N,z),k=0;for(s=0;s<R;s+=3){i.x=a[s]+n[s],i.y=a[s+1]+n[s+1],i.z=a[s+2]+n[s+2];var G=r.Cartesian3.magnitude(r.Cartesian3.subtract(i,W,v));G>k&&(k=G);var U=r.Cartesian3.magnitudeSquared(r.Cartesian3.subtract(i,D,v));if(U>T){var H=Math.sqrt(U);T=(_=.5*(_+H))*_;var L=H-_;D.x=(_*D.x+L*i.x)/H,D.y=(_*D.y+L*i.y)/H,D.z=(_*D.z+L*i.z)/H}}return _<k?(r.Cartesian3.clone(D,t.center),t.radius=_):(r.Cartesian3.clone(W,t.center),t.radius=k),t},d.fromCornerPoints=function(a,n,t){e.defined(t)||(t=new d);var i=r.Cartesian3.midpoint(a,n,t.center);return t.radius=r.Cartesian3.distance(i,n),t},d.fromEllipsoid=function(a,n){return e.defined(n)||(n=new d),r.Cartesian3.clone(r.Cartesian3.ZERO,n.center),n.radius=a.maximumRadius,n};var O=new r.Cartesian3;d.fromBoundingSpheres=function(a,n){if(e.defined(n)||(n=new d),!e.defined(a)||0===a.length)return n.center=r.Cartesian3.clone(r.Cartesian3.ZERO,n.center),n.radius=0,n;var t=a.length;if(1===t)return d.clone(a[0],n);if(2===t)return d.union(a[0],a[1],n);var i,s=[];for(i=0;i<t;i++)s.push(a[i].center);var u=(n=d.fromPoints(s,n)).center,c=n.radius;for(i=0;i<t;i++){var o=a[i];c=Math.max(c,r.Cartesian3.distance(u,o.center,O)+o.radius)}return n.radius=c,n};var P=new r.Cartesian3,V=new r.Cartesian3,I=new r.Cartesian3;d.fromOrientedBoundingBox=function(a,n){e.defined(n)||(n=new d);var t=a.halfAxes,i=s.Matrix3.getColumn(t,0,P),u=s.Matrix3.getColumn(t,1,V),c=s.Matrix3.getColumn(t,2,I);return r.Cartesian3.add(i,u,i),r.Cartesian3.add(i,c,i),n.center=r.Cartesian3.clone(a.center,n.center),n.radius=r.Cartesian3.magnitude(i),n},d.clone=function(a,n){if(e.defined(a))return e.defined(n)?(n.center=r.Cartesian3.clone(a.center,n.center),n.radius=a.radius,n):new d(a.center,a.radius)},d.packedLength=4,d.pack=function(a,n,r){r=e.defaultValue(r,0);var t=a.center;return n[r++]=t.x,n[r++]=t.y,n[r++]=t.z,n[r]=a.radius,n},d.unpack=function(a,n,r){n=e.defaultValue(n,0),e.defined(r)||(r=new d);var t=r.center;return t.x=a[n++],t.y=a[n++],t.z=a[n++],r.radius=a[n],r};var j=new r.Cartesian3,B=new r.Cartesian3;d.union=function(a,n,t){e.defined(t)||(t=new d);var i=a.center,s=a.radius,u=n.center,c=n.radius,o=r.Cartesian3.subtract(u,i,j),C=r.Cartesian3.magnitude(o);if(s>=C+c)return a.clone(t),t;if(c>=C+s)return n.clone(t),t;var l=.5*(s+C+c),f=r.Cartesian3.multiplyByScalar(o,(-s+l)/C,B);return r.Cartesian3.add(f,i,f),r.Cartesian3.clone(f,t.center),t.radius=l,t};var Z=new r.Cartesian3;d.expandDistance=function(a,e,n,t){r.Cartesian3.multiplyByScalar(n,e,Z);let i=t.center;return r.Cartesian3.add(i,Z,i),t.radius=Math.sqrt(a.radius*a.radius+e*e),t},d.expand=function(a,e,n){n=d.clone(a,n);var t=r.Cartesian3.magnitude(r.Cartesian3.subtract(e,n.center,Z));return t>n.radius&&(n.radius=t),n},d.intersectPlane=function(a,e){var n=a.center,t=a.radius,s=e.normal,u=r.Cartesian3.dot(s,n)+e.distance;return u<-t?i.Intersect.OUTSIDE:u<t?i.Intersect.INTERSECTING:i.Intersect.INSIDE},d.transform=function(a,n,r){return e.defined(r)||(r=new d),r.center=s.Matrix4.multiplyByPoint(n,a.center,r.center),r.radius=s.Matrix4.getMaximumScale(n)*a.radius,r};var D=new r.Cartesian3;d.distanceSquaredTo=function(a,e){var n=r.Cartesian3.subtract(a.center,e,D);return r.Cartesian3.magnitudeSquared(n)-a.radius*a.radius},d.transformWithoutScale=function(a,n,r){return e.defined(r)||(r=new d),r.center=s.Matrix4.multiplyByPoint(n,a.center,r.center),r.radius=a.radius,r};var T=new r.Cartesian3;d.computePlaneDistances=function(a,n,t,i){e.defined(i)||(i=new c);var s=r.Cartesian3.subtract(a.center,n,T),u=r.Cartesian3.dot(t,s);return i.start=u-a.radius,i.stop=u+a.radius,i};for(var _=new r.Cartesian3,A=new r.Cartesian3,N=new r.Cartesian3,W=new r.Cartesian3,k=new r.Cartesian3,G=new t.Cartographic,U=new Array(8),H=0;H<8;++H)U[H]=new r.Cartesian3;var L=new u;d.projectTo2D=function(a,n,t){var i,s=(n=e.defaultValue(n,L)).ellipsoid,u=a.center,c=a.radius;i=r.Cartesian3.equals(u,r.Cartesian3.ZERO)?r.Cartesian3.clone(r.Cartesian3.UNIT_X,_):s.geodeticSurfaceNormal(u,_);var o=r.Cartesian3.cross(r.Cartesian3.UNIT_Z,i,A);r.Cartesian3.normalize(o,o);var C=r.Cartesian3.cross(i,o,N);r.Cartesian3.normalize(C,C),r.Cartesian3.multiplyByScalar(i,c,i),r.Cartesian3.multiplyByScalar(C,c,C),r.Cartesian3.multiplyByScalar(o,c,o);var l=r.Cartesian3.negate(C,k),f=r.Cartesian3.negate(o,W),y=U,h=y[0];r.Cartesian3.add(i,C,h),r.Cartesian3.add(h,o,h),h=y[1],r.Cartesian3.add(i,C,h),r.Cartesian3.add(h,f,h),h=y[2],r.Cartesian3.add(i,l,h),r.Cartesian3.add(h,f,h),h=y[3],r.Cartesian3.add(i,l,h),r.Cartesian3.add(h,o,h),r.Cartesian3.negate(i,i),h=y[4],r.Cartesian3.add(i,C,h),r.Cartesian3.add(h,o,h),h=y[5],r.Cartesian3.add(i,C,h),r.Cartesian3.add(h,f,h),h=y[6],r.Cartesian3.add(i,l,h),r.Cartesian3.add(h,f,h),h=y[7],r.Cartesian3.add(i,l,h),r.Cartesian3.add(h,o,h);for(var m=y.length,v=0;v<m;++v){var x=y[v];r.Cartesian3.add(u,x,x);var p=s.cartesianToCartographic(x,G);n.project(p,x)}var g=(u=(t=d.fromPoints(y,t)).center).x,z=u.y,w=u.z;return u.x=w,u.y=g,u.z=z,t},d.isOccluded=function(a,e){return!e.isBoundingSphereVisible(a)},d.equals=function(a,n){return a===n||e.defined(a)&&e.defined(n)&&r.Cartesian3.equals(a.center,n.center)&&a.radius===n.radius},d.prototype.intersectPlane=function(a){return d.intersectPlane(this,a)},d.prototype.distanceSquaredTo=function(a){return d.distanceSquaredTo(this,a)},d.prototype.computePlaneDistances=function(a,e,n){return d.computePlaneDistances(this,a,e,n)},d.prototype.isOccluded=function(a){return d.isOccluded(this,a)},d.prototype.equals=function(a){return d.equals(this,a)},d.prototype.clone=function(a){return d.clone(this,a)},d.prototype.volume=function(){var a=this.radius;return w*a*a*a},d.prototype.getCornerAry=function(){var a=[],e=new r.Cartesian3,n=new r.Cartesian3(this.radius,0,0),t=new r.Cartesian3(0,this.radius,0),i=new r.Cartesian3(0,0,this.radius),s=r.Cartesian3.add(n,t,e);return r.Cartesian3.add(s,i,s),r.Cartesian3.add(s,this.center,s),a.push(s.clone()),r.Cartesian3.add(this.center,n,s),r.Cartesian3.add(s,t,s),r.Cartesian3.subtract(s,i,s),a.push(s.clone()),r.Cartesian3.add(this.center,n,s),r.Cartesian3.subtract(s,t,s),r.Cartesian3.add(s,i,s),a.push(s.clone()),r.Cartesian3.add(this.center,n,s),r.Cartesian3.subtract(s,t,s),r.Cartesian3.subtract(s,i,s),a.push(s.clone()),r.Cartesian3.subtract(this.center,n,s),r.Cartesian3.add(s,t,s),r.Cartesian3.add(s,i,s),a.push(s.clone()),r.Cartesian3.subtract(this.center,n,s),r.Cartesian3.add(s,t,s),r.Cartesian3.subtract(s,i,s),a.push(s.clone()),r.Cartesian3.subtract(this.center,n,s),r.Cartesian3.subtract(s,t,s),r.Cartesian3.add(s,i,s),a.push(s.clone()),r.Cartesian3.subtract(this.center,n,s),r.Cartesian3.subtract(s,t,s),r.Cartesian3.subtract(s,i,s),a.push(s.clone()),a},a.BoundingSphere=d,a.GeographicProjection=u,a.Interval=c}));