var tmp={};(function(r,n){"object"===typeof exports&&"undefined"!==typeof module?n(exports):n(r.topojson=r.topojson||{})})(tmp,(function(r){"use strict";var n=function(r){return r},t=function(r){if(null==r)return n;var t,e,o=r.scale[0],a=r.scale[1],i=r.translate[0],u=r.translate[1];return function(r,n){n||(t=e=0);var c=2,f=r.length,l=new Array(f);l[0]=(t+=r[0])*o+i,l[1]=(e+=r[1])*a+u;while(c<f)l[c]=r[c],++c;return l}},e=function(r){var n,e=t(r.transform),o=1/0,a=o,i=-o,u=-o;function c(r){r=e(r),r[0]<o&&(o=r[0]),r[0]>i&&(i=r[0]),r[1]<a&&(a=r[1]),r[1]>u&&(u=r[1])}function f(r){switch(r.type){case"GeometryCollection":r.geometries.forEach(f);break;case"Point":c(r.coordinates);break;case"MultiPoint":r.coordinates.forEach(c);break}}for(n in r.arcs.forEach((function(r){var n,t=-1,c=r.length;while(++t<c)n=e(r[t],t),n[0]<o&&(o=n[0]),n[0]>i&&(i=n[0]),n[1]<a&&(a=n[1]),n[1]>u&&(u=n[1])})),r.objects)f(r.objects[n]);return[o,a,i,u]},o=function(r,n){var t,e=r.length,o=e-n;while(o<--e)t=r[o],r[o++]=r[e],r[e]=t},a=function(r,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map((function(n){return i(r,n)}))}:i(r,n)};function i(r,n){var t=n.id,e=n.bbox,o=null==n.properties?{}:n.properties,a=u(r,n);return null==t&&null==e?{type:"Feature",properties:o,geometry:a}:null==e?{type:"Feature",id:t,properties:o,geometry:a}:{type:"Feature",id:t,bbox:e,properties:o,geometry:a}}function u(r,n){var e=t(r.transform),a=r.arcs;function i(r,n){n.length&&n.pop();for(var t=a[r<0?~r:r],i=0,u=t.length;i<u;++i)n.push(e(t[i],i));r<0&&o(n,u)}function u(r){return e(r)}function c(r){for(var n=[],t=0,e=r.length;t<e;++t)i(r[t],n);return n.length<2&&n.push(n[0]),n}function f(r){var n=c(r);while(n.length<4)n.push(n[0]);return n}function l(r){return r.map(f)}function s(r){var n,t=r.type;switch(t){case"GeometryCollection":return{type:t,geometries:r.geometries.map(s)};case"Point":n=u(r.coordinates);break;case"MultiPoint":n=r.coordinates.map(u);break;case"LineString":n=c(r.arcs);break;case"MultiLineString":n=r.arcs.map(c);break;case"Polygon":n=l(r.arcs);break;case"MultiPolygon":n=r.arcs.map(l);break;default:return null}return{type:t,coordinates:n}}return s(n)}var c=function(r,n){var t={},e={},o={},a=[],i=-1;function u(n){var t,e=r.arcs[n<0?~n:n],o=e[0];return r.transform?(t=[0,0],e.forEach((function(r){t[0]+=r[0],t[1]+=r[1]}))):t=e[e.length-1],n<0?[t,o]:[o,t]}function c(r,n){for(var e in r){var o=r[e];delete n[o.start],delete o.start,delete o.end,o.forEach((function(r){t[r<0?~r:r]=1})),a.push(o)}}return n.forEach((function(t,e){var o,a=r.arcs[t<0?~t:t];a.length<3&&!a[1][0]&&!a[1][1]&&(o=n[++i],n[i]=t,n[e]=o)})),n.forEach((function(r){var n,t,a=u(r),i=a[0],c=a[1];if(n=o[i])if(delete o[n.end],n.push(r),n.end=c,t=e[c]){delete e[t.start];var f=t===n?n:n.concat(t);e[f.start=n.start]=o[f.end=t.end]=f}else e[n.start]=o[n.end]=n;else if(n=e[c])if(delete e[n.start],n.unshift(r),n.start=i,t=o[i]){delete o[t.end];var l=t===n?n:t.concat(n);e[l.start=t.start]=o[l.end=n.end]=l}else e[n.start]=o[n.end]=n;else n=[r],e[n.start=i]=o[n.end=c]=n})),c(o,e),c(e,o),n.forEach((function(r){t[r<0?~r:r]||a.push([r])})),a},f=function(r){return u(r,l.apply(this,arguments))};function l(r,n,t){var e,o,a;if(arguments.length>1)e=s(r,n,t);else for(o=0,e=new Array(a=r.arcs.length);o<a;++o)e[o]=o;return{type:"MultiLineString",arcs:c(r,e)}}function s(r,n,t){var e,o=[],a=[];function i(r){var n=r<0?~r:r;(a[n]||(a[n]=[])).push({i:r,g:e})}function u(r){r.forEach(i)}function c(r){r.forEach(u)}function f(r){r.forEach(c)}function l(r){switch(e=r,r.type){case"GeometryCollection":r.geometries.forEach(l);break;case"LineString":u(r.arcs);break;case"MultiLineString":case"Polygon":c(r.arcs);break;case"MultiPolygon":f(r.arcs);break}}return l(n),a.forEach(null==t?function(r){o.push(r[0].i)}:function(r){t(r[0].g,r[r.length-1].g)&&o.push(r[0].i)}),o}function h(r){var n,t=-1,e=r.length,o=r[e-1],a=0;while(++t<e)n=o,o=r[t],a+=n[0]*o[1]-n[1]*o[0];return Math.abs(a)}var p=function(r){return u(r,g.apply(this,arguments))};function g(r,n){var t={},e=[],o=[];function a(r){switch(r.type){case"GeometryCollection":r.geometries.forEach(a);break;case"Polygon":i(r.arcs);break;case"MultiPolygon":r.arcs.forEach(i);break}}function i(r){r.forEach((function(n){n.forEach((function(n){(t[n=n<0?~n:n]||(t[n]=[])).push(r)}))})),e.push(r)}function f(n){return h(u(r,{type:"Polygon",arcs:[n]}).coordinates[0])}return n.forEach(a),e.forEach((function(r){if(!r._){var n=[],e=[r];r._=1,o.push(n);while(r=e.pop())n.push(r),r.forEach((function(r){r.forEach((function(r){t[r<0?~r:r].forEach((function(r){r._||(r._=1,e.push(r))}))}))}))}})),e.forEach((function(r){delete r._})),{type:"MultiPolygon",arcs:o.map((function(n){var e,o=[];if(n.forEach((function(r){r.forEach((function(r){r.forEach((function(r){t[r<0?~r:r].length<2&&o.push(r)}))}))})),o=c(r,o),(e=o.length)>1)for(var a,i,u=1,l=f(o[0]);u<e;++u)(a=f(o[u]))>l&&(i=o[0],o[0]=o[u],o[u]=i,l=a);return o}))}}var y=function(r,n){var t=0,e=r.length;while(t<e){var o=t+e>>>1;r[o]<n?t=o+1:e=o}return t},v=function(r){var n={},t=r.map((function(){return[]}));function e(r,t){r.forEach((function(r){r<0&&(r=~r);var e=n[r];e?e.push(t):n[r]=[t]}))}function o(r,n){r.forEach((function(r){e(r,n)}))}function a(r,n){"GeometryCollection"===r.type?r.geometries.forEach((function(r){a(r,n)})):r.type in i&&i[r.type](r.arcs,n)}var i={LineString:e,MultiLineString:o,Polygon:o,MultiPolygon:function(r,n){r.forEach((function(r){o(r,n)}))}};for(var u in r.forEach(a),n)for(var c=n[u],f=c.length,l=0;l<f;++l)for(var s=l+1;s<f;++s){var h,p=c[l],g=c[s];(h=t[p])[u=y(h,g)]!==g&&h.splice(u,0,g),(h=t[g])[u=y(h,p)]!==p&&h.splice(u,0,p)}return t},b=function(r){if(null==r)return n;var t,e,o=r.scale[0],a=r.scale[1],i=r.translate[0],u=r.translate[1];return function(r,n){n||(t=e=0);var c=2,f=r.length,l=new Array(f),s=Math.round((r[0]-i)/o),h=Math.round((r[1]-u)/a);l[0]=s-t,t=s,l[1]=h-e,e=h;while(c<f)l[c]=r[c],++c;return l}},m=function(r,n){if(r.transform)throw new Error("already quantized");if(n&&n.scale)c=r.bbox;else{if(!((t=Math.floor(n))>=2))throw new Error("n must be \u22652");c=r.bbox||e(r);var t,o=c[0],a=c[1],i=c[2],u=c[3];n={scale:[i-o?(i-o)/(t-1):1,u-a?(u-a)/(t-1):1],translate:[o,a]}}var c,f,l=b(n),s=r.objects,h={};function p(r){return l(r)}function g(r){var n;switch(r.type){case"GeometryCollection":n={type:"GeometryCollection",geometries:r.geometries.map(g)};break;case"Point":n={type:"Point",coordinates:p(r.coordinates)};break;case"MultiPoint":n={type:"MultiPoint",coordinates:r.coordinates.map(p)};break;default:return r}return null!=r.id&&(n.id=r.id),null!=r.bbox&&(n.bbox=r.bbox),null!=r.properties&&(n.properties=r.properties),n}function y(r){var n,t=0,e=1,o=r.length,a=new Array(o);a[0]=l(r[0],0);while(++t<o)((n=l(r[t],t))[0]||n[1])&&(a[e++]=n);return 1===e&&(a[e++]=[0,0]),a.length=e,a}for(f in s)h[f]=g(s[f]);return{type:"Topology",bbox:c,transform:n,objects:h,arcs:r.arcs.map(y)}},d=function(r){var n=1/0,t=1/0,e=-1/0,o=-1/0;function a(r){null!=r&&i.hasOwnProperty(r.type)&&i[r.type](r)}var i={GeometryCollection:function(r){r.geometries.forEach(a)},Point:function(r){u(r.coordinates)},MultiPoint:function(r){r.coordinates.forEach(u)},LineString:function(r){c(r.arcs)},MultiLineString:function(r){r.arcs.forEach(c)},Polygon:function(r){r.arcs.forEach(c)},MultiPolygon:function(r){r.arcs.forEach(f)}};function u(r){var a=r[0],i=r[1];a<n&&(n=a),a>e&&(e=a),i<t&&(t=i),i>o&&(o=i)}function c(r){r.forEach(u)}function f(r){r.forEach(c)}for(var l in r)a(r[l]);return e>=n&&o>=t?[n,t,e,o]:void 0},w=function(r,n,t,e,o){3===arguments.length&&(e=Array,o=null);for(var a=new e(r=1<<Math.max(4,Math.ceil(Math.log(r)/Math.LN2))),i=r-1,u=0;u<r;++u)a[u]=o;function c(e){var u=n(e)&i,c=a[u],f=0;while(c!=o){if(t(c,e))return!0;if(++f>=r)throw new Error("full hashset");c=a[u=u+1&i]}return a[u]=e,!0}function f(e){var u=n(e)&i,c=a[u],f=0;while(c!=o){if(t(c,e))return!0;if(++f>=r)break;c=a[u=u+1&i]}return!1}function l(){for(var r=[],n=0,t=a.length;n<t;++n){var e=a[n];e!=o&&r.push(e)}return r}return{add:c,has:f,values:l}},M=function(r,n,t,e,o,a){3===arguments.length&&(e=a=Array,o=null);for(var i=new e(r=1<<Math.max(4,Math.ceil(Math.log(r)/Math.LN2))),u=new a(r),c=r-1,f=0;f<r;++f)i[f]=o;function l(e,a){var f=n(e)&c,l=i[f],s=0;while(l!=o){if(t(l,e))return u[f]=a;if(++s>=r)throw new Error("full hashmap");l=i[f=f+1&c]}return i[f]=e,u[f]=a,a}function s(e,a){var f=n(e)&c,l=i[f],s=0;while(l!=o){if(t(l,e))return u[f];if(++s>=r)throw new Error("full hashmap");l=i[f=f+1&c]}return i[f]=e,u[f]=a,a}function h(e,a){var f=n(e)&c,l=i[f],s=0;while(l!=o){if(t(l,e))return u[f];if(++s>=r)break;l=i[f=f+1&c]}return a}function p(){for(var r=[],n=0,t=i.length;n<t;++n){var e=i[n];e!=o&&r.push(e)}return r}return{set:l,maybeSet:s,get:h,keys:p}},E=function(r,n){return r[0]===n[0]&&r[1]===n[1]},P=new ArrayBuffer(16),x=new Uint32Array(P),k=function(r){var n=x[0]^x[1];return n=n<<5^n>>7^x[2]^x[3],2147483647&n},A=function(r){var n,t,e,o,a,i=r.coordinates,u=r.lines,c=r.rings,f=A(),l=new Int32Array(i.length),s=new Int32Array(i.length),h=new Int32Array(i.length),p=new Int8Array(i.length),g=0;for(n=0,t=i.length;n<t;++n)l[n]=s[n]=h[n]=-1;for(n=0,t=u.length;n<t;++n){var y=u[n],v=y[0],b=y[1];o=f[v],a=f[++v],++g,p[o]=1;while(++v<=b)x(n,e=o,o=a,a=f[v]);++g,p[a]=1}for(n=0,t=i.length;n<t;++n)l[n]=-1;for(n=0,t=c.length;n<t;++n){var m=c[n],d=m[0]+1,P=m[1];e=f[P-1],o=f[d-1],a=f[d],x(n,e,o,a);while(++d<=P)x(n,e=o,o=a,a=f[d])}function x(r,n,t,e){if(l[t]!==r){l[t]=r;var o=s[t];if(o>=0){var a=h[t];o===n&&a===e||o===e&&a===n||(++g,p[t]=1)}else s[t]=n,h[t]=e}}function A(){for(var r=M(1.4*i.length,L,C,Int32Array,-1,Int32Array),n=new Int32Array(i.length),t=0,e=i.length;t<e;++t)n[t]=r.maybeSet(t,t);return n}function L(r){return k(i[r])}function C(r,n){return E(i[r],i[n])}l=s=h=null;var S,j=w(1.4*g,k,E);for(n=0,t=i.length;n<t;++n)p[S=f[n]]&&j.add(i[S]);return j},L=function(r){var n,t,e,o=A(r),a=r.coordinates,i=r.lines,u=r.rings;for(t=0,e=i.length;t<e;++t){var c=i[t],f=c[0],l=c[1];while(++f<l)o.has(a[f])&&(n={0:f,1:c[1]},c[1]=f,c=c.next=n)}for(t=0,e=u.length;t<e;++t){var s=u[t],h=s[0],p=h,g=s[1],y=o.has(a[h]);while(++p<g)o.has(a[p])&&(y?(n={0:p,1:s[1]},s[1]=p,s=s.next=n):(C(a,h,g,g-p),a[g]=a[h],y=!0,p=h))}return r};function C(r,n,t,e){S(r,n,t),S(r,n,n+e),S(r,n+e,t)}function S(r,n,t){for(var e,o=n+(t---n>>1);n<o;++n,--t)e=r[n],r[n]=r[t],r[t]=e}var j=function(r){var n,t,e,o,a=r.coordinates,i=r.lines,u=r.rings,c=i.length+u.length;for(delete r.lines,delete r.rings,e=0,o=i.length;e<o;++e){n=i[e];while(n=n.next)++c}for(e=0,o=u.length;e<o;++e){t=u[e];while(t=t.next)++c}var f=M(2*c*1.4,k,E),l=r.arcs=[];for(e=0,o=i.length;e<o;++e){n=i[e];do{s(n)}while(n=n.next)}for(e=0,o=u.length;e<o;++e)if(t=u[e],t.next)do{s(t)}while(t=t.next);else h(t);function s(r){var n,t,e,o,i,u,c,s;if(e=f.get(n=a[r[0]]))for(c=0,s=e.length;c<s;++c)if(o=e[c],p(o,r))return r[0]=o[0],void(r[1]=o[1]);if(i=f.get(t=a[r[1]]))for(c=0,s=i.length;c<s;++c)if(u=i[c],g(u,r))return r[1]=u[0],void(r[0]=u[1]);e?e.push(r):f.set(n,[r]),i?i.push(r):f.set(t,[r]),l.push(r)}function h(r){var n,t,e,o,i;if(t=f.get(n=a[r[0]]))for(o=0,i=t.length;o<i;++o){if(e=t[o],y(e,r))return r[0]=e[0],void(r[1]=e[1]);if(v(e,r))return r[0]=e[1],void(r[1]=e[0])}if(t=f.get(n=a[r[0]+b(r)]))for(o=0,i=t.length;o<i;++o){if(e=t[o],y(e,r))return r[0]=e[0],void(r[1]=e[1]);if(v(e,r))return r[0]=e[1],void(r[1]=e[0])}t?t.push(r):f.set(n,[r]),l.push(r)}function p(r,n){var t=r[0],e=n[0],o=r[1],i=n[1];if(t-o!==e-i)return!1;for(;t<=o;++t,++e)if(!E(a[t],a[e]))return!1;return!0}function g(r,n){var t=r[0],e=n[0],o=r[1],i=n[1];if(t-o!==e-i)return!1;for(;t<=o;++t,--i)if(!E(a[t],a[i]))return!1;return!0}function y(r,n){var t=r[0],e=n[0],o=r[1],i=n[1],u=o-t;if(u!==i-e)return!1;for(var c=b(r),f=b(n),l=0;l<u;++l)if(!E(a[t+(l+c)%u],a[e+(l+f)%u]))return!1;return!0}function v(r,n){var t=r[0],e=n[0],o=r[1],i=n[1],u=o-t;if(u!==i-e)return!1;for(var c=b(r),f=u-b(n),l=0;l<u;++l)if(!E(a[t+(l+c)%u],a[i-(l+f)%u]))return!1;return!0}function b(r){var n=r[0],t=r[1],e=n,o=e,i=a[e];while(++e<t){var u=a[e];(u[0]<i[0]||u[0]===i[0]&&u[1]<i[1])&&(o=e,i=u)}return o-n}return r},G=function(r){var n=-1,t=r.length;while(++n<t){var e,o,a=r[n],i=0,u=1,c=a.length,f=a[0],l=f[0],s=f[1];while(++i<c)f=a[i],e=f[0],o=f[1],e===l&&o===s||(a[u++]=[e-l,o-s],l=e,s=o);1===u&&(a[u++]=[0,0]),a.length=u}return r},_=function(r){var n=-1,t=[],e=[],o=[];function a(r){r&&i.hasOwnProperty(r.type)&&i[r.type](r)}var i={GeometryCollection:function(r){r.geometries.forEach(a)},LineString:function(r){r.arcs=u(r.arcs)},MultiLineString:function(r){r.arcs=r.arcs.map(u)},Polygon:function(r){r.arcs=r.arcs.map(c)},MultiPolygon:function(r){r.arcs=r.arcs.map(f)}};function u(r){for(var e=0,a=r.length;e<a;++e)o[++n]=r[e];var i={0:n-a+1,1:n};return t.push(i),i}function c(r){for(var t=0,a=r.length;t<a;++t)o[++n]=r[t];var i={0:n-a+1,1:n};return e.push(i),i}function f(r){return r.map(c)}for(var l in r)a(r[l]);return{type:"Topology",coordinates:o,lines:t,rings:e,objects:r}},I=function(r){var n,t={};for(n in r)t[n]=T(r[n]);return t};function T(r){return null==r?{type:null}:("FeatureCollection"===r.type?F:"Feature"===r.type?N:O)(r)}function F(r){var n={type:"GeometryCollection",geometries:r.features.map(N)};return null!=r.bbox&&(n.bbox=r.bbox),n}function N(r){var n,t=O(r.geometry);for(n in null!=r.id&&(t.id=r.id),null!=r.bbox&&(t.bbox=r.bbox),r.properties){t.properties=r.properties;break}return t}function O(r){if(null==r)return{type:null};var n="GeometryCollection"===r.type?{type:"GeometryCollection",geometries:r.geometries.map(O)}:"Point"===r.type||"MultiPoint"===r.type?{type:r.type,coordinates:r.coordinates}:{type:r.type,arcs:r.coordinates};return null!=r.bbox&&(n.bbox=r.bbox),n}var q=function(r,n,t){var e=n[0],o=n[1],a=n[2],i=n[3],u=a-e?(t-1)/(a-e):1,c=i-o?(t-1)/(i-o):1;function f(r){return[Math.round((r[0]-e)*u),Math.round((r[1]-o)*c)]}function l(r,n){var t,a,i,f,l,s=-1,h=0,p=r.length,g=new Array(p);while(++s<p)t=r[s],f=Math.round((t[0]-e)*u),l=Math.round((t[1]-o)*c),f===a&&l===i||(g[h++]=[a=f,i=l]);g.length=h;while(h<n)h=g.push([g[0][0],g[0][1]]);return g}function s(r){return l(r,2)}function h(r){return l(r,4)}function p(r){return r.map(h)}function g(r){null!=r&&y.hasOwnProperty(r.type)&&y[r.type](r)}var y={GeometryCollection:function(r){r.geometries.forEach(g)},Point:function(r){r.coordinates=f(r.coordinates)},MultiPoint:function(r){r.coordinates=r.coordinates.map(f)},LineString:function(r){r.arcs=s(r.arcs)},MultiLineString:function(r){r.arcs=r.arcs.map(s)},Polygon:function(r){r.arcs=p(r.arcs)},MultiPolygon:function(r){r.arcs=r.arcs.map(p)}};for(var v in r)g(r[v]);return{scale:[1/u,1/c],translate:[e,o]}},U=function(r,n){var t=d(r=I(r)),e=n>0&&t&&q(r,t,n),o=j(L(_(r))),a=o.coordinates,i=M(1.4*o.arcs.length,z,R);function u(r){r&&c.hasOwnProperty(r.type)&&c[r.type](r)}r=o.objects,o.bbox=t,o.arcs=o.arcs.map((function(r,n){return i.set(r,n),a.slice(r[0],r[1]+1)})),delete o.coordinates,a=null;var c={GeometryCollection:function(r){r.geometries.forEach(u)},LineString:function(r){r.arcs=f(r.arcs)},MultiLineString:function(r){r.arcs=r.arcs.map(f)},Polygon:function(r){r.arcs=r.arcs.map(f)},MultiPolygon:function(r){r.arcs=r.arcs.map(l)}};function f(r){var n=[];do{var t=i.get(r);n.push(r[0]<r[1]?t:~t)}while(r=r.next);return n}function l(r){return r.map(f)}for(var s in r)u(r[s]);return e&&(o.transform=e,o.arcs=G(o.arcs)),o};function z(r){var n,t=r[0],e=r[1];return e<t&&(n=t,t=e,e=n),t+31*e}function R(r,n){var t,e=r[0],o=r[1],a=n[0],i=n[1];return o<e&&(t=e,e=o,o=t),i<a&&(t=a,a=i,i=t),e===a&&o===i}var V=function(r){var n,t,e=r.objects,o={},a=r.arcs,i=a.length,u=-1,c=new Array(i),f=0,l=-1;function s(r){switch(r.type){case"GeometryCollection":r.geometries.forEach(s);break;case"LineString":p(r.arcs);break;case"MultiLineString":r.arcs.forEach(p);break;case"Polygon":r.arcs.forEach(p);break;case"MultiPolygon":r.arcs.forEach(g);break}}function h(r){r<0&&(r=~r),c[r]||(c[r]=1,++f)}function p(r){r.forEach(h)}function g(r){r.forEach(p)}function y(r){var n;switch(r.type){case"GeometryCollection":n={type:"GeometryCollection",geometries:r.geometries.map(y)};break;case"LineString":n={type:"LineString",arcs:b(r.arcs)};break;case"MultiLineString":n={type:"MultiLineString",arcs:r.arcs.map(b)};break;case"Polygon":n={type:"Polygon",arcs:r.arcs.map(b)};break;case"MultiPolygon":n={type:"MultiPolygon",arcs:r.arcs.map(m)};break;default:return r}return null!=r.id&&(n.id=r.id),null!=r.bbox&&(n.bbox=r.bbox),null!=r.properties&&(n.properties=r.properties),n}function v(r){return r<0?~c[~r]:c[r]}function b(r){return r.map(v)}function m(r){return r.map(b)}for(t in e)s(e[t]);n=new Array(f);while(++u<i)c[u]&&(c[u]=++l,n[l]=a[u]);for(t in e)o[t]=y(e[t]);return{type:"Topology",bbox:r.bbox,transform:r.transform,objects:o,arcs:n}},W=function(r,n){var t,e=r.objects,o={};function a(r){var n,t;switch(r.type){case"Polygon":t=i(r.arcs),n=t?{type:"Polygon",arcs:t}:{type:null};break;case"MultiPolygon":t=r.arcs.map(i).filter(D),n=t.length?{type:"MultiPolygon",arcs:t}:{type:null};break;case"GeometryCollection":t=r.geometries.map(a).filter(H),n=t.length?{type:"GeometryCollection",geometries:t}:{type:null};break;default:return r}return null!=r.id&&(n.id=r.id),null!=r.bbox&&(n.bbox=r.bbox),null!=r.properties&&(n.properties=r.properties),n}function i(r){return r.length&&u(r[0])?[r[0]].concat(r.slice(1).filter(c)):null}function u(r){return n(r,!1)}function c(r){return n(r,!0)}for(t in null==n&&(n=B),e)o[t]=a(e[t]);return V({type:"Topology",bbox:r.bbox,transform:r.transform,objects:o,arcs:r.arcs})};function B(){return!0}function D(r){return r}function H(r){return null!=r.type}var J=function(r){var n,t=new Array(r.arcs.length),e=0;function o(r){switch(r.type){case"GeometryCollection":r.geometries.forEach(o);break;case"Polygon":a(r.arcs);break;case"MultiPolygon":r.arcs.forEach(a);break}}function a(r){for(var n=0,o=r.length;n<o;++n,++e)for(var a=r[n],i=0,u=a.length;i<u;++i){var c=a[i];c<0&&(c=~c);var f=t[c];null==f?t[c]=e:f!==e&&(t[c]=-1)}}for(n in r.objects)o(r.objects[n]);return function(r){for(var n,e=0,o=r.length;e<o;++e)if(-1===t[(n=r[e])<0?~n:n])return!0;return!1}};function K(r){var n=r[0],t=r[1],e=r[2];return Math.abs((n[0]-e[0])*(t[1]-n[1])-(n[0]-t[0])*(e[1]-n[1]))/2}function Q(r){var n,t=-1,e=r.length,o=r[e-1],a=0;while(++t<e)n=o,o=r[t],a+=n[0]*o[1]-n[1]*o[0];return Math.abs(a)/2}var X=function(r,n,t){return n=null==n?Number.MIN_VALUE:+n,null==t&&(t=Q),function(e,o){return t(a(r,{type:"Polygon",arcs:[e]}).geometry.coordinates[0],o)>=n}},Y=function(r,n,t){var e=J(r),o=X(r,n,t);return function(r,n){return e(r,n)||o(r,n)}};function Z(r,n){return r[1][2]-n[1][2]}var $=function(){var r={},n=[],t=0;function e(r,t){while(t>0){var e=(t+1>>1)-1,o=n[e];if(Z(r,o)>=0)break;n[o._=t]=o,n[r._=t=e]=r}}function o(r,e){while(1){var o=e+1<<1,a=o-1,i=e,u=n[i];if(a<t&&Z(n[a],u)<0&&(u=n[i=a]),o<t&&Z(n[o],u)<0&&(u=n[i=o]),i===e)break;n[u._=e]=u,n[r._=e=i]=r}}return r.push=function(r){return e(n[r._=t]=r,t++),t},r.pop=function(){if(!(t<=0)){var r,e=n[0];return--t>0&&(r=n[t],o(n[r._=0]=r,0)),e}},r.remove=function(r){var a,i=r._;if(n[i]===r)return i!==--t&&(a=n[t],(Z(a,r)<0?e:o)(n[a._=i]=a,i)),i},r};function rr(r){return[r[0],r[1],0]}var nr=function(r,n){var e=r.transform?t(r.transform):rr,o=$();null==n&&(n=K);var a=r.arcs.map((function(r){var t,a,u,c=[],f=0;for(r=r.map(e),a=1,u=r.length-1;a<u;++a)t=[r[a-1],r[a],r[a+1]],t[1][2]=n(t),c.push(t),o.push(t);for(r[0][2]=r[u][2]=1/0,a=0,u=c.length;a<u;++a)t=c[a],t.previous=c[a-1],t.next=c[a+1];while(t=o.pop()){var l=t.previous,s=t.next;t[1][2]<f?t[1][2]=f:f=t[1][2],l&&(l.next=s,l[2]=t[2],i(l)),s&&(s.previous=l,s[0]=t[0],i(s))}return r}));function i(r){o.remove(r),r[1][2]=n(r),o.push(r)}return{type:"Topology",bbox:r.bbox,objects:r.objects,arcs:a}},tr=function(r,n){var t=[];return r.arcs.forEach((function(r){r.forEach((function(r){isFinite(r[2])&&t.push(r[2])}))})),t.length&&er(t.sort(or),n)};function er(r,n){if(t=r.length){if((n=+n)<=0||t<2)return r[0];if(n>=1)return r[t-1];var t,e=(t-1)*n,o=Math.floor(e),a=r[o],i=r[o+1];return a+(i-a)*(e-o)}}function or(r,n){return n-r}var ar=function(r,n){n=null==n?Number.MIN_VALUE:+n;var t=r.arcs.map((function(r){var t,e=-1,o=0,a=r.length,i=new Array(a);while(++e<a)(t=r[e])[2]>=n&&(i[o++]=[t[0],t[1]]);return i.length=o,i}));return{type:"Topology",transform:r.transform,bbox:r.bbox,objects:r.objects,arcs:t}},ir=Math.PI,ur=2*ir,cr=ir/4,fr=ir/180,lr=Math.abs,sr=Math.atan2,hr=Math.cos,pr=Math.sin;function gr(r,n){for(var t,e,o,a=0,i=r.length,u=0,c=r[n?a++:i-1],f=c[0]*fr,l=c[1]*fr/2+cr,s=hr(l),h=pr(l);a<i;++a){c=r[a],t=f,f=c[0]*fr,l=c[1]*fr/2+cr,e=s,s=hr(l),o=h,h=pr(l);var p=f-t,g=p>=0?1:-1,y=g*p,v=o*h,b=e*s+v*hr(y),m=v*g*pr(y);u+=sr(m,b)}return u}function yr(r,n){var t=gr(r,!0);return n&&(t*=-1),2*(t<0?ur+t:t)}function vr(r){return 2*lr(gr(r,!1))}r.bbox=e,r.feature=a,r.mesh=f,r.meshArcs=l,r.merge=p,r.mergeArcs=g,r.neighbors=v,r.quantize=m,r.transform=t,r.untransform=b,r.topology=U,r.filter=W,r.filterAttached=J,r.filterAttachedWeight=Y,r.filterWeight=X,r.planarRingArea=Q,r.planarTriangleArea=K,r.presimplify=nr,r.quantile=tr,r.simplify=ar,r.sphericalRingArea=yr,r.sphericalTriangleArea=vr,Object.defineProperty(r,"__esModule",{value:!0})}));export default tmp.topojson;