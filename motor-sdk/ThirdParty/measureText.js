var getCSSValue=function(e,t){return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},measureText=function(e,t,a,l){var n=e.measureText(t),i=getCSSValue(e.canvas,"font-family"),o=getCSSValue(e.canvas,"font-size").replace("px",""),r=getCSSValue(e.canvas,"font-style"),s=getCSSValue(e.canvas,"font-weight"),d=!/\S/.test(t);n.fontsize=o;var u=document.createElement("div");u.style.position="absolute",u.style.opacity=0,u.style.font=r+" "+s+" "+o+"px "+i,u.innerHTML=t+"<br/>"+t,document.body.appendChild(u),n.leading=1.2*o;var c=getCSSValue(u,"height");if(c=c.replace("px",""),c>=2*o&&(n.leading=c/2|0),document.body.removeChild(u),d)n.ascent=0,n.descent=0,n.bounds={minx:0,maxx:n.width,miny:0,maxy:0},n.height=0;else{var y=document.createElement("canvas"),h=100;y.width=n.width+h,y.height=3*o,y.style.opacity=1,y.style.fontFamily=i,y.style.fontSize=o,y.style.fontStyle=r,y.style.fontWeight=s;var f=y.getContext("2d");f.font=r+" "+s+" "+o+"px "+i;var m=y.width,g=y.height,v=g/2;f.fillStyle="white",f.fillRect(-1,-1,m+2,g+2),a&&(f.strokeStyle="black",f.lineWidth=e.lineWidth,f.strokeText(t,h/2,v)),l&&(f.fillStyle="black",f.fillText(t,h/2,v));var x=f.getImageData(0,0,m,g).data,S=0,p=4*m,C=x.length;while(++S<C&&255===x[S]);var w=S/p|0;S=C-1;while(--S>0&&255===x[S]);var b=S/p|0;for(S=0;S<C&&255===x[S];)S+=p,S>=C&&(S=S-C+4);var V=S%p/4|0,T=1;for(S=C-3;S>=0&&255===x[S];)S-=p,S<0&&(S=C-3-4*T++);var k=S%p/4+1|0;n.ascent=v-w,n.descent=b-v,n.bounds={minx:V-h/2,maxx:k-h/2,miny:0,maxy:b-w},n.height=b-w+1}return n};export default measureText;